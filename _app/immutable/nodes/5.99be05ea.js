import{S as se,i as re,s as ae,M as ie,k as N,a as H,l as M,m as O,c as j,h as v,X as pe,n as w,b as E,G as D,a2 as kt,I as U,g as A,v as X,d as L,f as Z,Y as Ue,K as rt,Z as xe,a3 as on,j as Rn,N as ge,Q as at,R as ot,T as lt,U as ut,a1 as ct,P as te,a4 as Un,a5 as Ie,a6 as ft,D as Vn,o as dt,a7 as zn,y as Q,z as Y,A as $,B as ee,q as z,r as G,u as ce,a8 as Tt,J as V,e as q,a9 as Gn,C as qn,F as Kn,aa as wt,w as Be,$ as Fe,ab as Wn,a0 as He,H as ln,E as un}from"../chunks/index.897971b5.js";import{P as cn,I as Jn}from"../chunks/InjectMD.323158ff.js";import"../chunks/ProgressBar.svelte_svelte_type_style_lang.84e8538a.js";import{b as fn}from"../chunks/paths.c47483b7.js";const Xn=i=>({}),Et=i=>({});function It(i,e,t){const n=i.slice();return n[23]=e[t],n}function St(i){let e,t;const n=i[15].default,s=at(n,i,i[14],null);return{c(){e=N("label"),s&&s.c(),this.h()},l(r){e=M(r,"LABEL",{class:!0,for:!0});var a=O(e);s&&s.l(a),a.forEach(v),this.h()},h(){w(e,"class","range-slider-label "+Yn),w(e,"for",i[2])},m(r,a){E(r,e,a),s&&s.m(e,null),t=!0},p(r,a){s&&s.p&&(!t||a&16384)&&ot(s,n,r,r[14],t?ut(n,r[14],a,null):lt(r[14]),null),(!t||a&4)&&w(e,"for",r[2])},i(r){t||(A(s,r),t=!0)},o(r){L(s,r),t=!1},d(r){r&&v(e),s&&s.d(r)}}}function At(i){let e,t,n=i[8],s=[];for(let r=0;r<n.length;r+=1)s[r]=Pt(It(i,n,r));return{c(){e=N("datalist");for(let r=0;r<s.length;r+=1)s[r].c();this.h()},l(r){e=M(r,"DATALIST",{id:!0,class:!0});var a=O(e);for(let o=0;o<s.length;o+=1)s[o].l(a);a.forEach(v),this.h()},h(){w(e,"id",t="tickmarks-"+i[2]),w(e,"class","range-slider-ticks")},m(r,a){E(r,e,a);for(let o=0;o<s.length;o+=1)s[o]&&s[o].m(e,null)},p(r,a){if(a&256){n=r[8];let o;for(o=0;o<n.length;o+=1){const l=It(r,n,o);s[o]?s[o].p(l,a):(s[o]=Pt(l),s[o].c(),s[o].m(e,null))}for(;o<s.length;o+=1)s[o].d(1);s.length=n.length}a&4&&t!==(t="tickmarks-"+r[2])&&w(e,"id",t)},d(r){r&&v(e),ct(s,r)}}}function Pt(i){let e,t,n;return{c(){e=N("option"),this.h()},l(s){e=M(s,"OPTION",{label:!0}),O(e).forEach(v),this.h()},h(){e.__value=t=i[23],e.value=e.__value,w(e,"label",n=i[23])},m(s,r){E(s,e,r)},p(s,r){r&256&&t!==(t=s[23])&&(e.__value=t,e.value=e.__value),r&256&&n!==(n=s[23])&&w(e,"label",n)},d(s){s&&v(e)}}}function Ct(i){let e,t;const n=i[15].trail,s=at(n,i,i[14],Et);return{c(){e=N("div"),s&&s.c(),this.h()},l(r){e=M(r,"DIV",{class:!0});var a=O(e);s&&s.l(a),a.forEach(v),this.h()},h(){w(e,"class","range-slider-trail")},m(r,a){E(r,e,a),s&&s.m(e,null),t=!0},p(r,a){s&&s.p&&(!t||a&16384)&&ot(s,n,r,r[14],t?ut(n,r[14],a,Xn):lt(r[14]),Et)},i(r){t||(A(s,r),t=!0)},o(r){L(s,r),t=!1},d(r){r&&v(e),s&&s.d(r)}}}function Zn(i){let e,t,n,s,r,a,o,l,u,h,f,d,m=i[12].default&&St(i),g=[{type:"range"},{id:i[2]},{name:i[1]},{class:r="range-slider-input "+i[9]},{list:a="tickmarks-"+i[2]},{"aria-label":i[7]},{min:i[3]},{max:i[4]},{step:i[5]},i[11]()],T={};for(let p=0;p<g.length;p+=1)T=ie(T,g[p]);let _=i[6]&&i[8]&&i[8].length&&At(i),b=i[12].trail&&Ct(i);return{c(){e=N("div"),m&&m.c(),t=H(),n=N("div"),s=N("input"),o=H(),_&&_.c(),l=H(),b&&b.c(),this.h()},l(p){e=M(p,"DIV",{class:!0,"data-testid":!0});var c=O(e);m&&m.l(c),t=j(c),n=M(c,"DIV",{class:!0});var y=O(n);s=M(y,"INPUT",{type:!0,id:!0,name:!0,class:!0,list:!0,"aria-label":!0,min:!0,max:!0,step:!0}),o=j(y),_&&_.l(y),y.forEach(v),l=j(c),b&&b.l(c),c.forEach(v),this.h()},h(){pe(s,T),w(n,"class","range-content "+$n),w(e,"class",u="range-slider "+i[10]),w(e,"data-testid","range-slider")},m(p,c){E(p,e,c),m&&m.m(e,null),D(e,t),D(e,n),D(n,s),s.autofocus&&s.focus(),kt(s,i[0]),D(n,o),_&&_.m(n,null),D(e,l),b&&b.m(e,null),h=!0,f||(d=[U(s,"change",i[19]),U(s,"input",i[19]),U(s,"click",i[16]),U(s,"change",i[17]),U(s,"blur",i[18])],f=!0)},p(p,[c]){p[12].default?m?(m.p(p,c),c&4096&&A(m,1)):(m=St(p),m.c(),A(m,1),m.m(e,t)):m&&(X(),L(m,1,1,()=>{m=null}),Z()),pe(s,T=Ue(g,[{type:"range"},(!h||c&4)&&{id:p[2]},(!h||c&2)&&{name:p[1]},(!h||c&512&&r!==(r="range-slider-input "+p[9]))&&{class:r},(!h||c&4&&a!==(a="tickmarks-"+p[2]))&&{list:a},(!h||c&128)&&{"aria-label":p[7]},(!h||c&8)&&{min:p[3]},(!h||c&16)&&{max:p[4]},(!h||c&32)&&{step:p[5]},p[11]()])),c&1&&kt(s,p[0]),p[6]&&p[8]&&p[8].length?_?_.p(p,c):(_=At(p),_.c(),_.m(n,null)):_&&(_.d(1),_=null),p[12].trail?b?(b.p(p,c),c&4096&&A(b,1)):(b=Ct(p),b.c(),A(b,1),b.m(e,null)):b&&(X(),L(b,1,1,()=>{b=null}),Z()),(!h||c&1024&&u!==(u="range-slider "+p[10]))&&w(e,"class",u)},i(p){h||(A(m),A(b),h=!0)},o(p){L(m),L(b),h=!1},d(p){p&&v(e),m&&m.d(),_&&_.d(),b&&b.d(),f=!1,rt(d)}}}const Qn="space-y-2",Yn="",$n="flex justify-center py-2",ei="w-full h-2";function ti(i,e,t){let n,s;const r=["name","id","value","min","max","step","ticked","accent","label"];let a=xe(e,r),{$$slots:o={},$$scope:l}=e;const u=on(o);let{name:h}=e,{id:f=String(Math.random())}=e,{value:d=0}=e,{min:m=0}=e,{max:g=100}=e,{step:T=1}=e,{ticked:_=!1}=e,{accent:b="accent-surface-900 dark:accent-surface-50"}=e,{label:p=""}=e,c;function y(){_!=!1&&t(8,c=Array.from({length:g-m+1},(I,oe)=>oe+m))}_&&y(),Rn(()=>{y()});function C(){return delete a.class,a}function k(I){te.call(this,i,I)}function B(I){te.call(this,i,I)}function S(I){te.call(this,i,I)}function F(){d=Un(this.value),t(0,d)}return i.$$set=I=>{t(22,e=ie(ie({},e),ge(I))),t(21,a=xe(e,r)),"name"in I&&t(1,h=I.name),"id"in I&&t(2,f=I.id),"value"in I&&t(0,d=I.value),"min"in I&&t(3,m=I.min),"max"in I&&t(4,g=I.max),"step"in I&&t(5,T=I.step),"ticked"in I&&t(6,_=I.ticked),"accent"in I&&t(13,b=I.accent),"label"in I&&t(7,p=I.label),"$$scope"in I&&t(14,l=I.$$scope)},i.$$.update=()=>{t(10,n=`${Qn} ${e.class??""}`),i.$$.dirty&8192&&t(9,s=`${ei} ${b}`)},e=ge(e),[d,h,f,m,g,T,_,p,c,s,n,C,u,b,l,o,k,B,S,F]}class ni extends se{constructor(e){super(),re(this,e,ti,Zn,ae,{name:1,id:2,value:0,min:3,max:4,step:5,ticked:6,accent:13,label:7})}}function Nt(i){let e,t;const n=i[22].default,s=at(n,i,i[21],null);return{c(){e=N("div"),s&&s.c(),this.h()},l(r){e=M(r,"DIV",{class:!0});var a=O(e);s&&s.l(a),a.forEach(v),this.h()},h(){w(e,"class","slide-toggle-text ml-3")},m(r,a){E(r,e,a),s&&s.m(e,null),t=!0},p(r,a){s&&s.p&&(!t||a[0]&2097152)&&ot(s,n,r,r[21],t?ut(n,r[21],a,null):lt(r[21]),null)},i(r){t||(A(s,r),t=!0)},o(r){L(s,r),t=!1},d(r){r&&v(e),s&&s.d(r)}}}function ii(i){let e,t,n,s,r,a,o,l,u,h,f,d,m,g,T,_=[{type:"checkbox"},{class:"slide-toggle-input hidden"},{name:i[1]},i[8](),{disabled:s=i[9].disabled}],b={};for(let c=0;c<_.length;c+=1)b=ie(b,_[c]);let p=i[10].default&&Nt(i);return{c(){e=N("div"),t=N("label"),n=N("input"),r=H(),a=N("div"),o=N("div"),h=H(),p&&p.c(),this.h()},l(c){e=M(c,"DIV",{id:!0,class:!0,"data-testid":!0,role:!0,"aria-label":!0,"aria-checked":!0,tabindex:!0});var y=O(e);t=M(y,"LABEL",{class:!0});var C=O(t);n=M(C,"INPUT",{type:!0,class:!0,name:!0}),r=j(C),a=M(C,"DIV",{class:!0});var k=O(a);o=M(k,"DIV",{class:!0}),O(o).forEach(v),k.forEach(v),h=j(C),p&&p.l(C),C.forEach(v),y.forEach(v),this.h()},h(){pe(n,b),w(o,"class",l="slide-toggle-thumb "+i[3]),Ie(o,"cursor-not-allowed",i[9].disabled),w(a,"class",u="slide-toggle-track "+i[4]),Ie(a,"cursor-not-allowed",i[9].disabled),w(t,"class",f="slide-toggle-label "+i[5]),w(e,"id",i[2]),w(e,"class",d="slide-toggle "+i[6]),w(e,"data-testid","slide-toggle"),w(e,"role","switch"),w(e,"aria-label",i[2]),w(e,"aria-checked",i[0]),w(e,"tabindex","0")},m(c,y){E(c,e,y),D(e,t),D(t,n),n.autofocus&&n.focus(),n.checked=i[0],D(t,r),D(t,a),D(a,o),D(t,h),p&&p.m(t,null),m=!0,g||(T=[U(n,"change",i[31]),U(n,"click",i[23]),U(n,"keydown",i[24]),U(n,"keyup",i[25]),U(n,"keypress",i[26]),U(n,"mouseover",i[27]),U(n,"change",i[28]),U(n,"focus",i[29]),U(n,"blur",i[30]),U(e,"keydown",i[7])],g=!0)},p(c,y){pe(n,b=Ue(_,[{type:"checkbox"},{class:"slide-toggle-input hidden"},(!m||y[0]&2)&&{name:c[1]},c[8](),(!m||y[0]&512&&s!==(s=c[9].disabled))&&{disabled:s}])),y[0]&1&&(n.checked=c[0]),(!m||y[0]&8&&l!==(l="slide-toggle-thumb "+c[3]))&&w(o,"class",l),(!m||y[0]&520)&&Ie(o,"cursor-not-allowed",c[9].disabled),(!m||y[0]&16&&u!==(u="slide-toggle-track "+c[4]))&&w(a,"class",u),(!m||y[0]&528)&&Ie(a,"cursor-not-allowed",c[9].disabled),c[10].default?p?(p.p(c,y),y[0]&1024&&A(p,1)):(p=Nt(c),p.c(),A(p,1),p.m(t,null)):p&&(X(),L(p,1,1,()=>{p=null}),Z()),(!m||y[0]&32&&f!==(f="slide-toggle-label "+c[5]))&&w(t,"class",f),(!m||y[0]&4)&&w(e,"id",c[2]),(!m||y[0]&64&&d!==(d="slide-toggle "+c[6]))&&w(e,"class",d),(!m||y[0]&4)&&w(e,"aria-label",c[2]),(!m||y[0]&1)&&w(e,"aria-checked",c[0])},i(c){m||(A(p),m=!0)},o(c){L(p),m=!1},d(c){c&&v(e),p&&p.d(),g=!1,rt(T)}}}const si="inline-block",ri="unstyled flex items-center",ai="flex transition-all duration-[200ms] cursor-pointer",oi="w-[50%] h-full scale-[0.8] transition-all duration-[200ms] shadow";function li(i,e,t){let n,s,r,a,o,l,u,h;const f=["name","checked","size","background","active","border","rounded","label"];let d=xe(e,f),{$$slots:m={},$$scope:g}=e;const T=on(m),_=ft();let{name:b}=e,{checked:p=!1}=e,{size:c="md"}=e,{background:y="bg-surface-400 dark:bg-surface-700"}=e,{active:C="bg-surface-900 dark:bg-surface-300"}=e,{border:k=""}=e,{rounded:B="rounded-full"}=e,{label:S=""}=e,F;switch(c){case"sm":F="w-12 h-6";break;case"lg":F="w-20 h-10";break;default:F="w-16 h-8"}function I(P){["Enter","Space"].includes(P.code)&&(P.preventDefault(),_("keyup",P),P.currentTarget.firstChild.click())}function oe(){return delete d.class,d}function qe(P){te.call(this,i,P)}function Ln(P){te.call(this,i,P)}function On(P){te.call(this,i,P)}function Dn(P){te.call(this,i,P)}function xn(P){te.call(this,i,P)}function Bn(P){te.call(this,i,P)}function Fn(P){te.call(this,i,P)}function Hn(P){te.call(this,i,P)}function jn(){p=this.checked,t(0,p)}return i.$$set=P=>{t(9,e=ie(ie({},e),ge(P))),t(33,d=xe(e,f)),"name"in P&&t(1,b=P.name),"checked"in P&&t(0,p=P.checked),"size"in P&&t(11,c=P.size),"background"in P&&t(12,y=P.background),"active"in P&&t(13,C=P.active),"border"in P&&t(14,k=P.border),"rounded"in P&&t(15,B=P.rounded),"label"in P&&t(2,S=P.label),"$$scope"in P&&t(21,g=P.$$scope)},i.$$.update=()=>{i.$$.dirty[0]&12289&&t(19,n=p?C:`${y} cursor-pointer`),i.$$.dirty[0]&1&&t(18,s=p?"bg-white/75":"bg-white"),i.$$.dirty[0]&1&&t(17,r=p?"translate-x-full":""),t(20,a=e.disabled===!0?"opacity-50":"hover:brightness-[105%] dark:hover:brightness-110 cursor-pointer"),t(6,o=`${si} ${B} ${a} ${e.class??""}`),i.$$.dirty[0]&638976&&t(4,u=`${ai} ${k} ${B} ${F} ${n}`),i.$$.dirty[0]&425984&&t(3,h=`${oi} ${B} ${s} ${r}`)},t(5,l=`${ri}`),e=ge(e),[p,b,S,h,u,l,o,I,oe,e,T,c,y,C,k,B,F,r,s,n,a,g,m,qe,Ln,On,Dn,xn,Bn,Fn,Hn,jn]}class ui extends se{constructor(e){super(),re(this,e,li,ii,ae,{name:1,checked:0,size:11,background:12,active:13,border:14,rounded:15,label:2},null,[-1,-1])}}const ci={namespaces:{tei:"http://www.tei-c.org/ns/1.0",teieg:"http://www.tei-c.org/ns/Examples",rng:"http://relaxng.org/ns/structure/1.0"},tei:{eg:["<pre>","</pre>"],ptr:['<a href="$rw@target">$@target</a>'],ref:[["[target]",['<a href="$rw@target">',"</a>"]]],graphic:function(i){let e=new Image;return e.src=this.rw(i.getAttribute("url")),i.hasAttribute("width")&&e.setAttribute("width",i.getAttribute("width")),i.hasAttribute("height")&&e.setAttribute("height",i.getAttribute("height")),e},list:[["[type=gloss]",function(i){const e=i.ownerDocument;let t=e.createElement("dl");for(let n of Array.from(i.children))if(n.nodeType==1){if(n.localName=="tei-label"){let s=e.createElement("dt");s.innerHTML=n.innerHTML,t.appendChild(s)}if(n.localName=="tei-item"){let s=e.createElement("dd");s.innerHTML=n.innerHTML,t.appendChild(s)}}return t}]],note:[["[place=end]",function(i){const e=i.ownerDocument;this.noteIndex?this.noteIndex++:this.noteIndex=1;let t="_note_"+this.noteIndex,n=e.createElement("a");n.setAttribute("id","src"+t),n.setAttribute("href","#"+t),n.innerHTML=this.noteIndex;let s=e.createElement("sup");s.appendChild(n);let r=e.querySelector("ol.notes");r||(r=e.createElement("ol"),r.setAttribute("class","notes"),this.dom.appendChild(r));let a=e.createElement("li");return a.id=t,a.innerHTML=i.innerHTML,r.appendChild(a),s}],["_",["(",")"]]],teiHeader:function(i){this.hideContent(i,!1)},title:[["tei-titlestmt>tei-title",function(i){const e=i.ownerDocument;let t=e.createElement("title");t.innerHTML=i.innerText,e.querySelector("head").appendChild(t)}]]},teieg:{egXML:function(i){let t=i.ownerDocument.createElement("pre"),n=this.serialize(i,!0).replace(/</g,"&lt;"),s=n.match(/^[\t ]+/);return s&&(n=n.replace(new RegExp("^"+s[0],"mg"),"")),t.innerHTML=n,t}}};function fi(i,e){let t=1,n=i;for(;n&&n.previousElementSibling!==null&&(!e||n.previousElementSibling.localName==e)&&(t++,n=n.previousElementSibling,!!n.previousElementSibling););return t}function di(i){const e=i.ownerDocument;let t=n=>{let s=n.nodeType===1?e.createElement(n.nodeName):n.cloneNode(!0);if(n.attributes)for(let r of Array.from(n.attributes))r.name!=="data-processed"&&s.setAttribute(r.name,r.value);for(let r of Array.from(n.childNodes))if(r.nodeType==1){if(!n.hasAttribute("data-empty"))if(r.hasAttribute("data-original")){for(let a of Array.from(r.childNodes)){let o=s.appendChild(t(a));o.nodeType===1&&o.hasAttribute("data-origid")&&(o.setAttribute("id",o.getAttribute("data-origid")),o.removeAttribute("data-origid"))}return s}else s.appendChild(t(r))}else s.appendChild(r.cloneNode());return s};return t(i)}function hi(i){return i.replace(/ .*$/,"")}function dn(i,e=!0){const t=i.ownerDocument;if(i.childNodes.length>0){let n=t.createElement("span");i.appendChild(n),n.setAttribute("hidden",""),n.setAttribute("data-original","");for(let s of Array.from(i.childNodes))if(s!==n){if(s.nodeType===1){s.setAttribute("data-processed","");for(let r of s.querySelectorAll("*"))r.setAttribute("data-processed","")}n.appendChild(i.removeChild(s))}if(e)for(let s of Array.from(n.querySelectorAll("*")))s.hasAttribute("id")&&(s.setAttribute("data-origid",s.getAttribute("id")),s.removeAttribute("id"))}}function mi(i){return this.rw(this.first(i))}function pi(i,e){let t="";for(let n=0;n<e;n++)t+=i;return t}function gi(i){let e=this.prefixDefs[i.substring(0,i.indexOf(":"))];return i.replace(new RegExp(e.matchPattern),e.replacementPattern)}function bi(i){return this.prefixDefs[i]}function vi(i){return i.match(/^(?:http|mailto|file|\/|#).*$/)?i:this.base+this.utilities.first(i)}function Ze(i,e,t){let n="",s=r=>!/[^\t\n\r ]/.test(r);if(!e&&i.nodeType==1){typeof t=="string"&&t!==""?n+=`
`+t+"<":n+="<",n+=i.getAttribute("data-origname");let r=i.hasAttribute("data-origatts")?i.getAttribute("data-origatts").split(" "):[];for(let a of Array.from(i.attributes))!a.name.startsWith("data-")&&!["id","lang","class"].includes(a.name)&&(n+=" "+r.find(function(o){return o.toLowerCase()==a.name})+'="'+a.value+'"'),a.name=="data-xmlns"&&(n+=' xmlns="'+a.value+'"');i.childNodes.length>0?n+=">":n+="/>"}for(let r of Array.from(i.childNodes))switch(r.nodeType){case 1:typeof t=="string"?n+=Ze(r,!1,t+"  "):n+=Ze(r,!1,t);break;case 7:n+="<?"+r.nodeValue+"?>";break;case 8:n+="<!--"+r.nodeValue+"-->";break;default:if(e&&s(r.nodeValue)&&(n+=r.nodeValue.replace(/^\s*\n/,"")),typeof t=="string"&&s(r.nodeValue))break;n+=r.nodeValue}return!e&&i.childNodes.length>0&&(typeof t=="string"?n+=`
`+t+"</":n+="</",n+=i.getAttribute("data-origname")+">"),n}function yi(i){return i.replace(/&gt;/,">").replace(/&quot;/,'"').replace(/&apos;/,"'").replace(/&amp;/,"&")}function je(i){return i.includes(":"),i.replace(/:/,"-").toLowerCase()}function hn(i,e=null,t=!1){try{window.customElements.define(je(i),class extends HTMLElement{constructor(){super(),this.matches(":defined")||(e&&e.call(this),this.setAttribute("data-processed",""))}connectedCallback(){this.hasAttribute("data-processed")||(e&&e.call(this),this.setAttribute("data-processed",""))}})}catch(n){t&&(console.log(je(i)+" couldn't be registered or is already registered."),console.log(n))}}const Ke=Object.freeze(Object.defineProperty({__proto__:null,copyAndReset:di,defineCustomElement:hn,first:hi,getOrdinality:fi,getPrefixDef:bi,hideContent:dn,normalizeURI:mi,repeat:pi,resolveURI:gi,rw:vi,serialize:Ze,tagName:je,unEscapeEntities:yi},Symbol.toStringTag,{value:"Module"}));function _i(i){if(i.namespaces)for(let e of Object.keys(i.namespaces))!this.namespaces.has(i.namespaces[e])&&!Array.from(this.namespaces.values()).includes(e)&&this.namespaces.set(i.namespaces[e],e);for(let e of this.namespaces.values())if(i[e])for(let t of Object.keys(i[e]))this.behaviors[`${e}:${t}`]=i[e][t];if(i.functions)for(let e of Object.keys(i.functions))this.utilities[e]=i.functions[e];i.handlers&&console.log("Behavior handlers are no longer used."),i.fallbacks&&console.log("Fallback behaviors are no longer used.")}function ki(i,e,t){let n;if(i===Object(i))for(let s of Object.keys(i))this.namespaces.has(i[s])||(this.namespaces.set(i[s],s),n=s);else n=i;this.behaviors[`${n}:${e}`]=t}function Ti(i,e){let t;if(i===Object(i))for(let n of Object.keys(i))this.namespaces.has(i[n])||(this.namespaces.set(i[n],n),t=n);else t=i;delete this.behaviors[`${t}:${e}`]}function wi(i,e){const t=i.documentElement;let n=1,s=function(a){return e.has(a.namespaceURI?a.namespaceURI:"")||e.set(a.namespaceURI,"ns"+n++),e.get(a.namespaceURI?a.namespaceURI:"")+":"+a.localName};const r=new Set(Array.from(t.querySelectorAll("*"),s));return r.add(s(t)),r}function Ei(i){return Array.from(i.querySelectorAll("*[data-origname]"),e=>e.localName.replace(/(\w+)-.+/,"$1:")+e.getAttribute("data-origname"))}class me{constructor(e){this.options=e||{},this.document=this.options.documentObject?this.options.documentObject:void 0,this.document===void 0&&(typeof window<"u"&&window.document?this.document=window.document:typeof global<"u"&&global.document&&(this.document=global.document)),this.addBehaviors=_i.bind(this),this.addBehavior=ki.bind(this),this.removeBehavior=Ti.bind(this),this.utilities={};for(const t of Object.keys(Ke))["getPrefixDef","rw","resolveURI"].includes(t)?this.utilities[t]=Ke[t].bind(this):this.utilities[t]=Ke[t];if(this.els=[],this.namespaces=new Map,this.behaviors={},this.hasStyle=!1,this.prefixDefs=[],this.debug=this.options.debug===!0,this.discardContent=this.options.discardContent===!0,this.options.base)this.base=this.options.base;else try{window&&(this.base=window.location.href.replace(/\/[^\/]*$/,"/"))}catch{this.base=""}this.options.omitDefaultBehaviors||this.addBehaviors(ci),this.options.ignoreFragmentId&&window&&window.removeEventListener("ceteiceanload",me.restorePosition)}getHTML5(e,t,n){return window&&window.location.href.startsWith(this.base)&&e.indexOf("/")>=0&&(this.base=e.replace(/\/[^\/]*$/,"/")),new Promise(function(r,a){let o=new XMLHttpRequest;o.open("GET",e),o.send(),o.onload=function(){this.status>=200&&this.status<300?r(this.response):a(this.statusText)},o.onerror=function(){a(this.statusText)}}).catch(function(r){console.log("Could not get XML file."),this.debug&&console.log(r)}).then(r=>this.makeHTML5(r,t,n))}makeHTML5(e,t,n){return this.XML_dom=new DOMParser().parseFromString(e,"text/xml"),this.domToHTML5(this.XML_dom,t,n)}preprocess(e,t,n){this.els=wi(e,this.namespaces);let s=r=>{let a;if(this.namespaces.has(r.namespaceURI?r.namespaceURI:"")){let o=this.namespaces.get(r.namespaceURI?r.namespaceURI:"");a=this.document.createElement(`${o}-${r.localName}`)}else a=this.document.importNode(r,!1);for(let o of Array.from(r.attributes))o.name=="xmlns"?a.setAttribute("data-xmlns",o.value):a.setAttribute(o.name,o.value),o.name=="xml:id"&&a.setAttribute("id",o.value),o.name=="xml:lang"&&a.setAttribute("lang",o.value),o.name=="rendition"&&a.setAttribute("class",o.value.replace(/#/g,""));if(a.setAttribute("data-origname",r.localName),r.hasAttributes()&&a.setAttribute("data-origatts",r.getAttributeNames().join(" ")),r.childNodes.length==0&&a.setAttribute("data-empty",""),r.localName=="head"){let o=e.evaluate("count(ancestor::*[tei:head])",r,function(l){if(l=="tei")return"http://www.tei-c.org/ns/1.0"},1,null);a.setAttribute("data-level",o.numberValue)}if(r.localName=="tagsDecl"){let o=this.document.createElement("style");for(let l of Array.from(r.childNodes))if(l.nodeType==1&&l.localName=="rendition"&&l.getAttribute("scheme")=="css"){let u="";l.hasAttribute("selector")?(u+=l.getAttribute("selector").replace(/([^#, >]+\w*)/g,"tei-$1").replace(/#tei-/g,"#")+`{
`,u+=l.textContent):(u+="."+l.getAttribute("xml:id")+`{
`,u+=l.textContent),u+=`
}
`,o.appendChild(this.document.createTextNode(u))}o.childNodes.length>0&&(a.appendChild(o),this.hasStyle=!0)}r.localName=="prefixDef"&&(this.prefixDefs.push(r.getAttribute("ident")),this.prefixDefs[r.getAttribute("ident")]={matchPattern:r.getAttribute("matchPattern"),replacementPattern:r.getAttribute("replacementPattern")});for(let o of Array.from(r.childNodes))o.nodeType==1?a.appendChild(s(o)):a.appendChild(o.cloneNode());return n&&n(a,r),a};if(this.dom=s(e.documentElement),this.utilities.dom=this.dom,t)t(this.dom,this),window&&window.dispatchEvent(Se);else return typeof window<"u"&&window.dispatchEvent(Se),this.dom}domToHTML5(e,t,n){if(this.preprocess(e,null,n),this.applyBehaviors(),this.done=!0,t)t(this.dom,this),window&&window.dispatchEvent(Se);else return typeof window<"u"&&window.dispatchEvent(Se),this.dom}processPage(){this.els=Ei(this.document),this.applyBehaviors()}unsetNamespace(e){this.namespaces.delete(e)}setBaseUrl(e){this.base=e}append(e,t){let n=this;if(t){let s=e.call(n.utilities,t);s&&!n.childExists(t.firstElementChild,s.nodeName)&&n.appendBasic(t,s)}else return function(){if(!this.hasAttribute("data-processed")){let s=e.call(n.utilities,this);s&&!n.childExists(this.firstElementChild,s.nodeName)&&n.appendBasic(this,s)}}}appendBasic(e,t){this.discardContent?e.innerHTML="":dn(e,!0),e.appendChild(t)}bName(e){return e.tagName.substring(0,e.tagName.indexOf("-")).toLowerCase()+":"+e.getAttribute("data-origname")}childExists(e,t){return e&&e.nodeName==t?!0:e&&e.nextElementSibling&&this.childExists(e.nextElementSibling,t)}decorator(e){if(Array.isArray(e)&&e.length==0)return function(n){};if(Array.isArray(e)&&!Array.isArray(e[0]))return this.applyDecorator(e);let t=this;return function(n){for(let s of e)if(n.matches(s[0])||s[0]==="_")return Array.isArray(s[1])?t.decorator(s[1]).call(this,n):s[1].call(this,n)}}applyDecorator(e){let t=this;return function(n){let s=[];for(let r=0;r<e.length;r++)s.push(t.template(e[r],n));return t.insert(n,s)}}getFallback(e,t){if(e[t])return e[t]instanceof Function?e[t]:this.decorator(e[t])}getHandler(e,t){if(e[t])return e[t]instanceof Function?this.append(e[t]):this.append(this.decorator(e[t]))}insert(e,t){let n=this.document.createElement("span");for(let s of Array.from(e.childNodes))s.nodeType===1&&!s.hasAttribute("data-processed")&&this.processElement(s);if(t[0].match("<[^>]+>")&&t[1]&&t[1].match("<[^>]+>"))n.innerHTML=t[0]+e.innerHTML+(t[1]?t[1]:"");else{n.innerHTML=t[0],n.setAttribute("data-before",t[0].replace(/<[^>]+>/g,"").length);for(let s of Array.from(e.childNodes))n.appendChild(s.cloneNode(!0));t.length>1&&(n.innerHTML+=t[1],n.setAttribute("data-after",t[1].replace(/<[^>]+>/g,"").length))}return n}processElement(e){if(e.hasAttribute("data-origname")&&!e.hasAttribute("data-processed")){let t=this.getFallback(this.bName(e));t&&(this.append(t,e),e.setAttribute("data-processed",""))}for(let t of Array.from(e.childNodes))t.nodeType===1&&this.processElement(t)}template(e,t){let n=e;if(e.search(/\$(\w*)(@([a-zA-Z:]+))/)){let s=/\$(\w*)@([a-zA-Z:]+)/g,r;for(;r=s.exec(e);)t.hasAttribute(r[2])?r[1]&&this.utilities[r[1]]?n=n.replace(r[0],this.utilities[r[1]](t.getAttribute(r[2]))):n=n.replace(r[0],t.getAttribute(r[2])):n=n.replace(r[0],"")}return n}applyBehaviors(){typeof window<"u"&&window.customElements?this.define.call(this,this.els):this.fallback.call(this,this.els)}define(e){for(let t of e){const n=this.getHandler(this.behaviors,t);hn(t,n,this.debug)}}fallback(e){for(let t of e){let n=this.getFallback(this.behaviors,t);if(n)for(let s of Array.from((this.dom&&!this.done?this.dom:this.document).getElementsByTagName(je(t))))s.hasAttribute("data-processed")||this.append(n,s)}}static savePosition(){window.sessionStorage.setItem(window.location+"-scroll",window.scrollY)}static restorePosition(){if(window.location.hash)setTimeout(function(){let e=this.document.querySelector(window.decodeURI(window.location.hash));e&&e.scrollIntoView()},100);else{let e;(e=window.sessionStorage.getItem(window.location+"-scroll"))&&setTimeout(function(){window.scrollTo(0,e)},100)}}}try{if(typeof window<"u"){window.CETEI=me,window.addEventListener("beforeunload",me.savePosition);var Se=new Event("ceteiceanload");window.addEventListener("ceteiceanload",me.restorePosition)}}catch(i){console.log(i)}let Ii={tei:{note:[["[type=gloss]",function(i){this.noteIndex?this.noteIndex++:this.noteIndex=1;let e="note"+this.noteIndex,t=document.createElement("a");t.setAttribute("id","src"+e),t.setAttribute("href","#"+e),t.innerHTML=this.noteIndex;let n=document.createElement("sup");n.appendChild(t);let s=this.dom.querySelector("ol.notes");s||(s=document.createElement("ol"),s.setAttribute("class","notes"),this.dom.appendChild(s));let r=document.createElement("li");return r.id=e,r.innerHTML='<a href="#src'+e+'">^</a> '+i.innerHTML,s.appendChild(r),n}]],ptr:function(i){if(i.getAttribute("target")==="#")console.log("Ignoring empty ptrs...");else{var e=document.createElement("a");return e.href=i.getAttribute("target"),e.innerHTML=">",e}},ref:function(i){if(i.getAttribute("target")==="#")console.log("Ignoring empty refs...");else{var e=document.createElement("a");return e.href=i.getAttribute("target"),e.innerHTML=i.innerHTML,e}},graphic:function(i){i.getAttribute("url")==="#"&&console.log("Ignoring non-existent graphics...")},pb:function(i){var e=document.createElement("p");return e.innerHTML=i.getAttribute("n"),e.classList.add("signature"),e},app:function(i){for(const e of i.children)e.classList.add(`var-${i.getAttribute("subtype")}`)},rdg:function(i){i.hasAttribute("data-empty")&&(i.innerHTML="[Does not exist in 1609]")},lem:function(i){i.hasAttribute("data-empty")&&(i.innerHTML="[+1609]")},fw:[["[type=horizontalRule]",function(i){return document.createElement("hr")}]]}};const{document:Mt}=zn;function Lt(i){let e,t;return e=new cn({}),{c(){Q(e.$$.fragment)},l(n){Y(e.$$.fragment,n)},m(n,s){$(e,n,s),t=!0},i(n){t||(A(e.$$.fragment,n),t=!0)},o(n){L(e.$$.fragment,n),t=!1},d(n){ee(e,n)}}}function Ot(i){let e,t;return{c(){e=N("p"),t=z(i[1]),this.h()},l(n){e=M(n,"P",{"data-testid":!0});var s=O(e);t=G(s,i[1]),s.forEach(v),this.h()},h(){w(e,"data-testid","error-message")},m(n,s){E(n,e,s),D(e,t)},p(n,s){s&2&&ce(t,n[1])},d(n){n&&v(e)}}}function Si(i){let e,t,n,s,r,a=!i[0]&&Lt(),o=i[1]&&Ot(i);return{c(){e=N("link"),t=H(),n=N("div"),a&&a.c(),s=H(),o&&o.c(),this.h()},l(l){const u=Vn("svelte-1rxmp49",Mt.head);e=M(u,"LINK",{rel:!0,type:!0,href:!0}),u.forEach(v),t=j(l),n=M(l,"DIV",{id:!0,"data-testid":!0});var h=O(n);a&&a.l(h),s=j(h),o&&o.l(h),h.forEach(v),this.h()},h(){w(e,"rel","stylesheet"),w(e,"type","text/css"),w(e,"href",fn+"/additional-style/TEIstyle.css"),w(n,"id","TEI-container"),w(n,"data-testid","TEI-container")},m(l,u){D(Mt.head,e),E(l,t,u),E(l,n,u),a&&a.m(n,null),D(n,s),o&&o.m(n,null),r=!0},p(l,[u]){l[0]?a&&(X(),L(a,1,1,()=>{a=null}),Z()):a?u&1&&A(a,1):(a=Lt(),a.c(),A(a,1),a.m(n,s)),l[1]?o?o.p(l,u):(o=Ot(l),o.c(),o.m(n,null)):o&&(o.d(1),o=null)},i(l){r||(A(a),r=!0)},o(l){L(a),r=!1},d(l){v(e),l&&v(t),l&&v(n),a&&a.d(),o&&o.d()}}}function Ai(i,e,t){let n=!1,s,{path:r=""}=e;return dt(async()=>{try{if(r==="")throw"No path specified";var a=new me;a.addBehaviors(Ii),a.getHTML5(r,function(o){document.getElementById("TEI-container").appendChild(o)}),t(0,n=!0)}catch(o){t(1,s=o.toString()),t(0,n=!0);return}}),i.$$set=a=>{"path"in a&&t(2,r=a.path)},[n,s,r]}class Pi extends se{constructor(e){super(),re(this,e,Ai,Si,ae,{path:2})}}function Ci(i){let e,t,n;return{c(){e=N("audio"),t=N("source"),this.h()},l(s){e=M(s,"AUDIO",{});var r=O(e);t=M(r,"SOURCE",{src:!0,type:!0}),r.forEach(v),this.h()},h(){Tt(t.src,n=i[0])||w(t,"src",n),w(t,"type","audio/mpeg"),e.controls=!0},m(s,r){E(s,e,r),D(e,t)},p(s,[r]){r&1&&!Tt(t.src,n=s[0])&&w(t,"src",n)},i:V,o:V,d(s){s&&v(e)}}}function Ni(i,e,t){let{audioPath:n}=e;return i.$$set=s=>{"audioPath"in s&&t(0,n=s.audioPath)},[n]}class Mi extends se{constructor(e){super(),re(this,e,Ni,Ci,ae,{audioPath:0})}}function Ce(i){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?Ce=function(e){return typeof e}:Ce=function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ce(i)}function ht(i,e){if(!(i instanceof e))throw new TypeError("Cannot call a class as a function")}function Dt(i,e){for(var t=0;t<e.length;t++){var n=e[t];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(i,n.key,n)}}function mt(i,e,t){return e&&Dt(i.prototype,e),t&&Dt(i,t),i}var J={VERSION:"2.0.16",NOTES:[],HEADER_CHUNK_LENGTH:14,CIRCLE_OF_FOURTHS:["C","F","Bb","Eb","Ab","Db","Gb","Cb","Fb","Bbb","Ebb","Abb"],CIRCLE_OF_FIFTHS:["C","G","D","A","E","B","F#","C#","G#","D#","A#","E#"]},Li=[["C"],["C#","Db"],["D"],["D#","Eb"],["E"],["F"],["F#","Gb"],["G"],["G#","Ab"],["A"],["A#","Bb"],["B"]],xt=0,Oi=function(e){Li.forEach(function(t){t.forEach(function(n){return J.NOTES[xt]=n+e}),xt++})};for(var We=-1;We<=9;We++)Oi(We);var R=function(){function i(){ht(this,i)}return mt(i,null,[{key:"byteToHex",value:function(t){return("0"+t.toString(16)).slice(-2)}},{key:"bytesToHex",value:function(t){var n=[];return t.forEach(function(s){return n.push(i.byteToHex(s))}),n.join("")}},{key:"hexToNumber",value:function(t){return parseInt(t,16)}},{key:"bytesToNumber",value:function(t){return i.hexToNumber(i.bytesToHex(t))}},{key:"bytesToLetters",value:function(t){var n=[];return t.forEach(function(s){return n.push(String.fromCharCode(s))}),n.join("")}},{key:"decToBinary",value:function(t){return(t>>>0).toString(2)}},{key:"getVarIntLength",value:function(t){for(var n=t[0],s=1;n>=128;)n=t[s],s++;return s}},{key:"readVarInt",value:function(t){var n=0;return t.forEach(function(s){var r=s;r&128?(n+=r&127,n<<=7):n+=r}),n}},{key:"atob",value:function(e){function t(n){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}(function(e){return typeof atob=="function"?atob(e):Buffer.from(e,"base64").toString("binary")})}]),i}(),Di=function(){function i(e,t){ht(this,i),this.enabled=!0,this.eventIndex=0,this.pointer=0,this.lastTick=0,this.lastStatus=null,this.index=e,this.data=t,this.delta=0,this.runningDelta=0,this.events=[];var n=this.data.subarray(this.data.length-3,this.data.length);if(!(n[0]===255&&n[1]===47&&n[2]===0))throw"Invalid MIDI file; Last three bytes of track "+this.index+"must be FF 2F 00 to mark end of track"}return mt(i,[{key:"reset",value:function(){return this.enabled=!0,this.eventIndex=0,this.pointer=0,this.lastTick=0,this.lastStatus=null,this.delta=0,this.runningDelta=0,this}},{key:"enable",value:function(){return this.enabled=!0,this}},{key:"disable",value:function(){return this.enabled=!1,this}},{key:"setEventIndexByTick",value:function(t){t=t||0;for(var n in this.events)if(this.events[n].tick>=t)return this.eventIndex=n,this}},{key:"getCurrentByte",value:function(){return this.data[this.pointer]}},{key:"getDeltaByteCount",value:function(){return R.getVarIntLength(this.data.subarray(this.pointer))}},{key:"getDelta",value:function(){return R.readVarInt(this.data.subarray(this.pointer,this.pointer+this.getDeltaByteCount()))}},{key:"handleEvent",value:function(t,n){if(n=n||!1,n){var s=t-this.lastTick,r=this.getDelta(),a=s>=r;if(this.pointer<this.data.length&&(n||a)){var o=this.parseEvent();if(this.enabled)return o}}else if(this.events[this.eventIndex]&&this.events[this.eventIndex].tick<=t&&(this.eventIndex++,this.enabled))return this.events[this.eventIndex-1];return null}},{key:"getStringData",value:function(t){var n=R.getVarIntLength(this.data.subarray(t+2)),s=R.readVarInt(this.data.subarray(t+2,t+2+n)),r=R.bytesToLetters(this.data.subarray(t+2+n,t+2+n+s));return r}},{key:"parseEvent",value:function(){var t=this.pointer+this.getDeltaByteCount(),n={},s=this.getDeltaByteCount();if(n.track=this.index+1,n.delta=this.getDelta(),this.lastTick=this.lastTick+n.delta,this.runningDelta+=n.delta,n.tick=this.runningDelta,n.byteIndex=this.pointer,this.data[t]==255){switch(this.data[t+1]){case 0:n.name="Sequence Number";break;case 1:n.name="Text Event",n.string=this.getStringData(t);break;case 2:n.name="Copyright Notice";break;case 3:n.name="Sequence/Track Name",n.string=this.getStringData(t);break;case 4:n.name="Instrument Name",n.string=this.getStringData(t);break;case 5:n.name="Lyric",n.string=this.getStringData(t);break;case 6:n.name="Marker";break;case 7:n.name="Cue Point",n.string=this.getStringData(t);break;case 9:n.name="Device Name",n.string=this.getStringData(t);break;case 32:n.name="MIDI Channel Prefix";break;case 33:n.name="MIDI Port",n.data=R.bytesToNumber([this.data[t+3]]);break;case 47:n.name="End of Track";break;case 81:n.name="Set Tempo",n.data=Math.round(6e7/R.bytesToNumber(this.data.subarray(t+3,t+6))),this.tempo=n.data;break;case 84:n.name="SMTPE Offset";break;case 88:n.name="Time Signature",n.data=this.data.subarray(t+3,t+7),n.timeSignature=""+n.data[0]+"/"+Math.pow(2,n.data[1]);break;case 89:n.name="Key Signature",n.data=this.data.subarray(t+3,t+5),n.data[0]>=0?n.keySignature=J.CIRCLE_OF_FIFTHS[n.data[0]]:n.data[0]<0&&(n.keySignature=J.CIRCLE_OF_FOURTHS[Math.abs(n.data[0])]),n.data[1]==0?n.keySignature+=" Major":n.data[1]==1&&(n.keySignature+=" Minor");break;case 127:n.name="Sequencer-Specific Meta-event";break;default:n.name="Unknown: "+this.data[t+1].toString(16);break}var r=R.getVarIntLength(this.data.subarray(t+2)),a=R.readVarInt(this.data.subarray(t+2,t+2+r));this.pointer+=s+3+a}else if(this.data[t]===240){n.name="Sysex";var o=R.getVarIntLength(this.data.subarray(t+1)),l=R.readVarInt(this.data.subarray(t+1,t+1+o));n.data=this.data.subarray(t+1+o,t+1+o+l),this.pointer+=s+1+o+l}else if(this.data[t]===247){n.name="Sysex (escape)";var u=R.getVarIntLength(this.data.subarray(t+1)),h=R.readVarInt(this.data.subarray(t+1,t+1+u));n.data=this.data.subarray(t+1+u,t+1+u+h),this.pointer+=s+1+u+h}else if(this.data[t]<128)if(n.running=!0,n.noteNumber=this.data[t],n.noteName=J.NOTES[this.data[t]],n.velocity=this.data[t+1],this.lastStatus<=143)n.name="Note off",n.channel=this.lastStatus-128+1,this.pointer+=s+2;else if(this.lastStatus<=159)n.name="Note on",n.channel=this.lastStatus-144+1,this.pointer+=s+2;else if(this.lastStatus<=175)n.name="Polyphonic Key Pressure",n.channel=this.lastStatus-160+1,n.note=J.NOTES[this.data[t+1]],n.pressure=event[1],this.pointer+=s+2;else if(this.lastStatus<=191)n.name="Controller Change",n.channel=this.lastStatus-176+1,n.number=this.data[t+1],n.value=this.data[t+2],this.pointer+=s+2;else if(this.lastStatus<=207)n.name="Program Change",n.channel=this.lastStatus-192+1,n.value=this.data[t+1],this.pointer+=s+1;else if(this.lastStatus<=223)n.name="Channel Key Pressure",n.channel=this.lastStatus-208+1,this.pointer+=s+1;else if(this.lastStatus<=239)n.name="Pitch Bend",n.channel=this.lastStatus-224+1,n.value=this.data[t+2],this.pointer+=s+2;else throw"Unknown event (running): ".concat(this.lastStatus);else if(this.lastStatus=this.data[t],this.data[t]<=143)n.name="Note off",n.channel=this.lastStatus-128+1,n.noteNumber=this.data[t+1],n.noteName=J.NOTES[this.data[t+1]],n.velocity=Math.round(this.data[t+2]/127*100),this.pointer+=s+3;else if(this.data[t]<=159)n.name="Note on",n.channel=this.lastStatus-144+1,n.noteNumber=this.data[t+1],n.noteName=J.NOTES[this.data[t+1]],n.velocity=Math.round(this.data[t+2]/127*100),this.pointer+=s+3;else if(this.data[t]<=175)n.name="Polyphonic Key Pressure",n.channel=this.lastStatus-160+1,n.note=J.NOTES[this.data[t+1]],n.pressure=event[2],this.pointer+=s+3;else if(this.data[t]<=191)n.name="Controller Change",n.channel=this.lastStatus-176+1,n.number=this.data[t+1],n.value=this.data[t+2],this.pointer+=s+3;else if(this.data[t]<=207)n.name="Program Change",n.channel=this.lastStatus-192+1,n.value=this.data[t+1],this.pointer+=s+2;else if(this.data[t]<=223)n.name="Channel Key Pressure",n.channel=this.lastStatus-208+1,this.pointer+=s+2;else if(this.data[t]<=239)n.name="Pitch Bend",n.channel=this.lastStatus-224+1,this.pointer+=s+3;else throw"Unknown event: ".concat(this.data[t]);return this.delta+=n.delta,this.events.push(n),n}},{key:"endOfTrack",value:function(){return this.data[this.pointer+1]==255&&this.data[this.pointer+2]==47&&this.data[this.pointer+3]==0}}]),i}();Uint8Array.prototype.forEach||Object.defineProperty(Uint8Array.prototype,"forEach",{value:Array.prototype.forEach});var xi=function(){function i(e,t){ht(this,i),this.sampleRate=5,this.startTime=0,this.buffer=t||null,this.midiChunksByteLength=null,this.division,this.format,this.setIntervalId=!1,this.tracks=[],this.instruments=[],this.defaultTempo=120,this.tempo=null,this.startTick=0,this.tick=0,this.lastTick=null,this.inLoop=!1,this.totalTicks=0,this.events=[],this.totalEvents=0,this.eventListeners={},typeof e=="function"&&this.on("midiEvent",e)}return mt(i,[{key:"loadFile",value:function(t){throw"loadFile is only supported on Node.js"}},{key:"loadArrayBuffer",value:function(t){return this.buffer=new Uint8Array(t),this.fileLoaded()}},{key:"loadDataUri",value:function(t){for(var n=R.atob(t.split(",")[1]),s=new Uint8Array(n.length),r=0;r<n.length;r++)s[r]=n.charCodeAt(r);return this.buffer=s,this.fileLoaded()}},{key:"getFilesize",value:function(){return this.buffer?this.buffer.length:0}},{key:"fileLoaded",value:function(){if(!this.validate())throw"Invalid MIDI file; should start with MThd";return this.setTempo(this.defaultTempo).getDivision().getFormat().getTracks().dryRun()}},{key:"validate",value:function(){return R.bytesToLetters(this.buffer.subarray(0,4))==="MThd"}},{key:"getFormat",value:function(){return this.format=R.bytesToNumber(this.buffer.subarray(8,10)),this}},{key:"getTracks",value:function(){this.tracks=[];for(var t=0;t<this.buffer.length;){if(R.bytesToLetters(this.buffer.subarray(t,t+4))=="MTrk"){var n=R.bytesToNumber(this.buffer.subarray(t+4,t+8));this.tracks.push(new Di(this.tracks.length,this.buffer.subarray(t+8,t+8+n)))}t+=R.bytesToNumber(this.buffer.subarray(t+4,t+8))+8}var s=0;return this.tracks.forEach(function(r){s+=8+r.data.length}),this.midiChunksByteLength=J.HEADER_CHUNK_LENGTH+s,this}},{key:"enableTrack",value:function(t){return this.tracks[t-1].enable(),this}},{key:"disableTrack",value:function(t){return this.tracks[t-1].disable(),this}},{key:"getDivision",value:function(){return this.division=R.bytesToNumber(this.buffer.subarray(12,J.HEADER_CHUNK_LENGTH)),this}},{key:"playLoop",value:function(t){this.inLoop||(this.inLoop=!0,this.tick=this.getCurrentTick(),this.tracks.forEach(function(n,s){if(!t&&this.endOfFile())this.triggerPlayerEvent("endOfFile"),this.stop();else{var r=n.handleEvent(this.tick,t);t&&r?(r.hasOwnProperty("name")&&r.name==="Set Tempo"&&(this.defaultTempo=r.data,this.setTempo(r.data)),r.hasOwnProperty("name")&&r.name==="Program Change"&&(this.instruments.includes(r.value)||this.instruments.push(r.value))):r&&(r.hasOwnProperty("name")&&r.name==="Set Tempo"&&(this.setTempo(r.data),this.isPlaying()&&this.pause().play()),this.emitEvent(r))}},this),t||this.triggerPlayerEvent("playing",{tick:this.tick}),this.inLoop=!1)}},{key:"setTempo",value:function(t){return this.tempo=t,this}},{key:"setStartTime",value:function(t){return this.startTime=t,this}},{key:"play",value:function(){if(this.isPlaying())throw"Already playing...";return this.startTime||(this.startTime=new Date().getTime()),this.setIntervalId=setInterval(this.playLoop.bind(this),this.sampleRate),this}},{key:"loop",value:function(){setTimeout((function(){this.playLoop(),this.loop()}).bind(this),this.sampleRate)}},{key:"pause",value:function(){return clearInterval(this.setIntervalId),this.setIntervalId=!1,this.startTick=this.tick,this.startTime=0,this}},{key:"stop",value:function(){return clearInterval(this.setIntervalId),this.setIntervalId=!1,this.startTick=0,this.startTime=0,this.resetTracks(),this}},{key:"skipToTick",value:function(t){return this.stop(),this.startTick=t,this.tracks.forEach(function(n){n.setEventIndexByTick(t)}),this}},{key:"skipToPercent",value:function(t){if(t<0||t>100)throw"Percent must be number between 1 and 100.";return this.skipToTick(Math.round(t/100*this.totalTicks)),this}},{key:"skipToSeconds",value:function(t){var n=this.getSongTime();if(t<0||t>n)throw t+" seconds not within song time of "+n;return this.skipToPercent(t/n*100),this}},{key:"isPlaying",value:function(){return this.setIntervalId>0||Ce(this.setIntervalId)==="object"}},{key:"dryRun",value:function(){for(this.resetTracks();!this.endOfFile();)this.playLoop(!0);return this.events=this.getEvents(),this.totalEvents=this.getTotalEvents(),this.totalTicks=this.getTotalTicks(),this.startTick=0,this.startTime=0,this.resetTracks(),this.triggerPlayerEvent("fileLoaded",this),this}},{key:"resetTracks",value:function(){return this.tracks.forEach(function(t){return t.reset()}),this}},{key:"getEvents",value:function(){return this.tracks.map(function(t){return t.events})}},{key:"getTotalTicks",value:function(){return Math.max.apply(null,this.tracks.map(function(t){return t.delta}))}},{key:"getTotalEvents",value:function(){return this.tracks.reduce(function(t,n){return{events:{length:t.events.length+n.events.length}}},{events:{length:0}}).events.length}},{key:"getSongTime",value:function(){return this.totalTicks/this.division/this.tempo*60}},{key:"getSongTimeRemaining",value:function(){return Math.round((this.totalTicks-this.getCurrentTick())/this.division/this.tempo*60)}},{key:"getSongPercentRemaining",value:function(){return Math.round(this.getSongTimeRemaining()/this.getSongTime()*100)}},{key:"bytesProcessed",value:function(){return J.HEADER_CHUNK_LENGTH+this.tracks.length*8+this.tracks.reduce(function(t,n){return{pointer:t.pointer+n.pointer}},{pointer:0}).pointer}},{key:"eventsPlayed",value:function(){return this.tracks.reduce(function(t,n){return{eventIndex:t.eventIndex+n.eventIndex}},{eventIndex:0}).eventIndex}},{key:"endOfFile",value:function(){return this.isPlaying()?this.totalTicks-this.tick<=0:this.bytesProcessed()>=this.midiChunksByteLength}},{key:"getCurrentTick",value:function(){return this.startTime?Math.round((new Date().getTime()-this.startTime)/1e3*(this.division*(this.tempo/60)))+this.startTick:this.startTick}},{key:"emitEvent",value:function(t){return this.triggerPlayerEvent("midiEvent",t),this}},{key:"on",value:function(t,n){return this.eventListeners.hasOwnProperty(t)||(this.eventListeners[t]=[]),this.eventListeners[t].push(n),this}},{key:"triggerPlayerEvent",value:function(t,n){return this.eventListeners.hasOwnProperty(t)&&this.eventListeners[t].forEach(function(s){return s(n||{})}),this}}]),i}(),Bi={Player:xi,Utils:R,Constants:J};const Te=/^[a-z0-9]+(-[a-z0-9]+)*$/,Ve=(i,e,t,n="")=>{const s=i.split(":");if(i.slice(0,1)==="@"){if(s.length<2||s.length>3)return null;n=s.shift().slice(1)}if(s.length>3||!s.length)return null;if(s.length>1){const o=s.pop(),l=s.pop(),u={provider:s.length>0?s[0]:n,prefix:l,name:o};return e&&!Ne(u)?null:u}const r=s[0],a=r.split("-");if(a.length>1){const o={provider:n,prefix:a.shift(),name:a.join("-")};return e&&!Ne(o)?null:o}if(t&&n===""){const o={provider:n,prefix:"",name:r};return e&&!Ne(o,t)?null:o}return null},Ne=(i,e)=>i?!!((i.provider===""||i.provider.match(Te))&&(e&&i.prefix===""||i.prefix.match(Te))&&i.name.match(Te)):!1,mn=Object.freeze({left:0,top:0,width:16,height:16}),Re=Object.freeze({rotate:0,vFlip:!1,hFlip:!1}),ze=Object.freeze({...mn,...Re}),Qe=Object.freeze({...ze,body:"",hidden:!1});function Fi(i,e){const t={};!i.hFlip!=!e.hFlip&&(t.hFlip=!0),!i.vFlip!=!e.vFlip&&(t.vFlip=!0);const n=((i.rotate||0)+(e.rotate||0))%4;return n&&(t.rotate=n),t}function Bt(i,e){const t=Fi(i,e);for(const n in Qe)n in Re?n in i&&!(n in t)&&(t[n]=Re[n]):n in e?t[n]=e[n]:n in i&&(t[n]=i[n]);return t}function Hi(i,e){const t=i.icons,n=i.aliases||Object.create(null),s=Object.create(null);function r(a){if(t[a])return s[a]=[];if(!(a in s)){s[a]=null;const o=n[a]&&n[a].parent,l=o&&r(o);l&&(s[a]=[o].concat(l))}return s[a]}return(e||Object.keys(t).concat(Object.keys(n))).forEach(r),s}function ji(i,e,t){const n=i.icons,s=i.aliases||Object.create(null);let r={};function a(o){r=Bt(n[o]||s[o],r)}return a(e),t.forEach(a),Bt(i,r)}function pn(i,e){const t=[];if(typeof i!="object"||typeof i.icons!="object")return t;i.not_found instanceof Array&&i.not_found.forEach(s=>{e(s,null),t.push(s)});const n=Hi(i);for(const s in n){const r=n[s];r&&(e(s,ji(i,s,r)),t.push(s))}return t}const Ri={provider:"",aliases:{},not_found:{},...mn};function Je(i,e){for(const t in e)if(t in i&&typeof i[t]!=typeof e[t])return!1;return!0}function gn(i){if(typeof i!="object"||i===null)return null;const e=i;if(typeof e.prefix!="string"||!i.icons||typeof i.icons!="object"||!Je(i,Ri))return null;const t=e.icons;for(const s in t){const r=t[s];if(!s.match(Te)||typeof r.body!="string"||!Je(r,Qe))return null}const n=e.aliases||Object.create(null);for(const s in n){const r=n[s],a=r.parent;if(!s.match(Te)||typeof a!="string"||!t[a]&&!n[a]||!Je(r,Qe))return null}return e}const Ft=Object.create(null);function Ui(i,e){return{provider:i,prefix:e,icons:Object.create(null),missing:new Set}}function fe(i,e){const t=Ft[i]||(Ft[i]=Object.create(null));return t[e]||(t[e]=Ui(i,e))}function pt(i,e){return gn(e)?pn(e,(t,n)=>{n?i.icons[t]=n:i.missing.add(t)}):[]}function Vi(i,e,t){try{if(typeof t.body=="string")return i.icons[e]={...t},!0}catch{}return!1}let we=!1;function bn(i){return typeof i=="boolean"&&(we=i),we}function zi(i){const e=typeof i=="string"?Ve(i,!0,we):i;if(e){const t=fe(e.provider,e.prefix),n=e.name;return t.icons[n]||(t.missing.has(n)?null:void 0)}}function Gi(i,e){const t=Ve(i,!0,we);if(!t)return!1;const n=fe(t.provider,t.prefix);return Vi(n,t.name,e)}function qi(i,e){if(typeof i!="object")return!1;if(typeof e!="string"&&(e=i.provider||""),we&&!e&&!i.prefix){let s=!1;return gn(i)&&(i.prefix="",pn(i,(r,a)=>{a&&Gi(r,a)&&(s=!0)})),s}const t=i.prefix;if(!Ne({provider:e,prefix:t,name:"a"}))return!1;const n=fe(e,t);return!!pt(n,i)}const vn=Object.freeze({width:null,height:null}),yn=Object.freeze({...vn,...Re}),Ki=/(-?[0-9.]*[0-9]+[0-9.]*)/g,Wi=/^-?[0-9.]*[0-9]+[0-9.]*$/g;function Ht(i,e,t){if(e===1)return i;if(t=t||100,typeof i=="number")return Math.ceil(i*e*t)/t;if(typeof i!="string")return i;const n=i.split(Ki);if(n===null||!n.length)return i;const s=[];let r=n.shift(),a=Wi.test(r);for(;;){if(a){const o=parseFloat(r);isNaN(o)?s.push(r):s.push(Math.ceil(o*e*t)/t)}else s.push(r);if(r=n.shift(),r===void 0)return s.join("");a=!a}}const Ji=i=>i==="unset"||i==="undefined"||i==="none";function Xi(i,e){const t={...ze,...i},n={...yn,...e},s={left:t.left,top:t.top,width:t.width,height:t.height};let r=t.body;[t,n].forEach(g=>{const T=[],_=g.hFlip,b=g.vFlip;let p=g.rotate;_?b?p+=2:(T.push("translate("+(s.width+s.left).toString()+" "+(0-s.top).toString()+")"),T.push("scale(-1 1)"),s.top=s.left=0):b&&(T.push("translate("+(0-s.left).toString()+" "+(s.height+s.top).toString()+")"),T.push("scale(1 -1)"),s.top=s.left=0);let c;switch(p<0&&(p-=Math.floor(p/4)*4),p=p%4,p){case 1:c=s.height/2+s.top,T.unshift("rotate(90 "+c.toString()+" "+c.toString()+")");break;case 2:T.unshift("rotate(180 "+(s.width/2+s.left).toString()+" "+(s.height/2+s.top).toString()+")");break;case 3:c=s.width/2+s.left,T.unshift("rotate(-90 "+c.toString()+" "+c.toString()+")");break}p%2===1&&(s.left!==s.top&&(c=s.left,s.left=s.top,s.top=c),s.width!==s.height&&(c=s.width,s.width=s.height,s.height=c)),T.length&&(r='<g transform="'+T.join(" ")+'">'+r+"</g>")});const a=n.width,o=n.height,l=s.width,u=s.height;let h,f;a===null?(f=o===null?"1em":o==="auto"?u:o,h=Ht(f,l/u)):(h=a==="auto"?l:a,f=o===null?Ht(h,u/l):o==="auto"?u:o);const d={},m=(g,T)=>{Ji(T)||(d[g]=T.toString())};return m("width",h),m("height",f),d.viewBox=s.left.toString()+" "+s.top.toString()+" "+l.toString()+" "+u.toString(),{attributes:d,body:r}}const Zi=/\sid="(\S+)"/g,Qi="IconifyId"+Date.now().toString(16)+(Math.random()*16777216|0).toString(16);let Yi=0;function $i(i,e=Qi){const t=[];let n;for(;n=Zi.exec(i);)t.push(n[1]);if(!t.length)return i;const s="suffix"+(Math.random()*16777216|Date.now()).toString(16);return t.forEach(r=>{const a=typeof e=="function"?e(r):e+(Yi++).toString(),o=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");i=i.replace(new RegExp('([#;"])('+o+')([")]|\\.[a-z])',"g"),"$1"+a+s+"$3")}),i=i.replace(new RegExp(s,"g"),""),i}const Ye=Object.create(null);function es(i,e){Ye[i]=e}function $e(i){return Ye[i]||Ye[""]}function gt(i){let e;if(typeof i.resources=="string")e=[i.resources];else if(e=i.resources,!(e instanceof Array)||!e.length)return null;return{resources:e,path:i.path||"/",maxURL:i.maxURL||500,rotate:i.rotate||750,timeout:i.timeout||5e3,random:i.random===!0,index:i.index||0,dataAfterTimeout:i.dataAfterTimeout!==!1}}const bt=Object.create(null),ve=["https://api.simplesvg.com","https://api.unisvg.com"],Me=[];for(;ve.length>0;)ve.length===1||Math.random()>.5?Me.push(ve.shift()):Me.push(ve.pop());bt[""]=gt({resources:["https://api.iconify.design"].concat(Me)});function ts(i,e){const t=gt(e);return t===null?!1:(bt[i]=t,!0)}function vt(i){return bt[i]}const ns=()=>{let i;try{if(i=fetch,typeof i=="function")return i}catch{}};let jt=ns();function is(i,e){const t=vt(i);if(!t)return 0;let n;if(!t.maxURL)n=0;else{let s=0;t.resources.forEach(a=>{s=Math.max(s,a.length)});const r=e+".json?icons=";n=t.maxURL-s-t.path.length-r.length}return n}function ss(i){return i===404}const rs=(i,e,t)=>{const n=[],s=is(i,e),r="icons";let a={type:r,provider:i,prefix:e,icons:[]},o=0;return t.forEach((l,u)=>{o+=l.length+1,o>=s&&u>0&&(n.push(a),a={type:r,provider:i,prefix:e,icons:[]},o=l.length),a.icons.push(l)}),n.push(a),n};function as(i){if(typeof i=="string"){const e=vt(i);if(e)return e.path}return"/"}const os=(i,e,t)=>{if(!jt){t("abort",424);return}let n=as(e.provider);switch(e.type){case"icons":{const r=e.prefix,o=e.icons.join(","),l=new URLSearchParams({icons:o});n+=r+".json?"+l.toString();break}case"custom":{const r=e.uri;n+=r.slice(0,1)==="/"?r.slice(1):r;break}default:t("abort",400);return}let s=503;jt(i+n).then(r=>{const a=r.status;if(a!==200){setTimeout(()=>{t(ss(a)?"abort":"next",a)});return}return s=501,r.json()}).then(r=>{if(typeof r!="object"||r===null){setTimeout(()=>{r===404?t("abort",r):t("next",s)});return}setTimeout(()=>{t("success",r)})}).catch(()=>{t("next",s)})},ls={prepare:rs,send:os};function us(i){const e={loaded:[],missing:[],pending:[]},t=Object.create(null);i.sort((s,r)=>s.provider!==r.provider?s.provider.localeCompare(r.provider):s.prefix!==r.prefix?s.prefix.localeCompare(r.prefix):s.name.localeCompare(r.name));let n={provider:"",prefix:"",name:""};return i.forEach(s=>{if(n.name===s.name&&n.prefix===s.prefix&&n.provider===s.provider)return;n=s;const r=s.provider,a=s.prefix,o=s.name,l=t[r]||(t[r]=Object.create(null)),u=l[a]||(l[a]=fe(r,a));let h;o in u.icons?h=e.loaded:a===""||u.missing.has(o)?h=e.missing:h=e.pending;const f={provider:r,prefix:a,name:o};h.push(f)}),e}function _n(i,e){i.forEach(t=>{const n=t.loaderCallbacks;n&&(t.loaderCallbacks=n.filter(s=>s.id!==e))})}function cs(i){i.pendingCallbacksFlag||(i.pendingCallbacksFlag=!0,setTimeout(()=>{i.pendingCallbacksFlag=!1;const e=i.loaderCallbacks?i.loaderCallbacks.slice(0):[];if(!e.length)return;let t=!1;const n=i.provider,s=i.prefix;e.forEach(r=>{const a=r.icons,o=a.pending.length;a.pending=a.pending.filter(l=>{if(l.prefix!==s)return!0;const u=l.name;if(i.icons[u])a.loaded.push({provider:n,prefix:s,name:u});else if(i.missing.has(u))a.missing.push({provider:n,prefix:s,name:u});else return t=!0,!0;return!1}),a.pending.length!==o&&(t||_n([i],r.id),r.callback(a.loaded.slice(0),a.missing.slice(0),a.pending.slice(0),r.abort))})}))}let fs=0;function ds(i,e,t){const n=fs++,s=_n.bind(null,t,n);if(!e.pending.length)return s;const r={id:n,icons:e,callback:i,abort:s};return t.forEach(a=>{(a.loaderCallbacks||(a.loaderCallbacks=[])).push(r)}),s}function hs(i,e=!0,t=!1){const n=[];return i.forEach(s=>{const r=typeof s=="string"?Ve(s,e,t):s;r&&n.push(r)}),n}var ms={resources:[],index:0,timeout:2e3,rotate:750,random:!1,dataAfterTimeout:!1};function ps(i,e,t,n){const s=i.resources.length,r=i.random?Math.floor(Math.random()*s):i.index;let a;if(i.random){let k=i.resources.slice(0);for(a=[];k.length>1;){const B=Math.floor(Math.random()*k.length);a.push(k[B]),k=k.slice(0,B).concat(k.slice(B+1))}a=a.concat(k)}else a=i.resources.slice(r).concat(i.resources.slice(0,r));const o=Date.now();let l="pending",u=0,h,f=null,d=[],m=[];typeof n=="function"&&m.push(n);function g(){f&&(clearTimeout(f),f=null)}function T(){l==="pending"&&(l="aborted"),g(),d.forEach(k=>{k.status==="pending"&&(k.status="aborted")}),d=[]}function _(k,B){B&&(m=[]),typeof k=="function"&&m.push(k)}function b(){return{startTime:o,payload:e,status:l,queriesSent:u,queriesPending:d.length,subscribe:_,abort:T}}function p(){l="failed",m.forEach(k=>{k(void 0,h)})}function c(){d.forEach(k=>{k.status==="pending"&&(k.status="aborted")}),d=[]}function y(k,B,S){const F=B!=="success";switch(d=d.filter(I=>I!==k),l){case"pending":break;case"failed":if(F||!i.dataAfterTimeout)return;break;default:return}if(B==="abort"){h=S,p();return}if(F){h=S,d.length||(a.length?C():p());return}if(g(),c(),!i.random){const I=i.resources.indexOf(k.resource);I!==-1&&I!==i.index&&(i.index=I)}l="completed",m.forEach(I=>{I(S)})}function C(){if(l!=="pending")return;g();const k=a.shift();if(k===void 0){if(d.length){f=setTimeout(()=>{g(),l==="pending"&&(c(),p())},i.timeout);return}p();return}const B={status:"pending",resource:k,callback:(S,F)=>{y(B,S,F)}};d.push(B),u++,f=setTimeout(C,i.rotate),t(k,e,B.callback)}return setTimeout(C),b}function kn(i){const e={...ms,...i};let t=[];function n(){t=t.filter(o=>o().status==="pending")}function s(o,l,u){const h=ps(e,o,l,(f,d)=>{n(),u&&u(f,d)});return t.push(h),h}function r(o){return t.find(l=>o(l))||null}return{query:s,find:r,setIndex:o=>{e.index=o},getIndex:()=>e.index,cleanup:n}}function Rt(){}const Xe=Object.create(null);function gs(i){if(!Xe[i]){const e=vt(i);if(!e)return;const t=kn(e),n={config:e,redundancy:t};Xe[i]=n}return Xe[i]}function bs(i,e,t){let n,s;if(typeof i=="string"){const r=$e(i);if(!r)return t(void 0,424),Rt;s=r.send;const a=gs(i);a&&(n=a.redundancy)}else{const r=gt(i);if(r){n=kn(r);const a=i.resources?i.resources[0]:"",o=$e(a);o&&(s=o.send)}}return!n||!s?(t(void 0,424),Rt):n.query(e,s,t)().abort}const Ut="iconify2",Ee="iconify",Tn=Ee+"-count",Vt=Ee+"-version",wn=36e5,vs=168;function et(i,e){try{return i.getItem(e)}catch{}}function yt(i,e,t){try{return i.setItem(e,t),!0}catch{}}function zt(i,e){try{i.removeItem(e)}catch{}}function tt(i,e){return yt(i,Tn,e.toString())}function nt(i){return parseInt(et(i,Tn))||0}const Ge={local:!0,session:!0},En={local:new Set,session:new Set};let _t=!1;function ys(i){_t=i}let Ae=typeof window>"u"?{}:window;function In(i){const e=i+"Storage";try{if(Ae&&Ae[e]&&typeof Ae[e].length=="number")return Ae[e]}catch{}Ge[i]=!1}function Sn(i,e){const t=In(i);if(!t)return;const n=et(t,Vt);if(n!==Ut){if(n){const o=nt(t);for(let l=0;l<o;l++)zt(t,Ee+l.toString())}yt(t,Vt,Ut),tt(t,0);return}const s=Math.floor(Date.now()/wn)-vs,r=o=>{const l=Ee+o.toString(),u=et(t,l);if(typeof u=="string"){try{const h=JSON.parse(u);if(typeof h=="object"&&typeof h.cached=="number"&&h.cached>s&&typeof h.provider=="string"&&typeof h.data=="object"&&typeof h.data.prefix=="string"&&e(h,o))return!0}catch{}zt(t,l)}};let a=nt(t);for(let o=a-1;o>=0;o--)r(o)||(o===a-1?(a--,tt(t,a)):En[i].add(o))}function An(){if(!_t){ys(!0);for(const i in Ge)Sn(i,e=>{const t=e.data,n=e.provider,s=t.prefix,r=fe(n,s);if(!pt(r,t).length)return!1;const a=t.lastModified||-1;return r.lastModifiedCached=r.lastModifiedCached?Math.min(r.lastModifiedCached,a):a,!0})}}function _s(i,e){const t=i.lastModifiedCached;if(t&&t>=e)return t===e;if(i.lastModifiedCached=e,t)for(const n in Ge)Sn(n,s=>{const r=s.data;return s.provider!==i.provider||r.prefix!==i.prefix||r.lastModified===e});return!0}function ks(i,e){_t||An();function t(n){let s;if(!Ge[n]||!(s=In(n)))return;const r=En[n];let a;if(r.size)r.delete(a=Array.from(r).shift());else if(a=nt(s),!tt(s,a+1))return;const o={cached:Math.floor(Date.now()/wn),provider:i.provider,data:e};return yt(s,Ee+a.toString(),JSON.stringify(o))}e.lastModified&&!_s(i,e.lastModified)||Object.keys(e.icons).length&&(e.not_found&&(e=Object.assign({},e),delete e.not_found),t("local")||t("session"))}function Gt(){}function Ts(i){i.iconsLoaderFlag||(i.iconsLoaderFlag=!0,setTimeout(()=>{i.iconsLoaderFlag=!1,cs(i)}))}function ws(i,e){i.iconsToLoad?i.iconsToLoad=i.iconsToLoad.concat(e).sort():i.iconsToLoad=e,i.iconsQueueFlag||(i.iconsQueueFlag=!0,setTimeout(()=>{i.iconsQueueFlag=!1;const{provider:t,prefix:n}=i,s=i.iconsToLoad;delete i.iconsToLoad;let r;if(!s||!(r=$e(t)))return;r.prepare(t,n,s).forEach(o=>{bs(t,o,l=>{if(typeof l!="object")o.icons.forEach(u=>{i.missing.add(u)});else try{const u=pt(i,l);if(!u.length)return;const h=i.pendingIcons;h&&u.forEach(f=>{h.delete(f)}),ks(i,l)}catch(u){console.error(u)}Ts(i)})})}))}const Es=(i,e)=>{const t=hs(i,!0,bn()),n=us(t);if(!n.pending.length){let l=!0;return e&&setTimeout(()=>{l&&e(n.loaded,n.missing,n.pending,Gt)}),()=>{l=!1}}const s=Object.create(null),r=[];let a,o;return n.pending.forEach(l=>{const{provider:u,prefix:h}=l;if(h===o&&u===a)return;a=u,o=h,r.push(fe(u,h));const f=s[u]||(s[u]=Object.create(null));f[h]||(f[h]=[])}),n.pending.forEach(l=>{const{provider:u,prefix:h,name:f}=l,d=fe(u,h),m=d.pendingIcons||(d.pendingIcons=new Set);m.has(f)||(m.add(f),s[u][h].push(f))}),r.forEach(l=>{const{provider:u,prefix:h}=l;s[u][h].length&&ws(l,s[u][h])}),e?ds(e,n,r):Gt};function Is(i,e){const t={...i};for(const n in e){const s=e[n],r=typeof s;n in vn?(s===null||s&&(r==="string"||r==="number"))&&(t[n]=s):r===typeof t[n]&&(t[n]=n==="rotate"?s%4:s)}return t}const Ss=/[\s,]+/;function As(i,e){e.split(Ss).forEach(t=>{switch(t.trim()){case"horizontal":i.hFlip=!0;break;case"vertical":i.vFlip=!0;break}})}function Ps(i,e=0){const t=i.replace(/^-?[0-9.]*/,"");function n(s){for(;s<0;)s+=4;return s%4}if(t===""){const s=parseInt(i);return isNaN(s)?0:n(s)}else if(t!==i){let s=0;switch(t){case"%":s=25;break;case"deg":s=90}if(s){let r=parseFloat(i.slice(0,i.length-t.length));return isNaN(r)?0:(r=r/s,r%1===0?n(r):0)}}return e}function Cs(i,e){let t=i.indexOf("xlink:")===-1?"":' xmlns:xlink="http://www.w3.org/1999/xlink"';for(const n in e)t+=" "+n+'="'+e[n]+'"';return'<svg xmlns="http://www.w3.org/2000/svg"'+t+">"+i+"</svg>"}function Ns(i){return i.replace(/"/g,"'").replace(/%/g,"%25").replace(/#/g,"%23").replace(/</g,"%3C").replace(/>/g,"%3E").replace(/\s+/g," ")}function Ms(i){return"data:image/svg+xml,"+Ns(i)}function Ls(i){return'url("'+Ms(i)+'")'}const qt={...yn,inline:!1},Os={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink","aria-hidden":!0,role:"img"},Ds={display:"inline-block"},it={"background-color":"currentColor"},Pn={"background-color":"transparent"},Kt={image:"var(--svg)",repeat:"no-repeat",size:"100% 100%"},Wt={"-webkit-mask":it,mask:it,background:Pn};for(const i in Wt){const e=Wt[i];for(const t in Kt)e[i+"-"+t]=Kt[t]}function xs(i){return i+(i.match(/^[-0-9.]+$/)?"px":"")}function Bs(i,e){const t=Is(qt,e),n=e.mode||"svg",s=n==="svg"?{...Os}:{};i.body.indexOf("xlink:")===-1&&delete s["xmlns:xlink"];let r=typeof e.style=="string"?e.style:"";for(let b in e){const p=e[b];if(p!==void 0)switch(b){case"icon":case"style":case"onLoad":case"mode":break;case"inline":case"hFlip":case"vFlip":t[b]=p===!0||p==="true"||p===1;break;case"flip":typeof p=="string"&&As(t,p);break;case"color":r=r+(r.length>0&&r.trim().slice(-1)!==";"?";":"")+"color: "+p+"; ";break;case"rotate":typeof p=="string"?t[b]=Ps(p):typeof p=="number"&&(t[b]=p);break;case"ariaHidden":case"aria-hidden":p!==!0&&p!=="true"&&delete s["aria-hidden"];break;default:if(b.slice(0,3)==="on:")break;qt[b]===void 0&&(s[b]=p)}}const a=Xi(i,t),o=a.attributes;if(t.inline&&(r="vertical-align: -0.125em; "+r),n==="svg"){Object.assign(s,o),r!==""&&(s.style=r);let b=0,p=e.id;return typeof p=="string"&&(p=p.replace(/-/g,"_")),{svg:!0,attributes:s,body:$i(a.body,p?()=>p+"ID"+b++:"iconifySvelte")}}const{body:l,width:u,height:h}=i,f=n==="mask"||(n==="bg"?!1:l.indexOf("currentColor")!==-1),d=Cs(l,{...o,width:u+"",height:h+""}),g={"--svg":Ls(d)},T=b=>{const p=o[b];p&&(g[b]=xs(p))};T("width"),T("height"),Object.assign(g,Ds,f?it:Pn);let _="";for(const b in g)_+=b+": "+g[b]+";";return s.style=_+r,{svg:!1,attributes:s}}bn(!0);es("",ls);if(typeof document<"u"&&typeof window<"u"){An();const i=window;if(i.IconifyPreload!==void 0){const e=i.IconifyPreload,t="Invalid IconifyPreload syntax.";typeof e=="object"&&e!==null&&(e instanceof Array?e:[e]).forEach(n=>{try{(typeof n!="object"||n===null||n instanceof Array||typeof n.icons!="object"||typeof n.prefix!="string"||!qi(n))&&console.error(t)}catch{console.error(t)}})}if(i.IconifyProviders!==void 0){const e=i.IconifyProviders;if(typeof e=="object"&&e!==null)for(let t in e){const n="IconifyProviders["+t+"] is invalid.";try{const s=e[t];if(typeof s!="object"||!s||s.resources===void 0)continue;ts(t,s)||console.error(n)}catch{console.error(n)}}}}function Fs(i,e,t,n,s){function r(){e.loading&&(e.loading.abort(),e.loading=null)}if(typeof i=="object"&&i!==null&&typeof i.body=="string")return e.name="",r(),{data:{...ze,...i}};let a;if(typeof i!="string"||(a=Ve(i,!1,!0))===null)return r(),null;const o=zi(a);if(!o)return t&&(!e.loading||e.loading.name!==i)&&(r(),e.name="",e.loading={name:i,abort:Es([a],n)}),null;r(),e.name!==i&&(e.name=i,s&&!e.destroyed&&s(i));const l=["iconify"];return a.prefix!==""&&l.push("iconify--"+a.prefix),a.provider!==""&&l.push("iconify--"+a.provider),{data:o,classes:l}}function Hs(i,e){return i?Bs({...ze,...i},e):null}function Jt(i){let e;function t(r,a){return r[0].svg?Rs:js}let n=t(i),s=n(i);return{c(){s.c(),e=q()},l(r){s.l(r),e=q()},m(r,a){s.m(r,a),E(r,e,a)},p(r,a){n===(n=t(r))&&s?s.p(r,a):(s.d(1),s=n(r),s&&(s.c(),s.m(e.parentNode,e)))},d(r){s.d(r),r&&v(e)}}}function js(i){let e,t=[i[0].attributes],n={};for(let s=0;s<t.length;s+=1)n=ie(n,t[s]);return{c(){e=N("span"),this.h()},l(s){e=M(s,"SPAN",{}),O(e).forEach(v),this.h()},h(){pe(e,n)},m(s,r){E(s,e,r)},p(s,r){pe(e,n=Ue(t,[r&1&&s[0].attributes]))},d(s){s&&v(e)}}}function Rs(i){let e,t=i[0].body+"",n=[i[0].attributes],s={};for(let r=0;r<n.length;r+=1)s=ie(s,n[r]);return{c(){e=qn("svg"),this.h()},l(r){e=Kn(r,"svg",{});var a=O(e);a.forEach(v),this.h()},h(){wt(e,s)},m(r,a){E(r,e,a),e.innerHTML=t},p(r,a){a&1&&t!==(t=r[0].body+"")&&(e.innerHTML=t),wt(e,s=Ue(n,[a&1&&r[0].attributes]))},d(r){r&&v(e)}}}function Us(i){let e,t=i[0]&&Jt(i);return{c(){t&&t.c(),e=q()},l(n){t&&t.l(n),e=q()},m(n,s){t&&t.m(n,s),E(n,e,s)},p(n,[s]){n[0]?t?t.p(n,s):(t=Jt(n),t.c(),t.m(e.parentNode,e)):t&&(t.d(1),t=null)},i:V,o:V,d(n){t&&t.d(n),n&&v(e)}}}function Vs(i,e,t){const n={name:"",loading:null,destroyed:!1};let s=!1,r=0,a;const o=u=>{typeof e.onLoad=="function"&&e.onLoad(u),ft()("load",{icon:u})};function l(){t(3,r++,r)}return dt(()=>{t(2,s=!0)}),Gn(()=>{t(1,n.destroyed=!0,n),n.loading&&(n.loading.abort(),t(1,n.loading=null,n))}),i.$$set=u=>{t(6,e=ie(ie({},e),ge(u)))},i.$$.update=()=>{{const u=Fs(e.icon,n,s,l,o);t(0,a=u?Hs(u.data,e):null),a&&u.classes&&t(0,a.attributes.class=(typeof e.class=="string"?e.class+" ":"")+u.classes.join(" "),a)}},e=ge(e),[a,n,s,r]}class Xt extends se{constructor(e){super(),re(this,e,Vs,Us,ae,{})}}var zs=Object.defineProperty,Zt=Object.getOwnPropertySymbols,Gs=Object.prototype.hasOwnProperty,qs=Object.prototype.propertyIsEnumerable,Qt=(i,e,t)=>e in i?zs(i,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):i[e]=t,Ks=(i,e)=>{for(var t in e||(e={}))Gs.call(e,t)&&Qt(i,t,e[t]);if(Zt)for(var t of Zt(e))qs.call(e,t)&&Qt(i,t,e[t]);return i},Cn=(i,e,t)=>{if(!e.has(i))throw TypeError("Cannot "+t)},x=(i,e,t)=>(Cn(i,e,"read from private field"),t?t.call(i):e.get(i)),ne=(i,e,t)=>{if(e.has(i))throw TypeError("Cannot add the same private member more than once");e instanceof WeakSet?e.add(i):e.set(i,t)},W=(i,e,t,n)=>(Cn(i,e,"write to private field"),n?n.call(i,t):e.set(i,t),t),be=(i,e,t)=>new Promise((n,s)=>{var r=l=>{try{o(t.next(l))}catch(u){s(u)}},a=l=>{try{o(t.throw(l))}catch(u){s(u)}},o=l=>l.done?n(l.value):Promise.resolve(l.value).then(r,a);o((t=t.apply(i,e)).next())});function Ws(i,e,t){return be(this,null,function*(){e=e.replace(/#/g,"%23").replace(/([^:]\/)\/+/g,"$1");const n=yield t.fetch(e);if(n.status!==200){console.warn("Error loading buffer. Invalid status: ",n.status,e);return}try{const s=yield n.arrayBuffer();return yield i.decodeAudioData(s)}catch(s){console.warn("Error loading buffer",s,e)}})}function Js(i){if(typeof document>"u")return null;const e=document.createElement("audio");for(let t=0;t<i.length;t++){const n=i[t],s=e.canPlayType(`audio/${n}`);if(s==="probably"||s==="maybe")return n;if(n==="m4a"){const r=e.canPlayType("audio/aac");if(r==="probably"||r==="maybe")return n}}return null}var Nn={fetch(i){return fetch(i)}};function Le(i){const e=i.filter(t=>!!t);return e.reduce((t,n)=>{const s="output"in t?t.output:t,r="input"in n?n.input:n;return s.connect(r),n}),()=>{e.reduce((t,n)=>{const s="output"in t?t.output:t,r="input"in n?n.input:n;return s.disconnect(r),n})}}function Xs(i){const t=/^([a-gA-G]?)(#{1,}|b{1,}|)(-?\d+)$/.exec(i);if(!t)return;const n=t[1].toUpperCase();if(!n)return;const s=t[2],r=s[0]==="b"?-s.length:s.length,a=t[3]?+t[3]:4,o=(n.charCodeAt(0)+3)%7;return[0,2,4,5,7,9,11][o]+r+12*(a+1)}function Mn(i){return i===void 0?void 0:typeof i=="number"?i:Xs(i)}function st(i){return i*i/16129}function Zs(i,e){let t=0;for(;e[i+t]===void 0&&t<128;)t>0?t=-t:t=-t+1;return t===127?[i,0]:[i+t,-t*100]}function Qs(i){let e=i;const t=new Set;function n(a){return t.add(a),a(e),()=>{t.delete(a)}}function s(a){e=a,t.forEach(o=>o(e))}function r(){return e}return{subscribe:n,set:s,get:r}}function Ys(){const i=new Set;function e(n){return i.add(n),()=>{i.delete(n)}}function t(n){i.forEach(s=>s(n))}return{subscribe:e,trigger:t}}function $s(i){let e=!1;return()=>{e||(e=!0,i.forEach(t=>t==null?void 0:t()))}}var ue,le,de,he,Oe,ye,er=class{constructor(i,e){this.context=i,ne(this,ue,void 0),ne(this,le,void 0),ne(this,de,void 0),ne(this,he,void 0),ne(this,Oe,void 0),ne(this,ye,void 0);var t,n;W(this,ye,Object.freeze(Ks({destination:i.destination,volume:100,volumeToGain:st},e))),this.input=new GainNode(this.context),W(this,ue,new GainNode(this.context)),W(this,he,Le([this.input,x(this,ue),x(this,ye).destination]));const s=Qs((t=e.volume)!=null?t:100);this.setVolume=s.set;const r=(n=e.volumeToGain)!=null?n:st;W(this,Oe,s.subscribe(a=>{x(this,ue).gain.value=r(a)}))}addInsert(i){var e;(e=x(this,de))!=null||W(this,de,[]),x(this,de).push(i),x(this,he).call(this),W(this,he,Le([this.input,...x(this,de),x(this,ue),x(this,ye).destination]))}addEffect(i,e,t){var n;const s=new GainNode(this.context);s.gain.value=t;const r="input"in e?e.input:e,a=Le([x(this,ue),s,r]);(n=x(this,le))!=null||W(this,le,[]),x(this,le).push({name:i,mix:s,disconnect:a})}sendEffect(i,e){var t;const n=(t=x(this,le))==null?void 0:t.find(s=>s.name===i);n?n.mix.gain.value=e:console.warn("Send bus not found: "+i)}disconnect(){var i;x(this,he).call(this),x(this,Oe).call(this),(i=x(this,le))==null||i.forEach(e=>e.disconnect()),W(this,le,void 0)}};ue=new WeakMap;le=new WeakMap;de=new WeakMap;he=new WeakMap;Oe=new WeakMap;ye=new WeakMap;function tr(i){var e,t,n;const s=i.destination.context,r=s.createBufferSource();r.buffer=i.buffer,r.detune.value=(e=i==null?void 0:i.detune)!=null?e:0;const a=i.lpfCutoffHz?new BiquadFilterNode(s,{type:"lowpass",frequency:i.lpfCutoffHz}):void 0,o=s.createGain();o.gain.value=(t=i==null?void 0:i.gain)!=null?t:1;const[l,u]=nr(s,i.decayTime),h=$s([Le([r,a,o,l,i.destination]),(n=i.stop)==null?void 0:n.call(i,m=>{(m===void 0||m.stopId===void 0||m.stopId===i.stopId)&&d(m==null?void 0:m.time)})]);r.onended=()=>{var m;h(),(m=i.onEnded)==null||m.call(i)};const f=i.time||s.currentTime;r.start(f);function d(m){if(m??(m=s.currentTime),m<=f)r.stop(m);else{const g=u(m);r.stop(g)}}return i.duration!==void 0&&d(f+i.duration),d}function nr(i,e=.2){let t=0;const n=new GainNode(i,{gain:1});function s(r){if(t)return t;n.gain.cancelScheduledValues(r);const a=r||i.currentTime;return t=a+e,n.gain.setValueAtTime(1,a),n.gain.linearRampToValueAtTime(0,t),t}return[n,s]}var K,_e,De,ke,ir=class{constructor(i,e={}){this.context=i,ne(this,K,void 0),ne(this,_e,void 0),ne(this,De,void 0),ne(this,ke,void 0);var t,n,s,r,a,o,l;W(this,K,{destination:(t=e.destination)!=null?t:i.destination,detune:0,volume:(n=e.volume)!=null?n:100,velocity:(s=e.velocity)!=null?s:100,buffers:(r=e.buffers)!=null?r:{},volumeToGain:(a=e.volumeToGain)!=null?a:st,noteToSample:(o=e.noteToSample)!=null?o:f=>[f.note.toString(),0]}),this.buffers={},W(this,_e,Ys());const u=(l=e.storage)!=null?l:Nn,h=typeof x(this,K).buffers=="function"?x(this,K).buffers:sr(x(this,K).buffers,u);W(this,De,h(i,this.buffers)),W(this,ke,new er(i,x(this,K))),this.output=x(this,ke)}loaded(){return be(this,null,function*(){return yield x(this,De),this})}start(i){var e,t,n;const s=typeof i=="object"?i:{note:i},[r,a]=x(this,K).noteToSample(s,this.buffers,x(this,K)),o=this.buffers[r];if(!o)return console.warn(`Sample not found: '${r}'`),()=>{};const l=s.onEnded;return tr({buffer:o,destination:x(this,ke).input,time:s.time,duration:s.duration,decayTime:s.decayTime,lpfCutoffHz:s.lpfCutoffHz,detune:a+((e=s.detune)!=null?e:x(this,K).detune),gain:x(this,K).volumeToGain((t=s.velocity)!=null?t:x(this,K).velocity),stop:x(this,_e).subscribe,stopId:(n=s.stopId)!=null?n:s.note,onEnded:l?()=>l(i):void 0})}stop(i){const e=typeof i=="object"?i:{stopId:i};x(this,_e).trigger(e)}};K=new WeakMap;_e=new WeakMap;De=new WeakMap;ke=new WeakMap;function sr(i,e){return(t,n)=>be(this,null,function*(){yield Promise.all([Object.keys(i).map(s=>be(this,null,function*(){const r=i[s];if(r instanceof AudioBuffer)n[s]=r;else if(typeof r=="string"){const a=yield Ws(t,r,e);a&&(n[s]=a)}}))])})}var rr=class extends ir{constructor(i,e){var t,n,s,r;const a=e.instrument.startsWith("http")?e.instrument:cr(e.instrument,(t=e.kit)!=null?t:"MusyngKite");super(i,{destination:e.destination,detune:e.detune,volume:e.volume,velocity:e.velocity,decayTime:(n=e.decayTime)!=null?n:.5,lpfCutoffHz:e.lpfCutoffHz,buffers:ar(a,(s=e.storage)!=null?s:Nn),noteToSample:(u,h,f)=>{let d=Mn(u.note);return d===void 0?["",0]:Zs(d,h)}});const o=(r=e.extraGain)!=null?r:5,l=new GainNode(i,{gain:o});this.output.addInsert(l)}};function ar(i,e){return(t,n)=>be(this,null,function*(){const s=yield(yield e.fetch(i)).text(),r=or(s),a=Object.keys(r);yield Promise.all(a.map(o=>be(this,null,function*(){const l=Mn(o);if(!l)return;const u=ur(lr(r[o])),h=yield t.decodeAudioData(u);n[l]=h})))})}function or(i){const e=i.indexOf("MIDI.Soundfont.");if(e<0)throw Error("Invalid MIDI.js Soundfont format");const t=i.indexOf("=",e)+2,n=i.lastIndexOf(",");return JSON.parse(i.slice(t,n)+"}")}function lr(i){return i.slice(i.indexOf(",")+1)}function ur(i){const e=window.atob(i),t=e.length,n=new Uint8Array(t);for(let s=0;s<t;s++)n[s]=e.charCodeAt(s);return n.buffer}function cr(i,e){var t;const n=(t=Js(["ogg","mp3"]))!=null?t:"mp3";return`https://gleitz.github.io/midi-js-soundfonts/${e}/${i}-${n}.js`}function fr(i,e,t){let n={};for(let l=1;l<i.length;l++)for(let u of i[l])if(u.name==="Note on"){let h=Math.round(u.tick/t/120*60*1e3);n[h]||(n[h]={tick:u.tick,milliseconds:h,trackIndex:l})}let s=[],r=Object.keys(e);for(let l of r)n[parseInt(l)]||s.push(parseInt(l));let a={},o;r=Object.keys(n);for(let l of s){for(let u=0;u<r.length;u++)parseInt(r[u])<l&&(o=n[r[u]],o.missingEvent=l,o.timerDelta=l-o.milliseconds,o.onNotes=e[l].on,o.offNotes=e[l].off);a[o.milliseconds]=o}return a}function Pe(i){let e=Math.floor(i/60),t=Math.floor(i-e*60);return e=e.toString().padStart(2,"0"),t=t.toString().padStart(2,"0"),`${e}:${t}`}function Yt(i,e,t){const n=i.slice();return n[21]=e[t],n[22]=e,n[23]=t,n}function dr(i){let e=Pe(i[1])+"",t,n,s,r,a,o,l=Pe(i[0])+"",u,h,f,d;function m(c){i[10](c)}function g(c){i[11](c)}let T={step:.5};i[1]!==void 0&&(T.value=i[1]),i[0]!==void 0&&(T.max=i[0]),s=new ni({props:T}),Be.push(()=>Fe(s,"value",m)),Be.push(()=>Fe(s,"max",g)),s.$on("click",function(){Wn(i[6](i[1]))&&i[6](i[1]).apply(this,arguments)});let _=i[3],b=[];for(let c=0;c<_.length;c+=1)b[c]=$t(Yt(i,_,c));const p=c=>L(b[c],1,1,()=>{b[c]=null});return{c(){t=z(e),n=H(),Q(s.$$.fragment),o=H(),u=z(l),h=H();for(let c=0;c<b.length;c+=1)b[c].c();f=q()},l(c){t=G(c,e),n=j(c),Y(s.$$.fragment,c),o=j(c),u=G(c,l),h=j(c);for(let y=0;y<b.length;y+=1)b[y].l(c);f=q()},m(c,y){E(c,t,y),E(c,n,y),$(s,c,y),E(c,o,y),E(c,u,y),E(c,h,y);for(let C=0;C<b.length;C+=1)b[C]&&b[C].m(c,y);E(c,f,y),d=!0},p(c,y){i=c,(!d||y&2)&&e!==(e=Pe(i[1])+"")&&ce(t,e);const C={};if(!r&&y&2&&(r=!0,C.value=i[1],He(()=>r=!1)),!a&&y&1&&(a=!0,C.max=i[0],He(()=>a=!1)),s.$set(C),(!d||y&1)&&l!==(l=Pe(i[0])+"")&&ce(u,l),y&136){_=i[3];let k;for(k=0;k<_.length;k+=1){const B=Yt(i,_,k);b[k]?(b[k].p(B,y),A(b[k],1)):(b[k]=$t(B),b[k].c(),A(b[k],1),b[k].m(f.parentNode,f))}for(X(),k=_.length;k<b.length;k+=1)p(k);Z()}},i(c){if(!d){A(s.$$.fragment,c);for(let y=0;y<_.length;y+=1)A(b[y]);d=!0}},o(c){L(s.$$.fragment,c),b=b.filter(Boolean);for(let y=0;y<b.length;y+=1)L(b[y]);d=!1},d(c){c&&v(t),c&&v(n),ee(s,c),c&&v(o),c&&v(u),c&&v(h),ct(b,c),c&&v(f)}}}function hr(i){let e,t;return e=new cn({}),{c(){Q(e.$$.fragment)},l(n){Y(e.$$.fragment,n)},m(n,s){$(e,n,s),t=!0},p:V,i(n){t||(A(e.$$.fragment,n),t=!0)},o(n){L(e.$$.fragment,n),t=!1},d(n){ee(e,n)}}}function $t(i){let e,t,n,s=i[21].name+"",r,a,o,l;function u(f){i[12](f,i[21])}let h={name:i[21].instrumentTrack+"-"+i[21].name};return i[21].playing!==void 0&&(h.checked=i[21].playing),a=new ui({props:h}),Be.push(()=>Fe(a,"checked",u)),a.$on("change",i[7]),{c(){e=N("br"),t=H(),n=N("span"),r=z(s),Q(a.$$.fragment)},l(f){e=M(f,"BR",{}),t=j(f),n=M(f,"SPAN",{});var d=O(n);r=G(d,s),d.forEach(v),Y(a.$$.fragment,f)},m(f,d){E(f,e,d),E(f,t,d),E(f,n,d),D(n,r),$(a,f,d),l=!0},p(f,d){i=f,(!l||d&8)&&s!==(s=i[21].name+"")&&ce(r,s);const m={};d&8&&(m.name=i[21].instrumentTrack+"-"+i[21].name),!o&&d&8&&(o=!0,m.checked=i[21].playing,He(()=>o=!1)),a.$set(m)},i(f){l||(A(a.$$.fragment,f),l=!0)},o(f){L(a.$$.fragment,f),l=!1},d(f){f&&v(e),f&&v(t),f&&v(n),ee(a,f)}}}function mr(i){let e,t,n,s,r,a,o,l,u,h,f,d;t=new Xt({props:{icon:"material-symbols:play-pause"}}),r=new Xt({props:{icon:"material-symbols:stop"}});const m=[hr,dr],g=[];function T(_,b){return _[2]?1:0}return l=T(i),u=g[l]=m[l](i),{c(){e=N("button"),Q(t.$$.fragment),n=H(),s=N("button"),Q(r.$$.fragment),a=H(),o=N("span"),u.c(),this.h()},l(_){e=M(_,"BUTTON",{id:!0});var b=O(e);Y(t.$$.fragment,b),b.forEach(v),n=j(_),s=M(_,"BUTTON",{id:!0});var p=O(s);Y(r.$$.fragment,p),p.forEach(v),a=j(_),o=M(_,"SPAN",{});var c=O(o);u.l(c),c.forEach(v),this.h()},h(){w(e,"id","playMIDI"),w(s,"id","stopMIDI")},m(_,b){E(_,e,b),$(t,e,null),E(_,n,b),E(_,s,b),$(r,s,null),E(_,a,b),E(_,o,b),g[l].m(o,null),h=!0,f||(d=[U(e,"click",i[4]),U(s,"click",i[5])],f=!0)},p(_,[b]){let p=l;l=T(_),l===p?g[l].p(_,b):(X(),L(g[p],1,1,()=>{g[p]=null}),Z(),u=g[l],u?u.p(_,b):(u=g[l]=m[l](_),u.c()),A(u,1),u.m(o,null))},i(_){h||(A(t.$$.fragment,_),A(r.$$.fragment,_),A(u),h=!0)},o(_){L(t.$$.fragment,_),L(r.$$.fragment,_),L(u),h=!1},d(_){_&&v(e),ee(t),_&&v(n),_&&v(s),ee(r),_&&v(a),_&&v(o),g[l].d(),f=!1,rt(d)}}}function pr(i,e,t){let{midiFile:n=void 0}=e,{timeMap:s=void 0}=e;const r=ft();let a,o,l=[],u=0,h=0,f=!1,d=[],m,g=[];const T=function(){a.isPlaying()?(a.pause(),b()):a.play()},_=function(){b(),o.suspend(),a.stop(),t(1,h=0),r("playStopped");for(let S of g)clearTimeout(S)},b=function(){for(let S=0;S<l.length;S++)l[S].stop()},p=function(S){o.resume();for(const I in d)d[I].playing||a.tracks[parseInt(I)+1].disable();let F=Math.round(S.tick/a.division/120*60*1e3);if(m[F]){let I=setTimeout(function(){r("noteOn",m[F].onNotes),r("noteOff",m[F].offNotes)},m[F].timerDelta);g.push(I)}try{S.name==="Note on"&&(r("noteOn",s[F].on),r("noteOff",s[F].off))}catch(I){console.log(I),console.log(F),console.log(s)}S.name=="Note on"&&S.velocity>0?l[S.track-2].start({note:S.noteName,velocity:S.velocity}):S.name=="Note on"&&S.velocity==0&&l[S.track-2].stop()},c=async function(){if(a.isPlaying()){b(),r("skipPlay");for(let S of g)clearTimeout(S);await a.stop(),await a.skipToSeconds(h),T()}else a.skipToSeconds(h)},y=function(){const S=this.name.split("-");d[parseInt(S[0])].playing?a.tracks[parseInt(S[0])+1].enable():(l[parseInt(S[0])].stop(),a.tracks[parseInt(S[0])+1].disable())};dt(async()=>{a=new Bi.Player(I=>p(I)),a.on("endOfFile",function(){r("playStopped")}),a.loadDataUri(n),t(0,u=a.getSongTime());try{o=new AudioContext}catch(I){console.log(I),o=""}let S=a.getEvents();console.log(a.division);const F={Superius:"violin",Contratenor:"viola",PrimusTenor:"cello",SecundusTenor:"flute",Bassus:"contrabass",default:"acoustic_grand_piano"};for(let I=1;I<S.length;I++){let oe="default";S[I][0].name==="Sequence/Track Name"&&Object.keys(F).includes(S[I][0].string)&&(oe=S[I][0].string);let qe=await new rr(o,{instrument:F[oe]}).loaded();l.push(qe),d.push({name:oe,instrumentTrack:I-1,chosenInstrument:F[oe],playing:!0})}setInterval(function(){a.isPlaying()&&t(1,h=u-a.getSongTimeRemaining())},1e3),m=fr(S,s,a.division),t(2,f=!0)});function C(S){h=S,t(1,h)}function k(S){u=S,t(0,u)}function B(S,F){i.$$.not_equal(F.playing,S)&&(F.playing=S,t(3,d))}return i.$$set=S=>{"midiFile"in S&&t(8,n=S.midiFile),"timeMap"in S&&t(9,s=S.timeMap)},[u,h,f,d,T,_,c,y,n,s,C,k,B]}class gr extends se{constructor(e){super(),re(this,e,pr,mr,ae,{midiFile:8,timeMap:9})}}function en(i){let e,t,n,s;return{c(){e=N("button"),t=z("<"),this.h()},l(r){e=M(r,"BUTTON",{type:!0,class:!0,"data-testid":!0});var a=O(e);t=G(a,"<"),a.forEach(v),this.h()},h(){w(e,"type","button"),w(e,"class","btn variant-filled"),w(e,"data-testid","btn-prev")},m(r,a){E(r,e,a),D(e,t),n||(s=U(e,"click",i[3]),n=!0)},p:V,d(r){r&&v(e),n=!1,s()}}}function br(i){let e=i[0][i[4]]+"",t,n;return{c(){t=z(e),n=z(";")},l(s){t=G(s,e),n=G(s,";")},m(s,r){E(s,t,r),E(s,n,r)},p(s,r){r&17&&e!==(e=s[0][s[4]]+"")&&ce(t,e)},d(s){s&&v(t),s&&v(n)}}}function vr(i){let e,t=i[0][i[4]]+"",n;return{c(){e=new ln(!1),n=q(),this.h()},l(s){e=un(s,!1),n=q(),this.h()},h(){e.a=n},m(s,r){e.m(t,s,r),E(s,n,r)},p(s,r){r&17&&t!==(t=s[0][s[4]]+"")&&e.p(t)},d(s){s&&v(n),s&&e.d()}}}function tn(i){let e,t,n,s;return{c(){e=N("button"),t=z(">"),this.h()},l(r){e=M(r,"BUTTON",{type:!0,class:!0,"data-testid":!0});var a=O(e);t=G(a,">"),a.forEach(v),this.h()},h(){w(e,"type","button"),w(e,"class","btn variant-filled"),w(e,"data-testid","btn-nxt")},m(r,a){E(r,e,a),D(e,t),n||(s=U(e,"click",i[2]),n=!0)},p:V,d(r){r&&v(e),n=!1,s()}}}function yr(i){let e,t,n,s,r,a,o=i[4]>0&&en(i);function l(d,m){return d[1]?vr:br}let u=l(i),h=u(i),f=i[4]<i[0].length-1&&tn(i);return{c(){e=N("div"),t=N("div"),o&&o.c(),n=H(),s=N("div"),h.c(),r=H(),a=N("div"),f&&f.c(),this.h()},l(d){e=M(d,"DIV",{id:!0,"data-testid":!0,class:!0});var m=O(e);t=M(m,"DIV",{class:!0});var g=O(t);o&&o.l(g),g.forEach(v),n=j(m),s=M(m,"DIV",{id:!0});var T=O(s);h.l(T),T.forEach(v),r=j(m),a=M(m,"DIV",{class:!0});var _=O(a);f&&f.l(_),_.forEach(v),m.forEach(v),this.h()},h(){w(t,"class","left svelte-1mkf375"),w(s,"id","content"),w(a,"class","right svelte-1mkf375"),w(e,"id","page"),w(e,"data-testid","paginator"),w(e,"class","svelte-1mkf375")},m(d,m){E(d,e,m),D(e,t),o&&o.m(t,null),D(e,n),D(e,s),h.m(s,null),D(e,r),D(e,a),f&&f.m(a,null)},p(d,[m]){d[4]>0?o?o.p(d,m):(o=en(d),o.c(),o.m(t,null)):o&&(o.d(1),o=null),u===(u=l(d))&&h?h.p(d,m):(h.d(1),h=u(d),h&&(h.c(),h.m(s,null))),d[4]<d[0].length-1?f?f.p(d,m):(f=tn(d),f.c(),f.m(a,null)):f&&(f.d(1),f=null)},i:V,o:V,d(d){d&&v(e),o&&o.d(),h.d(),f&&f.d()}}}function _r(i,e,t){let{data:n=void 0}=e,{raw:s=void 0}=e,r=0;function a(){t(4,r++,r)}function o(){t(4,r--,r)}function l(u){t(4,r=u)}return i.$$set=u=>{"data"in u&&t(0,n=u.data),"raw"in u&&t(1,s=u.raw)},[n,s,a,o,r,l]}class kr extends se{constructor(e){super(),re(this,e,_r,yr,ae,{data:0,raw:1,nextPage:2,prevPage:3,goToPage:5})}get nextPage(){return this.$$.ctx[2]}get prevPage(){return this.$$.ctx[3]}get goToPage(){return this.$$.ctx[5]}}function Tr(i){let e,t;return e=new gr({props:{midiFile:i[1],timeMap:i[2]}}),e.$on("noteOn",i[4]),e.$on("noteOff",i[5]),e.$on("playStopped",i[6]),e.$on("skipPlay",i[6]),{c(){Q(e.$$.fragment)},l(n){Y(e.$$.fragment,n)},m(n,s){$(e,n,s),t=!0},p(n,s){const r={};s&2&&(r.midiFile=n[1]),s&4&&(r.timeMap=n[2]),e.$set(r)},i(n){t||(A(e.$$.fragment,n),t=!0)},o(n){L(e.$$.fragment,n),t=!1},d(n){ee(e,n)}}}function wr(i){let e,t;return{c(){e=N("p"),t=z("Playback is not available"),this.h()},l(n){e=M(n,"P",{class:!0});var s=O(e);t=G(s,"Playback is not available"),s.forEach(v),this.h()},h(){w(e,"class","error")},m(n,s){E(n,e,s),D(e,t)},p:V,i:V,o:V,d(n){n&&v(e)}}}function Er(i){let e,t;return{c(){e=N("p"),t=z("Could not engrave the MEI file."),this.h()},l(n){e=M(n,"P",{class:!0});var s=O(e);t=G(s,"Could not engrave the MEI file."),s.forEach(v),this.h()},h(){w(e,"class","error")},m(n,s){E(n,e,s),D(e,t)},p:V,i:V,o:V,d(n){n&&v(e)}}}function Ir(i){let e,t=i[0][0]+"",n;return{c(){e=new ln(!1),n=q(),this.h()},l(s){e=un(s,!1),n=q(),this.h()},h(){e.a=n},m(s,r){e.m(t,s,r),E(s,n,r)},p(s,r){r&1&&t!==(t=s[0][0]+"")&&e.p(t)},i:V,o:V,d(s){s&&v(n),s&&e.d()}}}function Sr(i){let e,t,n;function s(a){i[7](a)}let r={data:i[0],raw:"true"};return i[3]!==void 0&&(r.goToPage=i[3]),e=new kr({props:r}),Be.push(()=>Fe(e,"goToPage",s)),{c(){Q(e.$$.fragment)},l(a){Y(e.$$.fragment,a)},m(a,o){$(e,a,o),n=!0},p(a,o){const l={};o&1&&(l.data=a[0]),!t&&o&8&&(t=!0,l.goToPage=a[3],He(()=>t=!1)),e.$set(l)},i(a){n||(A(e.$$.fragment,a),n=!0)},o(a){L(e.$$.fragment,a),n=!1},d(a){ee(e,a)}}}function Ar(i){let e,t,n,s,r,a,o;const l=[wr,Tr],u=[];function h(g,T){return!g[1]||!g[2]?0:1}e=h(i),t=u[e]=l[e](i);const f=[Sr,Ir,Er],d=[];function m(g,T){return g[0].length>1?0:g[0].length===1?1:g[0].length===0||!g[0]?2:-1}return~(r=m(i))&&(a=d[r]=f[r](i)),{c(){t.c(),n=H(),s=N("div"),a&&a.c(),this.h()},l(g){t.l(g),n=j(g),s=M(g,"DIV",{id:!0,"data-testid":!0});var T=O(s);a&&a.l(T),T.forEach(v),this.h()},h(){w(s,"id","MEI-container"),w(s,"data-testid","MEI-container")},m(g,T){u[e].m(g,T),E(g,n,T),E(g,s,T),~r&&d[r].m(s,null),o=!0},p(g,[T]){let _=e;e=h(g),e===_?u[e].p(g,T):(X(),L(u[_],1,1,()=>{u[_]=null}),Z(),t=u[e],t?t.p(g,T):(t=u[e]=l[e](g),t.c()),A(t,1),t.m(n.parentNode,n));let b=r;r=m(g),r===b?~r&&d[r].p(g,T):(a&&(X(),L(d[b],1,1,()=>{d[b]=null}),Z()),~r?(a=d[r],a?a.p(g,T):(a=d[r]=f[r](g),a.c()),A(a,1),a.m(s,null)):a=null)},i(g){o||(A(t),A(a),o=!0)},o(g){L(t),L(a),o=!1},d(g){u[e].d(g),g&&v(n),g&&v(s),~r&&d[r].d()}}}function Pr(i,e,t){let{meiSvg:n=void 0}=e,{meiMidi:s=void 0}=e,{timeMap:r=void 0}=e,a;const o=function(f){for(let d in f.detail){let m=document.getElementById(f.detail[d]);if(!m)for(let g in n)n[g].includes(`id="${f.detail[d]}"`)&&a(g);m&&m.classList.add("note-playing")}},l=function(f){for(let d in f.detail){let m=document.getElementById(f.detail[d]);m&&m.classList.remove("note-playing")}},u=function(f){const d=document.getElementsByClassName("note-playing");let m=[];for(let g of d)m.push(g.id);for(let g of m)document.getElementById(g).classList.remove("note-playing")};function h(f){a=f,t(3,a)}return i.$$set=f=>{"meiSvg"in f&&t(0,n=f.meiSvg),"meiMidi"in f&&t(1,s=f.meiMidi),"timeMap"in f&&t(2,r=f.timeMap)},[n,s,r,a,o,l,u,h]}class Cr extends se{constructor(e){super(),re(this,e,Pr,Ar,ae,{meiSvg:0,meiMidi:1,timeMap:2})}}function nn(i,e,t){const n=i.slice();return n[2]=e[t][0],n[3]=e[t][1],n}function sn(i){let e,t=i[2]+"",n,s,r,a;return r=new Jn({props:{content:i[3].content}}),{c(){e=N("h2"),n=z(t),s=H(),Q(r.$$.fragment)},l(o){e=M(o,"H2",{});var l=O(e);n=G(l,t),l.forEach(v),s=j(o),Y(r.$$.fragment,o)},m(o,l){E(o,e,l),D(e,n),E(o,s,l),$(r,o,l),a=!0},p(o,l){(!a||l&1)&&t!==(t=o[2]+"")&&ce(n,t);const u={};l&1&&(u.content=o[3].content),r.$set(u)},i(o){a||(A(r.$$.fragment,o),a=!0)},o(o){L(r.$$.fragment,o),a=!1},d(o){o&&v(e),o&&v(s),ee(r,o)}}}function rn(i){let e,t,n=i[3].type==="md"&&sn(i);return{c(){n&&n.c(),e=q()},l(s){n&&n.l(s),e=q()},m(s,r){n&&n.m(s,r),E(s,e,r),t=!0},p(s,r){s[3].type==="md"?n?(n.p(s,r),r&1&&A(n,1)):(n=sn(s),n.c(),A(n,1),n.m(e.parentNode,e)):n&&(X(),L(n,1,1,()=>{n=null}),Z())},i(s){t||(A(n),t=!0)},o(s){L(n),t=!1},d(s){n&&n.d(s),s&&v(e)}}}function Nr(i){let e,t,n,s,r,a,o,l,u,h;s=new Mi({props:{audioPath:i[1]}});let f="mei"in i[0].view&&an(i);return{c(){e=N("h3"),t=z("Binaural recording test"),n=H(),Q(s.$$.fragment),r=H(),a=N("h3"),o=z("MEI engraving and playback test"),l=H(),f&&f.c(),u=q()},l(d){e=M(d,"H3",{});var m=O(e);t=G(m,"Binaural recording test"),m.forEach(v),n=j(d),Y(s.$$.fragment,d),r=j(d),a=M(d,"H3",{});var g=O(a);o=G(g,"MEI engraving and playback test"),g.forEach(v),l=j(d),f&&f.l(d),u=q()},m(d,m){E(d,e,m),D(e,t),E(d,n,m),$(s,d,m),E(d,r,m),E(d,a,m),D(a,o),E(d,l,m),f&&f.m(d,m),E(d,u,m),h=!0},p(d,m){"mei"in d[0].view?f?(f.p(d,m),m&1&&A(f,1)):(f=an(d),f.c(),A(f,1),f.m(u.parentNode,u)):f&&(X(),L(f,1,1,()=>{f=null}),Z())},i(d){h||(A(s.$$.fragment,d),A(f),h=!0)},o(d){L(s.$$.fragment,d),L(f),h=!1},d(d){d&&v(e),d&&v(n),ee(s,d),d&&v(r),d&&v(a),d&&v(l),f&&f.d(d),d&&v(u)}}}function Mr(i){let e,t,n,s,r;return s=new Pi({props:{path:"https://raw.githubusercontent.com/NewcastleRSE/beeing-human-tei-data/dev/1623_consolidated.xml"}}),{c(){e=N("h3"),t=z("Test"),n=H(),Q(s.$$.fragment)},l(a){e=M(a,"H3",{});var o=O(e);t=G(o,"Test"),o.forEach(v),n=j(a),Y(s.$$.fragment,a)},m(a,o){E(a,e,o),D(e,t),E(a,n,o),$(s,a,o),r=!0},p:V,i(a){r||(A(s.$$.fragment,a),r=!0)},o(a){L(s.$$.fragment,a),r=!1},d(a){a&&v(e),a&&v(n),ee(s,a)}}}function an(i){let e,t;return e=new Cr({props:{meiSvg:i[0].view.mei.svg,meiMidi:i[0].view.mei.midi,timeMap:i[0].view.mei.timeMap}}),{c(){Q(e.$$.fragment)},l(n){Y(e.$$.fragment,n)},m(n,s){$(e,n,s),t=!0},p(n,s){const r={};s&1&&(r.meiSvg=n[0].view.mei.svg),s&1&&(r.meiMidi=n[0].view.mei.midi),s&1&&(r.timeMap=n[0].view.mei.timeMap),e.$set(r)},i(n){t||(A(e.$$.fragment,n),t=!0)},o(n){L(e.$$.fragment,n),t=!1},d(n){ee(e,n)}}}function Lr(i){let e,t,n,s,r=i[0].view.title+"",a,o,l,u,h,f,d,m=Object.entries(i[0].view.sections),g=[];for(let c=0;c<m.length;c+=1)g[c]=rn(nn(i,m,c));const T=c=>L(g[c],1,1,()=>{g[c]=null}),_=[Mr,Nr],b=[];function p(c,y){return c[0].view.slug==="literature"?0:c[0].view.slug==="music"?1:-1}return~(u=p(i))&&(h=b[u]=_[u](i)),{c(){e=N("h1"),t=z("View page"),n=H(),s=N("h1"),a=z(r),o=H();for(let c=0;c<g.length;c+=1)g[c].c();l=H(),h&&h.c(),f=q()},l(c){e=M(c,"H1",{});var y=O(e);t=G(y,"View page"),y.forEach(v),n=j(c),s=M(c,"H1",{});var C=O(s);a=G(C,r),C.forEach(v),o=j(c);for(let k=0;k<g.length;k+=1)g[k].l(c);l=j(c),h&&h.l(c),f=q()},m(c,y){E(c,e,y),D(e,t),E(c,n,y),E(c,s,y),D(s,a),E(c,o,y);for(let C=0;C<g.length;C+=1)g[C]&&g[C].m(c,y);E(c,l,y),~u&&b[u].m(c,y),E(c,f,y),d=!0},p(c,[y]){if((!d||y&1)&&r!==(r=c[0].view.title+"")&&ce(a,r),y&1){m=Object.entries(c[0].view.sections);let k;for(k=0;k<m.length;k+=1){const B=nn(c,m,k);g[k]?(g[k].p(B,y),A(g[k],1)):(g[k]=rn(B),g[k].c(),A(g[k],1),g[k].m(l.parentNode,l))}for(X(),k=m.length;k<g.length;k+=1)T(k);Z()}let C=u;u=p(c),u===C?~u&&b[u].p(c,y):(h&&(X(),L(b[C],1,1,()=>{b[C]=null}),Z()),~u?(h=b[u],h?h.p(c,y):(h=b[u]=_[u](c),h.c()),A(h,1),h.m(f.parentNode,f)):h=null)},i(c){if(!d){for(let y=0;y<m.length;y+=1)A(g[y]);A(h),d=!0}},o(c){g=g.filter(Boolean);for(let y=0;y<g.length;y+=1)L(g[y]);L(h),d=!1},d(c){c&&v(e),c&&v(n),c&&v(s),c&&v(o),ct(g,c),c&&v(l),~u&&b[u].d(c),c&&v(f)}}}function Or(i,e,t){let{data:n}=e,s=`${fn}/content/music/media/virtualbarbershop.mp3`;return i.$$set=r=>{"data"in r&&t(0,n=r.data)},[n,s]}class jr extends se{constructor(e){super(),re(this,e,Or,Lr,ae,{data:0})}}export{jr as component};
