import{S as se,i as re,s as ae,M as Y,k as M,a as B,l as x,m as O,c as H,h as k,X as de,n as S,b as T,G as F,a2 as _t,I as R,g as I,v as $,d as N,f as ee,Y as Be,K as rt,Z as De,a3 as on,j as Fn,N as he,Q as at,R as ot,T as lt,U as ut,a1 as He,P as q,a4 as Bn,a5 as Se,a6 as ct,D as Hn,o as ft,a7 as jn,y as K,z as W,A as J,B as X,q as te,r as ne,u as me,a8 as Tt,J as pe,e as U,a9 as Rn,C as Un,F as Vn,aa as wt,w as We,$ as Je,ab as zn,a0 as Xe,H as Gn,E as qn}from"../chunks/index.897971b5.js";import{P as ln,I as Kn}from"../chunks/InjectMD.323158ff.js";import"../chunks/ProgressBar.svelte_svelte_type_style_lang.84e8538a.js";import{b as dt}from"../chunks/paths.a00fa955.js";const Wn=i=>({}),St=i=>({});function It(i,e,t){const n=i.slice();return n[23]=e[t],n}function Et(i){let e,t;const n=i[15].default,s=at(n,i,i[14],null);return{c(){e=M("label"),s&&s.c(),this.h()},l(r){e=x(r,"LABEL",{class:!0,for:!0});var a=O(e);s&&s.l(a),a.forEach(k),this.h()},h(){S(e,"class","range-slider-label "+Zn),S(e,"for",i[2])},m(r,a){T(r,e,a),s&&s.m(e,null),t=!0},p(r,a){s&&s.p&&(!t||a&16384)&&ot(s,n,r,r[14],t?ut(n,r[14],a,null):lt(r[14]),null),(!t||a&4)&&S(e,"for",r[2])},i(r){t||(I(s,r),t=!0)},o(r){N(s,r),t=!1},d(r){r&&k(e),s&&s.d(r)}}}function At(i){let e,t,n=i[8],s=[];for(let r=0;r<n.length;r+=1)s[r]=Ct(It(i,n,r));return{c(){e=M("datalist");for(let r=0;r<s.length;r+=1)s[r].c();this.h()},l(r){e=x(r,"DATALIST",{id:!0,class:!0});var a=O(e);for(let o=0;o<s.length;o+=1)s[o].l(a);a.forEach(k),this.h()},h(){S(e,"id",t="tickmarks-"+i[2]),S(e,"class","range-slider-ticks")},m(r,a){T(r,e,a);for(let o=0;o<s.length;o+=1)s[o]&&s[o].m(e,null)},p(r,a){if(a&256){n=r[8];let o;for(o=0;o<n.length;o+=1){const l=It(r,n,o);s[o]?s[o].p(l,a):(s[o]=Ct(l),s[o].c(),s[o].m(e,null))}for(;o<s.length;o+=1)s[o].d(1);s.length=n.length}a&4&&t!==(t="tickmarks-"+r[2])&&S(e,"id",t)},d(r){r&&k(e),He(s,r)}}}function Ct(i){let e,t,n;return{c(){e=M("option"),this.h()},l(s){e=x(s,"OPTION",{label:!0}),O(e).forEach(k),this.h()},h(){e.__value=t=i[23],e.value=e.__value,S(e,"label",n=i[23])},m(s,r){T(s,e,r)},p(s,r){r&256&&t!==(t=s[23])&&(e.__value=t,e.value=e.__value),r&256&&n!==(n=s[23])&&S(e,"label",n)},d(s){s&&k(e)}}}function Pt(i){let e,t;const n=i[15].trail,s=at(n,i,i[14],St);return{c(){e=M("div"),s&&s.c(),this.h()},l(r){e=x(r,"DIV",{class:!0});var a=O(e);s&&s.l(a),a.forEach(k),this.h()},h(){S(e,"class","range-slider-trail")},m(r,a){T(r,e,a),s&&s.m(e,null),t=!0},p(r,a){s&&s.p&&(!t||a&16384)&&ot(s,n,r,r[14],t?ut(n,r[14],a,Wn):lt(r[14]),St)},i(r){t||(I(s,r),t=!0)},o(r){N(s,r),t=!1},d(r){r&&k(e),s&&s.d(r)}}}function Jn(i){let e,t,n,s,r,a,o,l,c,f,h,m,g=i[12].default&&Et(i),_=[{type:"range"},{id:i[2]},{name:i[1]},{class:r="range-slider-input "+i[9]},{list:a="tickmarks-"+i[2]},{"aria-label":i[7]},{min:i[3]},{max:i[4]},{step:i[5]},i[11]()],w={};for(let d=0;d<_.length;d+=1)w=Y(w,_[d]);let v=i[6]&&i[8]&&i[8].length&&At(i),b=i[12].trail&&Pt(i);return{c(){e=M("div"),g&&g.c(),t=B(),n=M("div"),s=M("input"),o=B(),v&&v.c(),l=B(),b&&b.c(),this.h()},l(d){e=x(d,"DIV",{class:!0,"data-testid":!0});var u=O(e);g&&g.l(u),t=H(u),n=x(u,"DIV",{class:!0});var y=O(n);s=x(y,"INPUT",{type:!0,id:!0,name:!0,class:!0,list:!0,"aria-label":!0,min:!0,max:!0,step:!0}),o=H(y),v&&v.l(y),y.forEach(k),l=H(u),b&&b.l(u),u.forEach(k),this.h()},h(){de(s,w),S(n,"class","range-content "+Qn),S(e,"class",c="range-slider "+i[10]),S(e,"data-testid","range-slider")},m(d,u){T(d,e,u),g&&g.m(e,null),F(e,t),F(e,n),F(n,s),s.autofocus&&s.focus(),_t(s,i[0]),F(n,o),v&&v.m(n,null),F(e,l),b&&b.m(e,null),f=!0,h||(m=[R(s,"change",i[19]),R(s,"input",i[19]),R(s,"click",i[16]),R(s,"change",i[17]),R(s,"blur",i[18])],h=!0)},p(d,[u]){d[12].default?g?(g.p(d,u),u&4096&&I(g,1)):(g=Et(d),g.c(),I(g,1),g.m(e,t)):g&&($(),N(g,1,1,()=>{g=null}),ee()),de(s,w=Be(_,[{type:"range"},(!f||u&4)&&{id:d[2]},(!f||u&2)&&{name:d[1]},(!f||u&512&&r!==(r="range-slider-input "+d[9]))&&{class:r},(!f||u&4&&a!==(a="tickmarks-"+d[2]))&&{list:a},(!f||u&128)&&{"aria-label":d[7]},(!f||u&8)&&{min:d[3]},(!f||u&16)&&{max:d[4]},(!f||u&32)&&{step:d[5]},d[11]()])),u&1&&_t(s,d[0]),d[6]&&d[8]&&d[8].length?v?v.p(d,u):(v=At(d),v.c(),v.m(n,null)):v&&(v.d(1),v=null),d[12].trail?b?(b.p(d,u),u&4096&&I(b,1)):(b=Pt(d),b.c(),I(b,1),b.m(e,null)):b&&($(),N(b,1,1,()=>{b=null}),ee()),(!f||u&1024&&c!==(c="range-slider "+d[10]))&&S(e,"class",c)},i(d){f||(I(g),I(b),f=!0)},o(d){N(g),N(b),f=!1},d(d){d&&k(e),g&&g.d(),v&&v.d(),b&&b.d(),h=!1,rt(m)}}}const Xn="space-y-2",Zn="",Qn="flex justify-center py-2",Yn="w-full h-2";function $n(i,e,t){let n,s;const r=["name","id","value","min","max","step","ticked","accent","label"];let a=De(e,r),{$$slots:o={},$$scope:l}=e;const c=on(o);let{name:f}=e,{id:h=String(Math.random())}=e,{value:m=0}=e,{min:g=0}=e,{max:_=100}=e,{step:w=1}=e,{ticked:v=!1}=e,{accent:b="accent-surface-900 dark:accent-surface-50"}=e,{label:d=""}=e,u;function y(){v!=!1&&t(8,u=Array.from({length:_-g+1},(A,Ve)=>Ve+g))}v&&y(),Fn(()=>{y()});function E(){return delete a.class,a}function p(A){q.call(this,i,A)}function P(A){q.call(this,i,A)}function L(A){q.call(this,i,A)}function Z(){m=Bn(this.value),t(0,m)}return i.$$set=A=>{t(22,e=Y(Y({},e),he(A))),t(21,a=De(e,r)),"name"in A&&t(1,f=A.name),"id"in A&&t(2,h=A.id),"value"in A&&t(0,m=A.value),"min"in A&&t(3,g=A.min),"max"in A&&t(4,_=A.max),"step"in A&&t(5,w=A.step),"ticked"in A&&t(6,v=A.ticked),"accent"in A&&t(13,b=A.accent),"label"in A&&t(7,d=A.label),"$$scope"in A&&t(14,l=A.$$scope)},i.$$.update=()=>{t(10,n=`${Xn} ${e.class??""}`),i.$$.dirty&8192&&t(9,s=`${Yn} ${b}`)},e=he(e),[m,f,h,g,_,w,v,d,u,s,n,E,c,b,l,o,p,P,L,Z]}class ei extends se{constructor(e){super(),re(this,e,$n,Jn,ae,{name:1,id:2,value:0,min:3,max:4,step:5,ticked:6,accent:13,label:7})}}function Nt(i){let e,t;const n=i[21].default,s=at(n,i,i[20],null);return{c(){e=M("div"),s&&s.c(),this.h()},l(r){e=x(r,"DIV",{class:!0});var a=O(e);s&&s.l(a),a.forEach(k),this.h()},h(){S(e,"class","slide-toggle-text ml-3")},m(r,a){T(r,e,a),s&&s.m(e,null),t=!0},p(r,a){s&&s.p&&(!t||a[0]&1048576)&&ot(s,n,r,r[20],t?ut(n,r[20],a,null):lt(r[20]),null)},i(r){t||(I(s,r),t=!0)},o(r){N(s,r),t=!1},d(r){r&&k(e),s&&s.d(r)}}}function ti(i){let e,t,n,s,r,a,o,l,c,f,h,m,g,_,w,v=[{type:"checkbox"},{class:"slide-toggle-input hidden"},{name:i[1]},i[8](),{disabled:s=i[9].disabled}],b={};for(let u=0;u<v.length;u+=1)b=Y(b,v[u]);let d=i[10].default&&Nt(i);return{c(){e=M("div"),t=M("label"),n=M("input"),r=B(),a=M("div"),o=M("div"),f=B(),d&&d.c(),this.h()},l(u){e=x(u,"DIV",{id:!0,class:!0,"data-testid":!0,role:!0,"aria-label":!0,"aria-checked":!0,tabindex:!0});var y=O(e);t=x(y,"LABEL",{class:!0});var E=O(t);n=x(E,"INPUT",{type:!0,class:!0,name:!0}),r=H(E),a=x(E,"DIV",{class:!0});var p=O(a);o=x(p,"DIV",{class:!0}),O(o).forEach(k),p.forEach(k),f=H(E),d&&d.l(E),E.forEach(k),y.forEach(k),this.h()},h(){de(n,b),S(o,"class",l="slide-toggle-thumb "+i[3]),Se(o,"cursor-not-allowed",i[9].disabled),S(a,"class",c="slide-toggle-track "+i[4]),Se(a,"cursor-not-allowed",i[9].disabled),S(t,"class",h="slide-toggle-label "+i[5]),S(e,"id",i[2]),S(e,"class",m="slide-toggle "+i[6]),S(e,"data-testid","slide-toggle"),S(e,"role","switch"),S(e,"aria-label",i[2]),S(e,"aria-checked",i[0]),S(e,"tabindex","0")},m(u,y){T(u,e,y),F(e,t),F(t,n),n.autofocus&&n.focus(),n.checked=i[0],F(t,r),F(t,a),F(a,o),F(t,f),d&&d.m(t,null),g=!0,_||(w=[R(n,"change",i[30]),R(n,"click",i[22]),R(n,"keydown",i[23]),R(n,"keyup",i[24]),R(n,"keypress",i[25]),R(n,"mouseover",i[26]),R(n,"change",i[27]),R(n,"focus",i[28]),R(n,"blur",i[29]),R(e,"keydown",i[7])],_=!0)},p(u,y){de(n,b=Be(v,[{type:"checkbox"},{class:"slide-toggle-input hidden"},(!g||y[0]&2)&&{name:u[1]},u[8](),(!g||y[0]&512&&s!==(s=u[9].disabled))&&{disabled:s}])),y[0]&1&&(n.checked=u[0]),(!g||y[0]&8&&l!==(l="slide-toggle-thumb "+u[3]))&&S(o,"class",l),(!g||y[0]&520)&&Se(o,"cursor-not-allowed",u[9].disabled),(!g||y[0]&16&&c!==(c="slide-toggle-track "+u[4]))&&S(a,"class",c),(!g||y[0]&528)&&Se(a,"cursor-not-allowed",u[9].disabled),u[10].default?d?(d.p(u,y),y[0]&1024&&I(d,1)):(d=Nt(u),d.c(),I(d,1),d.m(t,null)):d&&($(),N(d,1,1,()=>{d=null}),ee()),(!g||y[0]&32&&h!==(h="slide-toggle-label "+u[5]))&&S(t,"class",h),(!g||y[0]&4)&&S(e,"id",u[2]),(!g||y[0]&64&&m!==(m="slide-toggle "+u[6]))&&S(e,"class",m),(!g||y[0]&4)&&S(e,"aria-label",u[2]),(!g||y[0]&1)&&S(e,"aria-checked",u[0])},i(u){g||(I(d),g=!0)},o(u){N(d),g=!1},d(u){u&&k(e),d&&d.d(),_=!1,rt(w)}}}const ni="inline-block",ii="unstyled flex items-center",si="flex transition-all duration-[200ms] cursor-pointer",ri="w-[50%] h-full scale-[0.8] transition-all duration-[200ms] shadow";function ai(i,e,t){let n,s,r,a,o,l,c,f;const h=["name","checked","size","active","border","rounded","label"];let m=De(e,h),{$$slots:g={},$$scope:_}=e;const w=on(g),v=ct();let{name:b}=e,{checked:d=!1}=e,{size:u="md"}=e,{active:y="bg-surface-900 dark:bg-surface-300"}=e,{border:E=""}=e,{rounded:p="rounded-full"}=e,{label:P=""}=e,L;switch(u){case"sm":L="w-12 h-6";break;case"lg":L="w-20 h-10";break;default:L="w-16 h-8"}function Z(C){["Enter","Space"].includes(C.code)&&(C.preventDefault(),v("keyup",C),C.target.firstChild.click())}function A(){return delete m.class,m}function Ve(C){q.call(this,i,C)}function Cn(C){q.call(this,i,C)}function Pn(C){q.call(this,i,C)}function Nn(C){q.call(this,i,C)}function Mn(C){q.call(this,i,C)}function xn(C){q.call(this,i,C)}function Ln(C){q.call(this,i,C)}function Dn(C){q.call(this,i,C)}function On(){d=this.checked,t(0,d)}return i.$$set=C=>{t(9,e=Y(Y({},e),he(C))),t(32,m=De(e,h)),"name"in C&&t(1,b=C.name),"checked"in C&&t(0,d=C.checked),"size"in C&&t(11,u=C.size),"active"in C&&t(12,y=C.active),"border"in C&&t(13,E=C.border),"rounded"in C&&t(14,p=C.rounded),"label"in C&&t(2,P=C.label),"$$scope"in C&&t(20,_=C.$$scope)},i.$$.update=()=>{i.$$.dirty[0]&4097&&t(18,n=d?y:"bg-surface-400 dark:bg-surface-700 cursor-pointer"),i.$$.dirty[0]&1&&t(17,s=d?"bg-white/75":"bg-white"),i.$$.dirty[0]&1&&t(16,r=d?"translate-x-full":""),t(19,a=e.disabled===!0?"opacity-50":"hover:brightness-[105%] dark:hover:brightness-110 cursor-pointer"),t(6,o=`${ni} ${p} ${a} ${e.class??""}`),i.$$.dirty[0]&319488&&t(4,c=`${si} ${E} ${p} ${L} ${n}`),i.$$.dirty[0]&212992&&t(3,f=`${ri} ${p} ${s} ${r}`)},t(5,l=`${ii}`),e=he(e),[d,b,P,f,c,l,o,Z,A,e,w,u,y,E,p,L,r,s,n,a,_,g,Ve,Cn,Pn,Nn,Mn,xn,Ln,Dn,On]}class oi extends se{constructor(e){super(),re(this,e,ai,ti,ae,{name:1,checked:0,size:11,active:12,border:13,rounded:14,label:2},null,[-1,-1])}}const li={namespaces:{tei:"http://www.tei-c.org/ns/1.0",teieg:"http://www.tei-c.org/ns/Examples",rng:"http://relaxng.org/ns/structure/1.0"},tei:{eg:["<pre>","</pre>"],ptr:['<a href="$rw@target">$@target</a>'],ref:[["[target]",['<a href="$rw@target">',"</a>"]]],graphic:function(i){let e=new Image;return e.src=this.rw(i.getAttribute("url")),i.hasAttribute("width")&&e.setAttribute("width",i.getAttribute("width")),i.hasAttribute("height")&&e.setAttribute("height",i.getAttribute("height")),e},list:[["[type=gloss]",function(i){const e=i.ownerDocument;let t=e.createElement("dl");for(let n of Array.from(i.children))if(n.nodeType==1){if(n.localName=="tei-label"){let s=e.createElement("dt");s.innerHTML=n.innerHTML,t.appendChild(s)}if(n.localName=="tei-item"){let s=e.createElement("dd");s.innerHTML=n.innerHTML,t.appendChild(s)}}return t}]],note:[["[place=end]",function(i){const e=i.ownerDocument;this.noteIndex?this.noteIndex++:this.noteIndex=1;let t="_note_"+this.noteIndex,n=e.createElement("a");n.setAttribute("id","src"+t),n.setAttribute("href","#"+t),n.innerHTML=this.noteIndex;let s=e.createElement("sup");s.appendChild(n);let r=e.querySelector("ol.notes");r||(r=e.createElement("ol"),r.setAttribute("class","notes"),this.dom.appendChild(r));let a=e.createElement("li");return a.id=t,a.innerHTML=i.innerHTML,r.appendChild(a),s}],["_",["(",")"]]],teiHeader:function(i){this.hideContent(i,!1)},title:[["tei-titlestmt>tei-title",function(i){const e=i.ownerDocument;let t=e.createElement("title");t.innerHTML=i.innerText,e.querySelector("head").appendChild(t)}]]},teieg:{egXML:function(i){let t=i.ownerDocument.createElement("pre"),n=this.serialize(i,!0).replace(/</g,"&lt;"),s=n.match(/^[\t ]+/);return s&&(n=n.replace(new RegExp("^"+s[0],"mg"),"")),t.innerHTML=n,t}}};function ui(i,e){let t=1,n=i;for(;n&&n.previousElementSibling!==null&&(!e||n.previousElementSibling.localName==e)&&(t++,n=n.previousElementSibling,!!n.previousElementSibling););return t}function ci(i){const e=i.ownerDocument;let t=n=>{let s=n.nodeType===1?e.createElement(n.nodeName):n.cloneNode(!0);if(n.attributes)for(let r of Array.from(n.attributes))r.name!=="data-processed"&&s.setAttribute(r.name,r.value);for(let r of Array.from(n.childNodes))if(r.nodeType==1){if(!n.hasAttribute("data-empty"))if(r.hasAttribute("data-original")){for(let a of Array.from(r.childNodes)){let o=s.appendChild(t(a));o.nodeType===1&&o.hasAttribute("data-origid")&&(o.setAttribute("id",o.getAttribute("data-origid")),o.removeAttribute("data-origid"))}return s}else s.appendChild(t(r))}else s.appendChild(r.cloneNode());return s};return t(i)}function fi(i){return i.replace(/ .*$/,"")}function un(i,e=!0){const t=i.ownerDocument;if(i.childNodes.length>0){let n=t.createElement("span");i.appendChild(n),n.setAttribute("hidden",""),n.setAttribute("data-original","");for(let s of Array.from(i.childNodes))if(s!==n){if(s.nodeType===1){s.setAttribute("data-processed","");for(let r of s.querySelectorAll("*"))r.setAttribute("data-processed","")}n.appendChild(i.removeChild(s))}if(e)for(let s of Array.from(n.querySelectorAll("*")))s.hasAttribute("id")&&(s.setAttribute("data-origid",s.getAttribute("id")),s.removeAttribute("id"))}}function di(i){return this.rw(this.first(i))}function hi(i,e){let t="";for(let n=0;n<e;n++)t+=i;return t}function mi(i){let e=this.prefixDefs[i.substring(0,i.indexOf(":"))];return i.replace(new RegExp(e.matchPattern),e.replacementPattern)}function pi(i){return this.prefixDefs[i]}function gi(i){return i.match(/^(?:http|mailto|file|\/|#).*$/)?i:this.base+this.utilities.first(i)}function Ze(i,e,t){let n="",s=r=>!/[^\t\n\r ]/.test(r);if(!e&&i.nodeType==1){typeof t=="string"&&t!==""?n+=`
`+t+"<":n+="<",n+=i.getAttribute("data-origname");let r=i.hasAttribute("data-origatts")?i.getAttribute("data-origatts").split(" "):[];for(let a of Array.from(i.attributes))!a.name.startsWith("data-")&&!["id","lang","class"].includes(a.name)&&(n+=" "+r.find(function(o){return o.toLowerCase()==a.name})+'="'+a.value+'"'),a.name=="data-xmlns"&&(n+=' xmlns="'+a.value+'"');i.childNodes.length>0?n+=">":n+="/>"}for(let r of Array.from(i.childNodes))switch(r.nodeType){case 1:typeof t=="string"?n+=Ze(r,!1,t+"  "):n+=Ze(r,!1,t);break;case 7:n+="<?"+r.nodeValue+"?>";break;case 8:n+="<!--"+r.nodeValue+"-->";break;default:if(e&&s(r.nodeValue)&&(n+=r.nodeValue.replace(/^\s*\n/,"")),typeof t=="string"&&s(r.nodeValue))break;n+=r.nodeValue}return!e&&i.childNodes.length>0&&(typeof t=="string"?n+=`
`+t+"</":n+="</",n+=i.getAttribute("data-origname")+">"),n}function bi(i){return i.replace(/&gt;/,">").replace(/&quot;/,'"').replace(/&apos;/,"'").replace(/&amp;/,"&")}function Oe(i){return i.includes(":"),i.replace(/:/,"-").toLowerCase()}function cn(i,e=null,t=!1){try{window.customElements.define(Oe(i),class extends HTMLElement{constructor(){super(),this.matches(":defined")||(e&&e.call(this),this.setAttribute("data-processed",""))}connectedCallback(){this.hasAttribute("data-processed")||(e&&e.call(this),this.setAttribute("data-processed",""))}})}catch(n){t&&(console.log(Oe(i)+" couldn't be registered or is already registered."),console.log(n))}}const ze=Object.freeze(Object.defineProperty({__proto__:null,copyAndReset:ci,defineCustomElement:cn,first:fi,getOrdinality:ui,getPrefixDef:pi,hideContent:un,normalizeURI:di,repeat:hi,resolveURI:mi,rw:gi,serialize:Ze,tagName:Oe,unEscapeEntities:bi},Symbol.toStringTag,{value:"Module"}));function yi(i){if(i.namespaces)for(let e of Object.keys(i.namespaces))!this.namespaces.has(i.namespaces[e])&&!Array.from(this.namespaces.values()).includes(e)&&this.namespaces.set(i.namespaces[e],e);for(let e of this.namespaces.values())if(i[e])for(let t of Object.keys(i[e]))this.behaviors[`${e}:${t}`]=i[e][t];if(i.functions)for(let e of Object.keys(i.functions))this.utilities[e]=i.functions[e];i.handlers&&console.log("Behavior handlers are no longer used."),i.fallbacks&&console.log("Fallback behaviors are no longer used.")}function vi(i,e,t){let n;if(i===Object(i))for(let s of Object.keys(i))this.namespaces.has(i[s])||(this.namespaces.set(i[s],s),n=s);else n=i;this.behaviors[`${n}:${e}`]=t}function ki(i,e){let t;if(i===Object(i))for(let n of Object.keys(i))this.namespaces.has(i[n])||(this.namespaces.set(i[n],n),t=n);else t=i;delete this.behaviors[`${t}:${e}`]}function _i(i,e){const t=i.documentElement;let n=1,s=function(a){return e.has(a.namespaceURI?a.namespaceURI:"")||e.set(a.namespaceURI,"ns"+n++),e.get(a.namespaceURI?a.namespaceURI:"")+":"+a.localName};const r=new Set(Array.from(t.querySelectorAll("*"),s));return r.add(s(t)),r}function Ti(i){return Array.from(i.querySelectorAll("*[data-origname]"),e=>e.localName.replace(/(\w+)-.+/,"$1:")+e.getAttribute("data-origname"))}class fe{constructor(e){this.options=e||{},this.document=this.options.documentObject?this.options.documentObject:void 0,this.document===void 0&&(typeof window<"u"&&window.document?this.document=window.document:typeof global<"u"&&global.document&&(this.document=global.document)),this.addBehaviors=yi.bind(this),this.addBehavior=vi.bind(this),this.removeBehavior=ki.bind(this),this.utilities={};for(const t of Object.keys(ze))["getPrefixDef","rw","resolveURI"].includes(t)?this.utilities[t]=ze[t].bind(this):this.utilities[t]=ze[t];if(this.els=[],this.namespaces=new Map,this.behaviors={},this.hasStyle=!1,this.prefixDefs=[],this.debug=this.options.debug===!0,this.discardContent=this.options.discardContent===!0,this.options.base)this.base=this.options.base;else try{window&&(this.base=window.location.href.replace(/\/[^\/]*$/,"/"))}catch{this.base=""}this.options.omitDefaultBehaviors||this.addBehaviors(li),this.options.ignoreFragmentId&&window&&window.removeEventListener("ceteiceanload",fe.restorePosition)}getHTML5(e,t,n){return window&&window.location.href.startsWith(this.base)&&e.indexOf("/")>=0&&(this.base=e.replace(/\/[^\/]*$/,"/")),new Promise(function(r,a){let o=new XMLHttpRequest;o.open("GET",e),o.send(),o.onload=function(){this.status>=200&&this.status<300?r(this.response):a(this.statusText)},o.onerror=function(){a(this.statusText)}}).catch(function(r){console.log("Could not get XML file."),this.debug&&console.log(r)}).then(r=>this.makeHTML5(r,t,n))}makeHTML5(e,t,n){return this.XML_dom=new DOMParser().parseFromString(e,"text/xml"),this.domToHTML5(this.XML_dom,t,n)}preprocess(e,t,n){this.els=_i(e,this.namespaces);let s=r=>{let a;if(this.namespaces.has(r.namespaceURI?r.namespaceURI:"")){let o=this.namespaces.get(r.namespaceURI?r.namespaceURI:"");a=this.document.createElement(`${o}-${r.localName}`)}else a=this.document.importNode(r,!1);for(let o of Array.from(r.attributes))o.name=="xmlns"?a.setAttribute("data-xmlns",o.value):a.setAttribute(o.name,o.value),o.name=="xml:id"&&a.setAttribute("id",o.value),o.name=="xml:lang"&&a.setAttribute("lang",o.value),o.name=="rendition"&&a.setAttribute("class",o.value.replace(/#/g,""));if(a.setAttribute("data-origname",r.localName),r.hasAttributes()&&a.setAttribute("data-origatts",r.getAttributeNames().join(" ")),r.childNodes.length==0&&a.setAttribute("data-empty",""),r.localName=="head"){let o=e.evaluate("count(ancestor::*[tei:head])",r,function(l){if(l=="tei")return"http://www.tei-c.org/ns/1.0"},1,null);a.setAttribute("data-level",o.numberValue)}if(r.localName=="tagsDecl"){let o=this.document.createElement("style");for(let l of Array.from(r.childNodes))if(l.nodeType==1&&l.localName=="rendition"&&l.getAttribute("scheme")=="css"){let c="";l.hasAttribute("selector")?(c+=l.getAttribute("selector").replace(/([^#, >]+\w*)/g,"tei-$1").replace(/#tei-/g,"#")+`{
`,c+=l.textContent):(c+="."+l.getAttribute("xml:id")+`{
`,c+=l.textContent),c+=`
}
`,o.appendChild(this.document.createTextNode(c))}o.childNodes.length>0&&(a.appendChild(o),this.hasStyle=!0)}r.localName=="prefixDef"&&(this.prefixDefs.push(r.getAttribute("ident")),this.prefixDefs[r.getAttribute("ident")]={matchPattern:r.getAttribute("matchPattern"),replacementPattern:r.getAttribute("replacementPattern")});for(let o of Array.from(r.childNodes))o.nodeType==1?a.appendChild(s(o)):a.appendChild(o.cloneNode());return n&&n(a,r),a};if(this.dom=s(e.documentElement),this.utilities.dom=this.dom,t)t(this.dom,this),window&&window.dispatchEvent(Ie);else return typeof window<"u"&&window.dispatchEvent(Ie),this.dom}domToHTML5(e,t,n){if(this.preprocess(e,null,n),this.applyBehaviors(),this.done=!0,t)t(this.dom,this),window&&window.dispatchEvent(Ie);else return typeof window<"u"&&window.dispatchEvent(Ie),this.dom}processPage(){this.els=Ti(this.document),this.applyBehaviors()}unsetNamespace(e){this.namespaces.delete(e)}setBaseUrl(e){this.base=e}append(e,t){let n=this;if(t){let s=e.call(n.utilities,t);s&&!n.childExists(t.firstElementChild,s.nodeName)&&n.appendBasic(t,s)}else return function(){if(!this.hasAttribute("data-processed")){let s=e.call(n.utilities,this);s&&!n.childExists(this.firstElementChild,s.nodeName)&&n.appendBasic(this,s)}}}appendBasic(e,t){this.discardContent?e.innerHTML="":un(e,!0),e.appendChild(t)}bName(e){return e.tagName.substring(0,e.tagName.indexOf("-")).toLowerCase()+":"+e.getAttribute("data-origname")}childExists(e,t){return e&&e.nodeName==t?!0:e&&e.nextElementSibling&&this.childExists(e.nextElementSibling,t)}decorator(e){if(Array.isArray(e)&&e.length==0)return function(n){};if(Array.isArray(e)&&!Array.isArray(e[0]))return this.applyDecorator(e);let t=this;return function(n){for(let s of e)if(n.matches(s[0])||s[0]==="_")return Array.isArray(s[1])?t.decorator(s[1]).call(this,n):s[1].call(this,n)}}applyDecorator(e){let t=this;return function(n){let s=[];for(let r=0;r<e.length;r++)s.push(t.template(e[r],n));return t.insert(n,s)}}getFallback(e,t){if(e[t])return e[t]instanceof Function?e[t]:this.decorator(e[t])}getHandler(e,t){if(e[t])return e[t]instanceof Function?this.append(e[t]):this.append(this.decorator(e[t]))}insert(e,t){let n=this.document.createElement("span");for(let s of Array.from(e.childNodes))s.nodeType===1&&!s.hasAttribute("data-processed")&&this.processElement(s);if(t[0].match("<[^>]+>")&&t[1]&&t[1].match("<[^>]+>"))n.innerHTML=t[0]+e.innerHTML+(t[1]?t[1]:"");else{n.innerHTML=t[0],n.setAttribute("data-before",t[0].replace(/<[^>]+>/g,"").length);for(let s of Array.from(e.childNodes))n.appendChild(s.cloneNode(!0));t.length>1&&(n.innerHTML+=t[1],n.setAttribute("data-after",t[1].replace(/<[^>]+>/g,"").length))}return n}processElement(e){if(e.hasAttribute("data-origname")&&!e.hasAttribute("data-processed")){let t=this.getFallback(this.bName(e));t&&(this.append(t,e),e.setAttribute("data-processed",""))}for(let t of Array.from(e.childNodes))t.nodeType===1&&this.processElement(t)}template(e,t){let n=e;if(e.search(/\$(\w*)(@([a-zA-Z:]+))/)){let s=/\$(\w*)@([a-zA-Z:]+)/g,r;for(;r=s.exec(e);)t.hasAttribute(r[2])?r[1]&&this.utilities[r[1]]?n=n.replace(r[0],this.utilities[r[1]](t.getAttribute(r[2]))):n=n.replace(r[0],t.getAttribute(r[2])):n=n.replace(r[0],"")}return n}applyBehaviors(){typeof window<"u"&&window.customElements?this.define.call(this,this.els):this.fallback.call(this,this.els)}define(e){for(let t of e){const n=this.getHandler(this.behaviors,t);cn(t,n,this.debug)}}fallback(e){for(let t of e){let n=this.getFallback(this.behaviors,t);if(n)for(let s of Array.from((this.dom&&!this.done?this.dom:this.document).getElementsByTagName(Oe(t))))s.hasAttribute("data-processed")||this.append(n,s)}}static savePosition(){window.sessionStorage.setItem(window.location+"-scroll",window.scrollY)}static restorePosition(){if(window.location.hash)setTimeout(function(){let e=this.document.querySelector(window.decodeURI(window.location.hash));e&&e.scrollIntoView()},100);else{let e;(e=window.sessionStorage.getItem(window.location+"-scroll"))&&setTimeout(function(){window.scrollTo(0,e)},100)}}}try{if(typeof window<"u"){window.CETEI=fe,window.addEventListener("beforeunload",fe.savePosition);var Ie=new Event("ceteiceanload");window.addEventListener("ceteiceanload",fe.restorePosition)}}catch(i){console.log(i)}let wi={tei:{note:[["[type=gloss]",function(i){this.noteIndex?this.noteIndex++:this.noteIndex=1;let e="note"+this.noteIndex,t=document.createElement("a");t.setAttribute("id","src"+e),t.setAttribute("href","#"+e),t.innerHTML=this.noteIndex;let n=document.createElement("sup");n.appendChild(t);let s=this.dom.querySelector("ol.notes");s||(s=document.createElement("ol"),s.setAttribute("class","notes"),this.dom.appendChild(s));let r=document.createElement("li");return r.id=e,r.innerHTML='<a href="#src'+e+'">^</a> '+i.innerHTML,s.appendChild(r),n}],["[type=side-note]",function(i){i.style.fontSize="0.75em",i.style.marginLeft="1em",i.style.fontStyle="italic"}]]}};const{document:Mt}=jn;function xt(i){let e,t;return e=new ln({}),{c(){K(e.$$.fragment)},l(n){W(e.$$.fragment,n)},m(n,s){J(e,n,s),t=!0},i(n){t||(I(e.$$.fragment,n),t=!0)},o(n){N(e.$$.fragment,n),t=!1},d(n){X(e,n)}}}function Lt(i){let e,t;return{c(){e=M("p"),t=te(i[1]),this.h()},l(n){e=x(n,"P",{"data-testid":!0});var s=O(e);t=ne(s,i[1]),s.forEach(k),this.h()},h(){S(e,"data-testid","error-message")},m(n,s){T(n,e,s),F(e,t)},p(n,s){s&2&&me(t,n[1])},d(n){n&&k(e)}}}function Si(i){let e,t,n,s,r,a=!i[0]&&xt(),o=i[1]&&Lt(i);return{c(){e=M("link"),t=B(),n=M("div"),a&&a.c(),s=B(),o&&o.c(),this.h()},l(l){const c=Hn("svelte-1rxmp49",Mt.head);e=x(c,"LINK",{rel:!0,type:!0,href:!0}),c.forEach(k),t=H(l),n=x(l,"DIV",{id:!0,"data-testid":!0});var f=O(n);a&&a.l(f),s=H(f),o&&o.l(f),f.forEach(k),this.h()},h(){S(e,"rel","stylesheet"),S(e,"type","text/css"),S(e,"href",dt+"/additional-style/TEIstyle.css"),S(n,"id","TEI-container"),S(n,"data-testid","TEI-container")},m(l,c){F(Mt.head,e),T(l,t,c),T(l,n,c),a&&a.m(n,null),F(n,s),o&&o.m(n,null),r=!0},p(l,[c]){l[0]?a&&($(),N(a,1,1,()=>{a=null}),ee()):a?c&1&&I(a,1):(a=xt(),a.c(),I(a,1),a.m(n,s)),l[1]?o?o.p(l,c):(o=Lt(l),o.c(),o.m(n,null)):o&&(o.d(1),o=null)},i(l){r||(I(a),r=!0)},o(l){N(a),r=!1},d(l){k(e),l&&k(t),l&&k(n),a&&a.d(),o&&o.d()}}}function Ii(i,e,t){let n=!1,s,{path:r=""}=e;return ft(async()=>{try{if(r==="")throw"No path specified";var a=new fe;a.addBehaviors(wi),a.getHTML5(r,function(o){document.getElementById("TEI-container").appendChild(o)}),t(0,n=!0)}catch(o){t(1,s=o.toString()),t(0,n=!0);return}}),i.$$set=a=>{"path"in a&&t(2,r=a.path)},[n,s,r]}class Ei extends se{constructor(e){super(),re(this,e,Ii,Si,ae,{path:2})}}function Ai(i){let e,t,n;return{c(){e=M("audio"),t=M("source"),this.h()},l(s){e=x(s,"AUDIO",{});var r=O(e);t=x(r,"SOURCE",{src:!0,type:!0}),r.forEach(k),this.h()},h(){Tt(t.src,n=i[0])||S(t,"src",n),S(t,"type","audio/mpeg"),e.controls=!0},m(s,r){T(s,e,r),F(e,t)},p(s,[r]){r&1&&!Tt(t.src,n=s[0])&&S(t,"src",n)},i:pe,o:pe,d(s){s&&k(e)}}}function Ci(i,e,t){let{audioPath:n}=e;return i.$$set=s=>{"audioPath"in s&&t(0,n=s.audioPath)},[n]}class Pi extends se{constructor(e){super(),re(this,e,Ci,Ai,ae,{audioPath:0})}}const _e=/^[a-z0-9]+(-[a-z0-9]+)*$/,je=(i,e,t,n="")=>{const s=i.split(":");if(i.slice(0,1)==="@"){if(s.length<2||s.length>3)return null;n=s.shift().slice(1)}if(s.length>3||!s.length)return null;if(s.length>1){const o=s.pop(),l=s.pop(),c={provider:s.length>0?s[0]:n,prefix:l,name:o};return e&&!Ce(c)?null:c}const r=s[0],a=r.split("-");if(a.length>1){const o={provider:n,prefix:a.shift(),name:a.join("-")};return e&&!Ce(o)?null:o}if(t&&n===""){const o={provider:n,prefix:"",name:r};return e&&!Ce(o,t)?null:o}return null},Ce=(i,e)=>i?!!((i.provider===""||i.provider.match(_e))&&(e&&i.prefix===""||i.prefix.match(_e))&&i.name.match(_e)):!1,fn=Object.freeze({left:0,top:0,width:16,height:16}),Fe=Object.freeze({rotate:0,vFlip:!1,hFlip:!1}),Re=Object.freeze({...fn,...Fe}),Qe=Object.freeze({...Re,body:"",hidden:!1});function Ni(i,e){const t={};!i.hFlip!=!e.hFlip&&(t.hFlip=!0),!i.vFlip!=!e.vFlip&&(t.vFlip=!0);const n=((i.rotate||0)+(e.rotate||0))%4;return n&&(t.rotate=n),t}function Dt(i,e){const t=Ni(i,e);for(const n in Qe)n in Fe?n in i&&!(n in t)&&(t[n]=Fe[n]):n in e?t[n]=e[n]:n in i&&(t[n]=i[n]);return t}function Mi(i,e){const t=i.icons,n=i.aliases||Object.create(null),s=Object.create(null);function r(a){if(t[a])return s[a]=[];if(!(a in s)){s[a]=null;const o=n[a]&&n[a].parent,l=o&&r(o);l&&(s[a]=[o].concat(l))}return s[a]}return(e||Object.keys(t).concat(Object.keys(n))).forEach(r),s}function xi(i,e,t){const n=i.icons,s=i.aliases||Object.create(null);let r={};function a(o){r=Dt(n[o]||s[o],r)}return a(e),t.forEach(a),Dt(i,r)}function dn(i,e){const t=[];if(typeof i!="object"||typeof i.icons!="object")return t;i.not_found instanceof Array&&i.not_found.forEach(s=>{e(s,null),t.push(s)});const n=Mi(i);for(const s in n){const r=n[s];r&&(e(s,xi(i,s,r)),t.push(s))}return t}const Li={provider:"",aliases:{},not_found:{},...fn};function Ge(i,e){for(const t in e)if(t in i&&typeof i[t]!=typeof e[t])return!1;return!0}function hn(i){if(typeof i!="object"||i===null)return null;const e=i;if(typeof e.prefix!="string"||!i.icons||typeof i.icons!="object"||!Ge(i,Li))return null;const t=e.icons;for(const s in t){const r=t[s];if(!s.match(_e)||typeof r.body!="string"||!Ge(r,Qe))return null}const n=e.aliases||Object.create(null);for(const s in n){const r=n[s],a=r.parent;if(!s.match(_e)||typeof a!="string"||!t[a]&&!n[a]||!Ge(r,Qe))return null}return e}const Ot=Object.create(null);function Di(i,e){return{provider:i,prefix:e,icons:Object.create(null),missing:new Set}}function le(i,e){const t=Ot[i]||(Ot[i]=Object.create(null));return t[e]||(t[e]=Di(i,e))}function ht(i,e){return hn(e)?dn(e,(t,n)=>{n?i.icons[t]=n:i.missing.add(t)}):[]}function Oi(i,e,t){try{if(typeof t.body=="string")return i.icons[e]={...t},!0}catch{}return!1}let Te=!1;function mn(i){return typeof i=="boolean"&&(Te=i),Te}function Fi(i){const e=typeof i=="string"?je(i,!0,Te):i;if(e){const t=le(e.provider,e.prefix),n=e.name;return t.icons[n]||(t.missing.has(n)?null:void 0)}}function Bi(i,e){const t=je(i,!0,Te);if(!t)return!1;const n=le(t.provider,t.prefix);return Oi(n,t.name,e)}function Hi(i,e){if(typeof i!="object")return!1;if(typeof e!="string"&&(e=i.provider||""),Te&&!e&&!i.prefix){let s=!1;return hn(i)&&(i.prefix="",dn(i,(r,a)=>{a&&Bi(r,a)&&(s=!0)})),s}const t=i.prefix;if(!Ce({provider:e,prefix:t,name:"a"}))return!1;const n=le(e,t);return!!ht(n,i)}const pn=Object.freeze({width:null,height:null}),gn=Object.freeze({...pn,...Fe}),ji=/(-?[0-9.]*[0-9]+[0-9.]*)/g,Ri=/^-?[0-9.]*[0-9]+[0-9.]*$/g;function Ft(i,e,t){if(e===1)return i;if(t=t||100,typeof i=="number")return Math.ceil(i*e*t)/t;if(typeof i!="string")return i;const n=i.split(ji);if(n===null||!n.length)return i;const s=[];let r=n.shift(),a=Ri.test(r);for(;;){if(a){const o=parseFloat(r);isNaN(o)?s.push(r):s.push(Math.ceil(o*e*t)/t)}else s.push(r);if(r=n.shift(),r===void 0)return s.join("");a=!a}}const Ui=i=>i==="unset"||i==="undefined"||i==="none";function Vi(i,e){const t={...Re,...i},n={...gn,...e},s={left:t.left,top:t.top,width:t.width,height:t.height};let r=t.body;[t,n].forEach(_=>{const w=[],v=_.hFlip,b=_.vFlip;let d=_.rotate;v?b?d+=2:(w.push("translate("+(s.width+s.left).toString()+" "+(0-s.top).toString()+")"),w.push("scale(-1 1)"),s.top=s.left=0):b&&(w.push("translate("+(0-s.left).toString()+" "+(s.height+s.top).toString()+")"),w.push("scale(1 -1)"),s.top=s.left=0);let u;switch(d<0&&(d-=Math.floor(d/4)*4),d=d%4,d){case 1:u=s.height/2+s.top,w.unshift("rotate(90 "+u.toString()+" "+u.toString()+")");break;case 2:w.unshift("rotate(180 "+(s.width/2+s.left).toString()+" "+(s.height/2+s.top).toString()+")");break;case 3:u=s.width/2+s.left,w.unshift("rotate(-90 "+u.toString()+" "+u.toString()+")");break}d%2===1&&(s.left!==s.top&&(u=s.left,s.left=s.top,s.top=u),s.width!==s.height&&(u=s.width,s.width=s.height,s.height=u)),w.length&&(r='<g transform="'+w.join(" ")+'">'+r+"</g>")});const a=n.width,o=n.height,l=s.width,c=s.height;let f,h;a===null?(h=o===null?"1em":o==="auto"?c:o,f=Ft(h,l/c)):(f=a==="auto"?l:a,h=o===null?Ft(f,c/l):o==="auto"?c:o);const m={},g=(_,w)=>{Ui(w)||(m[_]=w.toString())};return g("width",f),g("height",h),m.viewBox=s.left.toString()+" "+s.top.toString()+" "+l.toString()+" "+c.toString(),{attributes:m,body:r}}const zi=/\sid="(\S+)"/g,Gi="IconifyId"+Date.now().toString(16)+(Math.random()*16777216|0).toString(16);let qi=0;function Ki(i,e=Gi){const t=[];let n;for(;n=zi.exec(i);)t.push(n[1]);if(!t.length)return i;const s="suffix"+(Math.random()*16777216|Date.now()).toString(16);return t.forEach(r=>{const a=typeof e=="function"?e(r):e+(qi++).toString(),o=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");i=i.replace(new RegExp('([#;"])('+o+')([")]|\\.[a-z])',"g"),"$1"+a+s+"$3")}),i=i.replace(new RegExp(s,"g"),""),i}const Ye=Object.create(null);function Wi(i,e){Ye[i]=e}function $e(i){return Ye[i]||Ye[""]}function mt(i){let e;if(typeof i.resources=="string")e=[i.resources];else if(e=i.resources,!(e instanceof Array)||!e.length)return null;return{resources:e,path:i.path||"/",maxURL:i.maxURL||500,rotate:i.rotate||750,timeout:i.timeout||5e3,random:i.random===!0,index:i.index||0,dataAfterTimeout:i.dataAfterTimeout!==!1}}const pt=Object.create(null),be=["https://api.simplesvg.com","https://api.unisvg.com"],Pe=[];for(;be.length>0;)be.length===1||Math.random()>.5?Pe.push(be.shift()):Pe.push(be.pop());pt[""]=mt({resources:["https://api.iconify.design"].concat(Pe)});function Ji(i,e){const t=mt(e);return t===null?!1:(pt[i]=t,!0)}function gt(i){return pt[i]}const Xi=()=>{let i;try{if(i=fetch,typeof i=="function")return i}catch{}};let Bt=Xi();function Zi(i,e){const t=gt(i);if(!t)return 0;let n;if(!t.maxURL)n=0;else{let s=0;t.resources.forEach(a=>{s=Math.max(s,a.length)});const r=e+".json?icons=";n=t.maxURL-s-t.path.length-r.length}return n}function Qi(i){return i===404}const Yi=(i,e,t)=>{const n=[],s=Zi(i,e),r="icons";let a={type:r,provider:i,prefix:e,icons:[]},o=0;return t.forEach((l,c)=>{o+=l.length+1,o>=s&&c>0&&(n.push(a),a={type:r,provider:i,prefix:e,icons:[]},o=l.length),a.icons.push(l)}),n.push(a),n};function $i(i){if(typeof i=="string"){const e=gt(i);if(e)return e.path}return"/"}const es=(i,e,t)=>{if(!Bt){t("abort",424);return}let n=$i(e.provider);switch(e.type){case"icons":{const r=e.prefix,o=e.icons.join(","),l=new URLSearchParams({icons:o});n+=r+".json?"+l.toString();break}case"custom":{const r=e.uri;n+=r.slice(0,1)==="/"?r.slice(1):r;break}default:t("abort",400);return}let s=503;Bt(i+n).then(r=>{const a=r.status;if(a!==200){setTimeout(()=>{t(Qi(a)?"abort":"next",a)});return}return s=501,r.json()}).then(r=>{if(typeof r!="object"||r===null){setTimeout(()=>{r===404?t("abort",r):t("next",s)});return}setTimeout(()=>{t("success",r)})}).catch(()=>{t("next",s)})},ts={prepare:Yi,send:es};function ns(i){const e={loaded:[],missing:[],pending:[]},t=Object.create(null);i.sort((s,r)=>s.provider!==r.provider?s.provider.localeCompare(r.provider):s.prefix!==r.prefix?s.prefix.localeCompare(r.prefix):s.name.localeCompare(r.name));let n={provider:"",prefix:"",name:""};return i.forEach(s=>{if(n.name===s.name&&n.prefix===s.prefix&&n.provider===s.provider)return;n=s;const r=s.provider,a=s.prefix,o=s.name,l=t[r]||(t[r]=Object.create(null)),c=l[a]||(l[a]=le(r,a));let f;o in c.icons?f=e.loaded:a===""||c.missing.has(o)?f=e.missing:f=e.pending;const h={provider:r,prefix:a,name:o};f.push(h)}),e}function bn(i,e){i.forEach(t=>{const n=t.loaderCallbacks;n&&(t.loaderCallbacks=n.filter(s=>s.id!==e))})}function is(i){i.pendingCallbacksFlag||(i.pendingCallbacksFlag=!0,setTimeout(()=>{i.pendingCallbacksFlag=!1;const e=i.loaderCallbacks?i.loaderCallbacks.slice(0):[];if(!e.length)return;let t=!1;const n=i.provider,s=i.prefix;e.forEach(r=>{const a=r.icons,o=a.pending.length;a.pending=a.pending.filter(l=>{if(l.prefix!==s)return!0;const c=l.name;if(i.icons[c])a.loaded.push({provider:n,prefix:s,name:c});else if(i.missing.has(c))a.missing.push({provider:n,prefix:s,name:c});else return t=!0,!0;return!1}),a.pending.length!==o&&(t||bn([i],r.id),r.callback(a.loaded.slice(0),a.missing.slice(0),a.pending.slice(0),r.abort))})}))}let ss=0;function rs(i,e,t){const n=ss++,s=bn.bind(null,t,n);if(!e.pending.length)return s;const r={id:n,icons:e,callback:i,abort:s};return t.forEach(a=>{(a.loaderCallbacks||(a.loaderCallbacks=[])).push(r)}),s}function as(i,e=!0,t=!1){const n=[];return i.forEach(s=>{const r=typeof s=="string"?je(s,e,t):s;r&&n.push(r)}),n}var os={resources:[],index:0,timeout:2e3,rotate:750,random:!1,dataAfterTimeout:!1};function ls(i,e,t,n){const s=i.resources.length,r=i.random?Math.floor(Math.random()*s):i.index;let a;if(i.random){let p=i.resources.slice(0);for(a=[];p.length>1;){const P=Math.floor(Math.random()*p.length);a.push(p[P]),p=p.slice(0,P).concat(p.slice(P+1))}a=a.concat(p)}else a=i.resources.slice(r).concat(i.resources.slice(0,r));const o=Date.now();let l="pending",c=0,f,h=null,m=[],g=[];typeof n=="function"&&g.push(n);function _(){h&&(clearTimeout(h),h=null)}function w(){l==="pending"&&(l="aborted"),_(),m.forEach(p=>{p.status==="pending"&&(p.status="aborted")}),m=[]}function v(p,P){P&&(g=[]),typeof p=="function"&&g.push(p)}function b(){return{startTime:o,payload:e,status:l,queriesSent:c,queriesPending:m.length,subscribe:v,abort:w}}function d(){l="failed",g.forEach(p=>{p(void 0,f)})}function u(){m.forEach(p=>{p.status==="pending"&&(p.status="aborted")}),m=[]}function y(p,P,L){const Z=P!=="success";switch(m=m.filter(A=>A!==p),l){case"pending":break;case"failed":if(Z||!i.dataAfterTimeout)return;break;default:return}if(P==="abort"){f=L,d();return}if(Z){f=L,m.length||(a.length?E():d());return}if(_(),u(),!i.random){const A=i.resources.indexOf(p.resource);A!==-1&&A!==i.index&&(i.index=A)}l="completed",g.forEach(A=>{A(L)})}function E(){if(l!=="pending")return;_();const p=a.shift();if(p===void 0){if(m.length){h=setTimeout(()=>{_(),l==="pending"&&(u(),d())},i.timeout);return}d();return}const P={status:"pending",resource:p,callback:(L,Z)=>{y(P,L,Z)}};m.push(P),c++,h=setTimeout(E,i.rotate),t(p,e,P.callback)}return setTimeout(E),b}function yn(i){const e={...os,...i};let t=[];function n(){t=t.filter(o=>o().status==="pending")}function s(o,l,c){const f=ls(e,o,l,(h,m)=>{n(),c&&c(h,m)});return t.push(f),f}function r(o){return t.find(l=>o(l))||null}return{query:s,find:r,setIndex:o=>{e.index=o},getIndex:()=>e.index,cleanup:n}}function Ht(){}const qe=Object.create(null);function us(i){if(!qe[i]){const e=gt(i);if(!e)return;const t=yn(e),n={config:e,redundancy:t};qe[i]=n}return qe[i]}function cs(i,e,t){let n,s;if(typeof i=="string"){const r=$e(i);if(!r)return t(void 0,424),Ht;s=r.send;const a=us(i);a&&(n=a.redundancy)}else{const r=mt(i);if(r){n=yn(r);const a=i.resources?i.resources[0]:"",o=$e(a);o&&(s=o.send)}}return!n||!s?(t(void 0,424),Ht):n.query(e,s,t)().abort}const jt="iconify2",we="iconify",vn=we+"-count",Rt=we+"-version",kn=36e5,fs=168;function et(i,e){try{return i.getItem(e)}catch{}}function bt(i,e,t){try{return i.setItem(e,t),!0}catch{}}function Ut(i,e){try{i.removeItem(e)}catch{}}function tt(i,e){return bt(i,vn,e.toString())}function nt(i){return parseInt(et(i,vn))||0}const Ue={local:!0,session:!0},_n={local:new Set,session:new Set};let yt=!1;function ds(i){yt=i}let Ee=typeof window>"u"?{}:window;function Tn(i){const e=i+"Storage";try{if(Ee&&Ee[e]&&typeof Ee[e].length=="number")return Ee[e]}catch{}Ue[i]=!1}function wn(i,e){const t=Tn(i);if(!t)return;const n=et(t,Rt);if(n!==jt){if(n){const o=nt(t);for(let l=0;l<o;l++)Ut(t,we+l.toString())}bt(t,Rt,jt),tt(t,0);return}const s=Math.floor(Date.now()/kn)-fs,r=o=>{const l=we+o.toString(),c=et(t,l);if(typeof c=="string"){try{const f=JSON.parse(c);if(typeof f=="object"&&typeof f.cached=="number"&&f.cached>s&&typeof f.provider=="string"&&typeof f.data=="object"&&typeof f.data.prefix=="string"&&e(f,o))return!0}catch{}Ut(t,l)}};let a=nt(t);for(let o=a-1;o>=0;o--)r(o)||(o===a-1?(a--,tt(t,a)):_n[i].add(o))}function Sn(){if(!yt){ds(!0);for(const i in Ue)wn(i,e=>{const t=e.data,n=e.provider,s=t.prefix,r=le(n,s);if(!ht(r,t).length)return!1;const a=t.lastModified||-1;return r.lastModifiedCached=r.lastModifiedCached?Math.min(r.lastModifiedCached,a):a,!0})}}function hs(i,e){const t=i.lastModifiedCached;if(t&&t>=e)return t===e;if(i.lastModifiedCached=e,t)for(const n in Ue)wn(n,s=>{const r=s.data;return s.provider!==i.provider||r.prefix!==i.prefix||r.lastModified===e});return!0}function ms(i,e){yt||Sn();function t(n){let s;if(!Ue[n]||!(s=Tn(n)))return;const r=_n[n];let a;if(r.size)r.delete(a=Array.from(r).shift());else if(a=nt(s),!tt(s,a+1))return;const o={cached:Math.floor(Date.now()/kn),provider:i.provider,data:e};return bt(s,we+a.toString(),JSON.stringify(o))}e.lastModified&&!hs(i,e.lastModified)||Object.keys(e.icons).length&&(e.not_found&&(e=Object.assign({},e),delete e.not_found),t("local")||t("session"))}function Vt(){}function ps(i){i.iconsLoaderFlag||(i.iconsLoaderFlag=!0,setTimeout(()=>{i.iconsLoaderFlag=!1,is(i)}))}function gs(i,e){i.iconsToLoad?i.iconsToLoad=i.iconsToLoad.concat(e).sort():i.iconsToLoad=e,i.iconsQueueFlag||(i.iconsQueueFlag=!0,setTimeout(()=>{i.iconsQueueFlag=!1;const{provider:t,prefix:n}=i,s=i.iconsToLoad;delete i.iconsToLoad;let r;if(!s||!(r=$e(t)))return;r.prepare(t,n,s).forEach(o=>{cs(t,o,l=>{if(typeof l!="object")o.icons.forEach(c=>{i.missing.add(c)});else try{const c=ht(i,l);if(!c.length)return;const f=i.pendingIcons;f&&c.forEach(h=>{f.delete(h)}),ms(i,l)}catch(c){console.error(c)}ps(i)})})}))}const bs=(i,e)=>{const t=as(i,!0,mn()),n=ns(t);if(!n.pending.length){let l=!0;return e&&setTimeout(()=>{l&&e(n.loaded,n.missing,n.pending,Vt)}),()=>{l=!1}}const s=Object.create(null),r=[];let a,o;return n.pending.forEach(l=>{const{provider:c,prefix:f}=l;if(f===o&&c===a)return;a=c,o=f,r.push(le(c,f));const h=s[c]||(s[c]=Object.create(null));h[f]||(h[f]=[])}),n.pending.forEach(l=>{const{provider:c,prefix:f,name:h}=l,m=le(c,f),g=m.pendingIcons||(m.pendingIcons=new Set);g.has(h)||(g.add(h),s[c][f].push(h))}),r.forEach(l=>{const{provider:c,prefix:f}=l;s[c][f].length&&gs(l,s[c][f])}),e?rs(e,n,r):Vt};function ys(i,e){const t={...i};for(const n in e){const s=e[n],r=typeof s;n in pn?(s===null||s&&(r==="string"||r==="number"))&&(t[n]=s):r===typeof t[n]&&(t[n]=n==="rotate"?s%4:s)}return t}const vs=/[\s,]+/;function ks(i,e){e.split(vs).forEach(t=>{switch(t.trim()){case"horizontal":i.hFlip=!0;break;case"vertical":i.vFlip=!0;break}})}function _s(i,e=0){const t=i.replace(/^-?[0-9.]*/,"");function n(s){for(;s<0;)s+=4;return s%4}if(t===""){const s=parseInt(i);return isNaN(s)?0:n(s)}else if(t!==i){let s=0;switch(t){case"%":s=25;break;case"deg":s=90}if(s){let r=parseFloat(i.slice(0,i.length-t.length));return isNaN(r)?0:(r=r/s,r%1===0?n(r):0)}}return e}function Ts(i,e){let t=i.indexOf("xlink:")===-1?"":' xmlns:xlink="http://www.w3.org/1999/xlink"';for(const n in e)t+=" "+n+'="'+e[n]+'"';return'<svg xmlns="http://www.w3.org/2000/svg"'+t+">"+i+"</svg>"}function ws(i){return i.replace(/"/g,"'").replace(/%/g,"%25").replace(/#/g,"%23").replace(/</g,"%3C").replace(/>/g,"%3E").replace(/\s+/g," ")}function Ss(i){return"data:image/svg+xml,"+ws(i)}function Is(i){return'url("'+Ss(i)+'")'}const zt={...gn,inline:!1},Es={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink","aria-hidden":!0,role:"img"},As={display:"inline-block"},it={"background-color":"currentColor"},In={"background-color":"transparent"},Gt={image:"var(--svg)",repeat:"no-repeat",size:"100% 100%"},qt={"-webkit-mask":it,mask:it,background:In};for(const i in qt){const e=qt[i];for(const t in Gt)e[i+"-"+t]=Gt[t]}function Cs(i){return i+(i.match(/^[-0-9.]+$/)?"px":"")}function Ps(i,e){const t=ys(zt,e),n=e.mode||"svg",s=n==="svg"?{...Es}:{};i.body.indexOf("xlink:")===-1&&delete s["xmlns:xlink"];let r=typeof e.style=="string"?e.style:"";for(let b in e){const d=e[b];if(d!==void 0)switch(b){case"icon":case"style":case"onLoad":case"mode":break;case"inline":case"hFlip":case"vFlip":t[b]=d===!0||d==="true"||d===1;break;case"flip":typeof d=="string"&&ks(t,d);break;case"color":r=r+(r.length>0&&r.trim().slice(-1)!==";"?";":"")+"color: "+d+"; ";break;case"rotate":typeof d=="string"?t[b]=_s(d):typeof d=="number"&&(t[b]=d);break;case"ariaHidden":case"aria-hidden":d!==!0&&d!=="true"&&delete s["aria-hidden"];break;default:if(b.slice(0,3)==="on:")break;zt[b]===void 0&&(s[b]=d)}}const a=Vi(i,t),o=a.attributes;if(t.inline&&(r="vertical-align: -0.125em; "+r),n==="svg"){Object.assign(s,o),r!==""&&(s.style=r);let b=0,d=e.id;return typeof d=="string"&&(d=d.replace(/-/g,"_")),{svg:!0,attributes:s,body:Ki(a.body,d?()=>d+"ID"+b++:"iconifySvelte")}}const{body:l,width:c,height:f}=i,h=n==="mask"||(n==="bg"?!1:l.indexOf("currentColor")!==-1),m=Ts(l,{...o,width:c+"",height:f+""}),_={"--svg":Is(m)},w=b=>{const d=o[b];d&&(_[b]=Cs(d))};w("width"),w("height"),Object.assign(_,As,h?it:In);let v="";for(const b in _)v+=b+": "+_[b]+";";return s.style=v+r,{svg:!1,attributes:s}}mn(!0);Wi("",ts);if(typeof document<"u"&&typeof window<"u"){Sn();const i=window;if(i.IconifyPreload!==void 0){const e=i.IconifyPreload,t="Invalid IconifyPreload syntax.";typeof e=="object"&&e!==null&&(e instanceof Array?e:[e]).forEach(n=>{try{(typeof n!="object"||n===null||n instanceof Array||typeof n.icons!="object"||typeof n.prefix!="string"||!Hi(n))&&console.error(t)}catch{console.error(t)}})}if(i.IconifyProviders!==void 0){const e=i.IconifyProviders;if(typeof e=="object"&&e!==null)for(let t in e){const n="IconifyProviders["+t+"] is invalid.";try{const s=e[t];if(typeof s!="object"||!s||s.resources===void 0)continue;Ji(t,s)||console.error(n)}catch{console.error(n)}}}}function Ns(i,e,t,n,s){function r(){e.loading&&(e.loading.abort(),e.loading=null)}if(typeof i=="object"&&i!==null&&typeof i.body=="string")return e.name="",r(),{data:{...Re,...i}};let a;if(typeof i!="string"||(a=je(i,!1,!0))===null)return r(),null;const o=Fi(a);if(!o)return t&&(!e.loading||e.loading.name!==i)&&(r(),e.name="",e.loading={name:i,abort:bs([a],n)}),null;r(),e.name!==i&&(e.name=i,s&&!e.destroyed&&s(i));const l=["iconify"];return a.prefix!==""&&l.push("iconify--"+a.prefix),a.provider!==""&&l.push("iconify--"+a.provider),{data:o,classes:l}}function Ms(i,e){return i?Ps({...Re,...i},e):null}function Kt(i){let e;function t(r,a){return r[0].svg?Ls:xs}let n=t(i),s=n(i);return{c(){s.c(),e=U()},l(r){s.l(r),e=U()},m(r,a){s.m(r,a),T(r,e,a)},p(r,a){n===(n=t(r))&&s?s.p(r,a):(s.d(1),s=n(r),s&&(s.c(),s.m(e.parentNode,e)))},d(r){s.d(r),r&&k(e)}}}function xs(i){let e,t=[i[0].attributes],n={};for(let s=0;s<t.length;s+=1)n=Y(n,t[s]);return{c(){e=M("span"),this.h()},l(s){e=x(s,"SPAN",{}),O(e).forEach(k),this.h()},h(){de(e,n)},m(s,r){T(s,e,r)},p(s,r){de(e,n=Be(t,[r&1&&s[0].attributes]))},d(s){s&&k(e)}}}function Ls(i){let e,t=i[0].body+"",n=[i[0].attributes],s={};for(let r=0;r<n.length;r+=1)s=Y(s,n[r]);return{c(){e=Un("svg"),this.h()},l(r){e=Vn(r,"svg",{});var a=O(e);a.forEach(k),this.h()},h(){wt(e,s)},m(r,a){T(r,e,a),e.innerHTML=t},p(r,a){a&1&&t!==(t=r[0].body+"")&&(e.innerHTML=t),wt(e,s=Be(n,[a&1&&r[0].attributes]))},d(r){r&&k(e)}}}function Ds(i){let e,t=i[0]&&Kt(i);return{c(){t&&t.c(),e=U()},l(n){t&&t.l(n),e=U()},m(n,s){t&&t.m(n,s),T(n,e,s)},p(n,[s]){n[0]?t?t.p(n,s):(t=Kt(n),t.c(),t.m(e.parentNode,e)):t&&(t.d(1),t=null)},i:pe,o:pe,d(n){t&&t.d(n),n&&k(e)}}}function Os(i,e,t){const n={name:"",loading:null,destroyed:!1};let s=!1,r=0,a;const o=c=>{typeof e.onLoad=="function"&&e.onLoad(c),ct()("load",{icon:c})};function l(){t(3,r++,r)}return ft(()=>{t(2,s=!0)}),Rn(()=>{t(1,n.destroyed=!0,n),n.loading&&(n.loading.abort(),t(1,n.loading=null,n))}),i.$$set=c=>{t(6,e=Y(Y({},e),he(c)))},i.$$.update=()=>{{const c=Ns(e.icon,n,s,l,o);t(0,a=c?Ms(c.data,e):null),a&&c.classes&&t(0,a.attributes.class=(typeof e.class=="string"?e.class+" ":"")+c.classes.join(" "),a)}},e=he(e),[a,n,s,r]}class Wt extends se{constructor(e){super(),re(this,e,Os,Ds,ae,{})}}function Ne(i){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?Ne=function(e){return typeof e}:Ne=function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ne(i)}function vt(i,e){if(!(i instanceof e))throw new TypeError("Cannot call a class as a function")}function Jt(i,e){for(var t=0;t<e.length;t++){var n=e[t];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(i,n.key,n)}}function kt(i,e,t){return e&&Jt(i.prototype,e),t&&Jt(i,t),i}var G={VERSION:"2.0.16",NOTES:[],HEADER_CHUNK_LENGTH:14,CIRCLE_OF_FOURTHS:["C","F","Bb","Eb","Ab","Db","Gb","Cb","Fb","Bbb","Ebb","Abb"],CIRCLE_OF_FIFTHS:["C","G","D","A","E","B","F#","C#","G#","D#","A#","E#"]},Fs=[["C"],["C#","Db"],["D"],["D#","Eb"],["E"],["F"],["F#","Gb"],["G"],["G#","Ab"],["A"],["A#","Bb"],["B"]],Xt=0,Bs=function(e){Fs.forEach(function(t){t.forEach(function(n){return G.NOTES[Xt]=n+e}),Xt++})};for(var Ke=-1;Ke<=9;Ke++)Bs(Ke);var j=function(){function i(){vt(this,i)}return kt(i,null,[{key:"byteToHex",value:function(t){return("0"+t.toString(16)).slice(-2)}},{key:"bytesToHex",value:function(t){var n=[];return t.forEach(function(s){return n.push(i.byteToHex(s))}),n.join("")}},{key:"hexToNumber",value:function(t){return parseInt(t,16)}},{key:"bytesToNumber",value:function(t){return i.hexToNumber(i.bytesToHex(t))}},{key:"bytesToLetters",value:function(t){var n=[];return t.forEach(function(s){return n.push(String.fromCharCode(s))}),n.join("")}},{key:"decToBinary",value:function(t){return(t>>>0).toString(2)}},{key:"getVarIntLength",value:function(t){for(var n=t[0],s=1;n>=128;)n=t[s],s++;return s}},{key:"readVarInt",value:function(t){var n=0;return t.forEach(function(s){var r=s;r&128?(n+=r&127,n<<=7):n+=r}),n}},{key:"atob",value:function(e){function t(n){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}(function(e){return typeof atob=="function"?atob(e):Buffer.from(e,"base64").toString("binary")})}]),i}(),Hs=function(){function i(e,t){vt(this,i),this.enabled=!0,this.eventIndex=0,this.pointer=0,this.lastTick=0,this.lastStatus=null,this.index=e,this.data=t,this.delta=0,this.runningDelta=0,this.events=[];var n=this.data.subarray(this.data.length-3,this.data.length);if(!(n[0]===255&&n[1]===47&&n[2]===0))throw"Invalid MIDI file; Last three bytes of track "+this.index+"must be FF 2F 00 to mark end of track"}return kt(i,[{key:"reset",value:function(){return this.enabled=!0,this.eventIndex=0,this.pointer=0,this.lastTick=0,this.lastStatus=null,this.delta=0,this.runningDelta=0,this}},{key:"enable",value:function(){return this.enabled=!0,this}},{key:"disable",value:function(){return this.enabled=!1,this}},{key:"setEventIndexByTick",value:function(t){t=t||0;for(var n in this.events)if(this.events[n].tick>=t)return this.eventIndex=n,this}},{key:"getCurrentByte",value:function(){return this.data[this.pointer]}},{key:"getDeltaByteCount",value:function(){return j.getVarIntLength(this.data.subarray(this.pointer))}},{key:"getDelta",value:function(){return j.readVarInt(this.data.subarray(this.pointer,this.pointer+this.getDeltaByteCount()))}},{key:"handleEvent",value:function(t,n){if(n=n||!1,n){var s=t-this.lastTick,r=this.getDelta(),a=s>=r;if(this.pointer<this.data.length&&(n||a)){var o=this.parseEvent();if(this.enabled)return o}}else if(this.events[this.eventIndex]&&this.events[this.eventIndex].tick<=t&&(this.eventIndex++,this.enabled))return this.events[this.eventIndex-1];return null}},{key:"getStringData",value:function(t){var n=j.getVarIntLength(this.data.subarray(t+2)),s=j.readVarInt(this.data.subarray(t+2,t+2+n)),r=j.bytesToLetters(this.data.subarray(t+2+n,t+2+n+s));return r}},{key:"parseEvent",value:function(){var t=this.pointer+this.getDeltaByteCount(),n={},s=this.getDeltaByteCount();if(n.track=this.index+1,n.delta=this.getDelta(),this.lastTick=this.lastTick+n.delta,this.runningDelta+=n.delta,n.tick=this.runningDelta,n.byteIndex=this.pointer,this.data[t]==255){switch(this.data[t+1]){case 0:n.name="Sequence Number";break;case 1:n.name="Text Event",n.string=this.getStringData(t);break;case 2:n.name="Copyright Notice";break;case 3:n.name="Sequence/Track Name",n.string=this.getStringData(t);break;case 4:n.name="Instrument Name",n.string=this.getStringData(t);break;case 5:n.name="Lyric",n.string=this.getStringData(t);break;case 6:n.name="Marker";break;case 7:n.name="Cue Point",n.string=this.getStringData(t);break;case 9:n.name="Device Name",n.string=this.getStringData(t);break;case 32:n.name="MIDI Channel Prefix";break;case 33:n.name="MIDI Port",n.data=j.bytesToNumber([this.data[t+3]]);break;case 47:n.name="End of Track";break;case 81:n.name="Set Tempo",n.data=Math.round(6e7/j.bytesToNumber(this.data.subarray(t+3,t+6))),this.tempo=n.data;break;case 84:n.name="SMTPE Offset";break;case 88:n.name="Time Signature",n.data=this.data.subarray(t+3,t+7),n.timeSignature=""+n.data[0]+"/"+Math.pow(2,n.data[1]);break;case 89:n.name="Key Signature",n.data=this.data.subarray(t+3,t+5),n.data[0]>=0?n.keySignature=G.CIRCLE_OF_FIFTHS[n.data[0]]:n.data[0]<0&&(n.keySignature=G.CIRCLE_OF_FOURTHS[Math.abs(n.data[0])]),n.data[1]==0?n.keySignature+=" Major":n.data[1]==1&&(n.keySignature+=" Minor");break;case 127:n.name="Sequencer-Specific Meta-event";break;default:n.name="Unknown: "+this.data[t+1].toString(16);break}var r=j.getVarIntLength(this.data.subarray(t+2)),a=j.readVarInt(this.data.subarray(t+2,t+2+r));this.pointer+=s+3+a}else if(this.data[t]===240){n.name="Sysex";var o=j.getVarIntLength(this.data.subarray(t+1)),l=j.readVarInt(this.data.subarray(t+1,t+1+o));n.data=this.data.subarray(t+1+o,t+1+o+l),this.pointer+=s+1+o+l}else if(this.data[t]===247){n.name="Sysex (escape)";var c=j.getVarIntLength(this.data.subarray(t+1)),f=j.readVarInt(this.data.subarray(t+1,t+1+c));n.data=this.data.subarray(t+1+c,t+1+c+f),this.pointer+=s+1+c+f}else if(this.data[t]<128)if(n.running=!0,n.noteNumber=this.data[t],n.noteName=G.NOTES[this.data[t]],n.velocity=this.data[t+1],this.lastStatus<=143)n.name="Note off",n.channel=this.lastStatus-128+1,this.pointer+=s+2;else if(this.lastStatus<=159)n.name="Note on",n.channel=this.lastStatus-144+1,this.pointer+=s+2;else if(this.lastStatus<=175)n.name="Polyphonic Key Pressure",n.channel=this.lastStatus-160+1,n.note=G.NOTES[this.data[t+1]],n.pressure=event[1],this.pointer+=s+2;else if(this.lastStatus<=191)n.name="Controller Change",n.channel=this.lastStatus-176+1,n.number=this.data[t+1],n.value=this.data[t+2],this.pointer+=s+2;else if(this.lastStatus<=207)n.name="Program Change",n.channel=this.lastStatus-192+1,n.value=this.data[t+1],this.pointer+=s+1;else if(this.lastStatus<=223)n.name="Channel Key Pressure",n.channel=this.lastStatus-208+1,this.pointer+=s+1;else if(this.lastStatus<=239)n.name="Pitch Bend",n.channel=this.lastStatus-224+1,n.value=this.data[t+2],this.pointer+=s+2;else throw"Unknown event (running): ".concat(this.lastStatus);else if(this.lastStatus=this.data[t],this.data[t]<=143)n.name="Note off",n.channel=this.lastStatus-128+1,n.noteNumber=this.data[t+1],n.noteName=G.NOTES[this.data[t+1]],n.velocity=Math.round(this.data[t+2]/127*100),this.pointer+=s+3;else if(this.data[t]<=159)n.name="Note on",n.channel=this.lastStatus-144+1,n.noteNumber=this.data[t+1],n.noteName=G.NOTES[this.data[t+1]],n.velocity=Math.round(this.data[t+2]/127*100),this.pointer+=s+3;else if(this.data[t]<=175)n.name="Polyphonic Key Pressure",n.channel=this.lastStatus-160+1,n.note=G.NOTES[this.data[t+1]],n.pressure=event[2],this.pointer+=s+3;else if(this.data[t]<=191)n.name="Controller Change",n.channel=this.lastStatus-176+1,n.number=this.data[t+1],n.value=this.data[t+2],this.pointer+=s+3;else if(this.data[t]<=207)n.name="Program Change",n.channel=this.lastStatus-192+1,n.value=this.data[t+1],this.pointer+=s+2;else if(this.data[t]<=223)n.name="Channel Key Pressure",n.channel=this.lastStatus-208+1,this.pointer+=s+2;else if(this.data[t]<=239)n.name="Pitch Bend",n.channel=this.lastStatus-224+1,this.pointer+=s+3;else throw"Unknown event: ".concat(this.data[t]);return this.delta+=n.delta,this.events.push(n),n}},{key:"endOfTrack",value:function(){return this.data[this.pointer+1]==255&&this.data[this.pointer+2]==47&&this.data[this.pointer+3]==0}}]),i}();Uint8Array.prototype.forEach||Object.defineProperty(Uint8Array.prototype,"forEach",{value:Array.prototype.forEach});var js=function(){function i(e,t){vt(this,i),this.sampleRate=5,this.startTime=0,this.buffer=t||null,this.midiChunksByteLength=null,this.division,this.format,this.setIntervalId=!1,this.tracks=[],this.instruments=[],this.defaultTempo=120,this.tempo=null,this.startTick=0,this.tick=0,this.lastTick=null,this.inLoop=!1,this.totalTicks=0,this.events=[],this.totalEvents=0,this.eventListeners={},typeof e=="function"&&this.on("midiEvent",e)}return kt(i,[{key:"loadFile",value:function(t){throw"loadFile is only supported on Node.js"}},{key:"loadArrayBuffer",value:function(t){return this.buffer=new Uint8Array(t),this.fileLoaded()}},{key:"loadDataUri",value:function(t){for(var n=j.atob(t.split(",")[1]),s=new Uint8Array(n.length),r=0;r<n.length;r++)s[r]=n.charCodeAt(r);return this.buffer=s,this.fileLoaded()}},{key:"getFilesize",value:function(){return this.buffer?this.buffer.length:0}},{key:"fileLoaded",value:function(){if(!this.validate())throw"Invalid MIDI file; should start with MThd";return this.setTempo(this.defaultTempo).getDivision().getFormat().getTracks().dryRun()}},{key:"validate",value:function(){return j.bytesToLetters(this.buffer.subarray(0,4))==="MThd"}},{key:"getFormat",value:function(){return this.format=j.bytesToNumber(this.buffer.subarray(8,10)),this}},{key:"getTracks",value:function(){this.tracks=[];for(var t=0;t<this.buffer.length;){if(j.bytesToLetters(this.buffer.subarray(t,t+4))=="MTrk"){var n=j.bytesToNumber(this.buffer.subarray(t+4,t+8));this.tracks.push(new Hs(this.tracks.length,this.buffer.subarray(t+8,t+8+n)))}t+=j.bytesToNumber(this.buffer.subarray(t+4,t+8))+8}var s=0;return this.tracks.forEach(function(r){s+=8+r.data.length}),this.midiChunksByteLength=G.HEADER_CHUNK_LENGTH+s,this}},{key:"enableTrack",value:function(t){return this.tracks[t-1].enable(),this}},{key:"disableTrack",value:function(t){return this.tracks[t-1].disable(),this}},{key:"getDivision",value:function(){return this.division=j.bytesToNumber(this.buffer.subarray(12,G.HEADER_CHUNK_LENGTH)),this}},{key:"playLoop",value:function(t){this.inLoop||(this.inLoop=!0,this.tick=this.getCurrentTick(),this.tracks.forEach(function(n,s){if(!t&&this.endOfFile())this.triggerPlayerEvent("endOfFile"),this.stop();else{var r=n.handleEvent(this.tick,t);t&&r?(r.hasOwnProperty("name")&&r.name==="Set Tempo"&&(this.defaultTempo=r.data,this.setTempo(r.data)),r.hasOwnProperty("name")&&r.name==="Program Change"&&(this.instruments.includes(r.value)||this.instruments.push(r.value))):r&&(r.hasOwnProperty("name")&&r.name==="Set Tempo"&&(this.setTempo(r.data),this.isPlaying()&&this.pause().play()),this.emitEvent(r))}},this),t||this.triggerPlayerEvent("playing",{tick:this.tick}),this.inLoop=!1)}},{key:"setTempo",value:function(t){return this.tempo=t,this}},{key:"setStartTime",value:function(t){return this.startTime=t,this}},{key:"play",value:function(){if(this.isPlaying())throw"Already playing...";return this.startTime||(this.startTime=new Date().getTime()),this.setIntervalId=setInterval(this.playLoop.bind(this),this.sampleRate),this}},{key:"loop",value:function(){setTimeout(function(){this.playLoop(),this.loop()}.bind(this),this.sampleRate)}},{key:"pause",value:function(){return clearInterval(this.setIntervalId),this.setIntervalId=!1,this.startTick=this.tick,this.startTime=0,this}},{key:"stop",value:function(){return clearInterval(this.setIntervalId),this.setIntervalId=!1,this.startTick=0,this.startTime=0,this.resetTracks(),this}},{key:"skipToTick",value:function(t){return this.stop(),this.startTick=t,this.tracks.forEach(function(n){n.setEventIndexByTick(t)}),this}},{key:"skipToPercent",value:function(t){if(t<0||t>100)throw"Percent must be number between 1 and 100.";return this.skipToTick(Math.round(t/100*this.totalTicks)),this}},{key:"skipToSeconds",value:function(t){var n=this.getSongTime();if(t<0||t>n)throw t+" seconds not within song time of "+n;return this.skipToPercent(t/n*100),this}},{key:"isPlaying",value:function(){return this.setIntervalId>0||Ne(this.setIntervalId)==="object"}},{key:"dryRun",value:function(){for(this.resetTracks();!this.endOfFile();)this.playLoop(!0);return this.events=this.getEvents(),this.totalEvents=this.getTotalEvents(),this.totalTicks=this.getTotalTicks(),this.startTick=0,this.startTime=0,this.resetTracks(),this.triggerPlayerEvent("fileLoaded",this),this}},{key:"resetTracks",value:function(){return this.tracks.forEach(function(t){return t.reset()}),this}},{key:"getEvents",value:function(){return this.tracks.map(function(t){return t.events})}},{key:"getTotalTicks",value:function(){return Math.max.apply(null,this.tracks.map(function(t){return t.delta}))}},{key:"getTotalEvents",value:function(){return this.tracks.reduce(function(t,n){return{events:{length:t.events.length+n.events.length}}},{events:{length:0}}).events.length}},{key:"getSongTime",value:function(){return this.totalTicks/this.division/this.tempo*60}},{key:"getSongTimeRemaining",value:function(){return Math.round((this.totalTicks-this.getCurrentTick())/this.division/this.tempo*60)}},{key:"getSongPercentRemaining",value:function(){return Math.round(this.getSongTimeRemaining()/this.getSongTime()*100)}},{key:"bytesProcessed",value:function(){return G.HEADER_CHUNK_LENGTH+this.tracks.length*8+this.tracks.reduce(function(t,n){return{pointer:t.pointer+n.pointer}},{pointer:0}).pointer}},{key:"eventsPlayed",value:function(){return this.tracks.reduce(function(t,n){return{eventIndex:t.eventIndex+n.eventIndex}},{eventIndex:0}).eventIndex}},{key:"endOfFile",value:function(){return this.isPlaying()?this.totalTicks-this.tick<=0:this.bytesProcessed()>=this.midiChunksByteLength}},{key:"getCurrentTick",value:function(){return this.startTime?Math.round((new Date().getTime()-this.startTime)/1e3*(this.division*(this.tempo/60)))+this.startTick:this.startTick}},{key:"emitEvent",value:function(t){return this.triggerPlayerEvent("midiEvent",t),this}},{key:"on",value:function(t,n){return this.eventListeners.hasOwnProperty(t)||(this.eventListeners[t]=[]),this.eventListeners[t].push(n),this}},{key:"triggerPlayerEvent",value:function(t,n){return this.eventListeners.hasOwnProperty(t)&&this.eventListeners[t].forEach(function(s){return s(n||{})}),this}}]),i}(),Rs={Player:js,Utils:j,Constants:G},Us=Object.defineProperty,Zt=Object.getOwnPropertySymbols,Vs=Object.prototype.hasOwnProperty,zs=Object.prototype.propertyIsEnumerable,Qt=(i,e,t)=>e in i?Us(i,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):i[e]=t,Gs=(i,e)=>{for(var t in e||(e={}))Vs.call(e,t)&&Qt(i,t,e[t]);if(Zt)for(var t of Zt(e))zs.call(e,t)&&Qt(i,t,e[t]);return i},En=(i,e,t)=>{if(!e.has(i))throw TypeError("Cannot "+t)},D=(i,e,t)=>(En(i,e,"read from private field"),t?t.call(i):e.get(i)),Q=(i,e,t)=>{if(e.has(i))throw TypeError("Cannot add the same private member more than once");e instanceof WeakSet?e.add(i):e.set(i,t)},z=(i,e,t,n)=>(En(i,e,"write to private field"),n?n.call(i,t):e.set(i,t),t),ge=(i,e,t)=>new Promise((n,s)=>{var r=l=>{try{o(t.next(l))}catch(c){s(c)}},a=l=>{try{o(t.throw(l))}catch(c){s(c)}},o=l=>l.done?n(l.value):Promise.resolve(l.value).then(r,a);o((t=t.apply(i,e)).next())});function qs(i,e,t){return ge(this,null,function*(){e=e.replace(/#/g,"%23").replace(/([^:]\/)\/+/g,"$1");const n=yield t.fetch(e);if(n.status!==200){console.warn("Error loading buffer. Invalid status: ",n.status,e);return}try{const s=yield n.arrayBuffer();return yield i.decodeAudioData(s)}catch(s){console.warn("Error loading buffer",s,e)}})}function Ks(i){if(typeof document>"u")return null;const e=document.createElement("audio");for(let t=0;t<i.length;t++){const n=i[t],s=e.canPlayType(`audio/${n}`);if(s==="probably"||s==="maybe")return n;if(n==="m4a"){const r=e.canPlayType("audio/aac");if(r==="probably"||r==="maybe")return n}}return null}var Ws={fetch};function Me(i){const e=i.filter(t=>!!t);return e.reduce((t,n)=>{const s="output"in t?t.output:t,r="input"in n?n.input:n;return s.connect(r),n}),()=>{e.reduce((t,n)=>{const s="output"in t?t.output:t,r="input"in n?n.input:n;return s.disconnect(r),n})}}function Js(i){const t=/^([a-gA-G]?)(#{1,}|b{1,}|)(-?\d+)$/.exec(i);if(!t)return;const n=t[1].toUpperCase();if(!n)return;const s=t[2],r=s[0]==="b"?-s.length:s.length,a=t[3]?+t[3]:4,o=(n.charCodeAt(0)+3)%7;return[0,2,4,5,7,9,11][o]+r+12*(a+1)}function An(i){return i===void 0?void 0:typeof i=="number"?i:Js(i)}function st(i){return i*i/16129}function Xs(i,e){let t=0;for(;e[i+t]===void 0&&t<128;)t>0?t=-t:t=-t+1;return t===127?[i,0]:[i+t,-t*100]}function Zs(i){let e=i;const t=new Set;function n(a){return t.add(a),a(e),()=>{t.delete(a)}}function s(a){e=a,t.forEach(o=>o(e))}function r(){return e}return{subscribe:n,set:s,get:r}}function Qs(){const i=new Set;function e(n){return i.add(n),()=>{i.delete(n)}}function t(n){i.forEach(s=>s(n))}return{subscribe:e,trigger:t}}function Ys(i){let e=!1;return()=>{e||(e=!0,i.forEach(t=>t==null?void 0:t()))}}var oe,ie,ue,ce,xe,ye,$s=class{constructor(i,e){this.context=i,Q(this,oe,void 0),Q(this,ie,void 0),Q(this,ue,void 0),Q(this,ce,void 0),Q(this,xe,void 0),Q(this,ye,void 0);var t,n;z(this,ye,Object.freeze(Gs({destination:i.destination,volume:100,volumeToGain:st},e))),this.input=new GainNode(this.context),z(this,oe,new GainNode(this.context)),z(this,ce,Me([this.input,D(this,oe),D(this,ye).destination]));const s=Zs((t=e.volume)!=null?t:100);this.setVolume=s.set;const r=(n=e.volumeToGain)!=null?n:st;z(this,xe,s.subscribe(a=>{D(this,oe).gain.value=r(a)}))}addInsert(i){var e;(e=D(this,ue))!=null||z(this,ue,[]),D(this,ue).push(i),D(this,ce).call(this),z(this,ce,Me([this.input,...D(this,ue),D(this,oe),D(this,ye).destination]))}addEffect(i,e,t){var n;const s=new GainNode(this.context);s.gain.value=t;const r="input"in e?e.input:e,a=Me([D(this,oe),s,r]);(n=D(this,ie))!=null||z(this,ie,[]),D(this,ie).push({name:i,mix:s,disconnect:a})}sendEffect(i,e){var t;const n=(t=D(this,ie))==null?void 0:t.find(s=>s.name===i);n?n.mix.gain.value=e:console.warn("Send bus not found: "+i)}disconnect(){var i;D(this,ce).call(this),D(this,xe).call(this),(i=D(this,ie))==null||i.forEach(e=>e.disconnect()),z(this,ie,void 0)}};oe=new WeakMap;ie=new WeakMap;ue=new WeakMap;ce=new WeakMap;xe=new WeakMap;ye=new WeakMap;function er(i){var e,t,n;const s=i.destination.context,r=s.createBufferSource();r.buffer=i.buffer,r.detune.value=(e=i==null?void 0:i.detune)!=null?e:0;const a=i.lpfCutoffHz?new BiquadFilterNode(s,{type:"lowpass",frequency:i.lpfCutoffHz}):void 0,o=s.createGain();o.gain.value=(t=i==null?void 0:i.gain)!=null?t:1;const[l,c]=tr(s,i.decayTime),f=Ys([Me([r,a,o,l,i.destination]),(n=i.stop)==null?void 0:n.call(i,g=>{(g===void 0||g.stopId===void 0||g.stopId===i.stopId)&&m(g==null?void 0:g.time)})]);r.onended=()=>{var g;f(),(g=i.onEnded)==null||g.call(i)};const h=i.time||s.currentTime;r.start(h);function m(g){if(g??(g=s.currentTime),g<=h)r.stop(g);else{const _=c(g);r.stop(_)}}return i.duration!==void 0&&m(h+i.duration),m}function tr(i,e=.2){let t=0;const n=new GainNode(i,{gain:1});function s(r){if(t)return t;n.gain.cancelScheduledValues(r);const a=r||i.currentTime;return t=a+e,n.gain.setValueAtTime(1,a),n.gain.linearRampToValueAtTime(0,t),t}return[n,s]}var V,ve,Le,ke,nr=class{constructor(i,e={}){this.context=i,Q(this,V,void 0),Q(this,ve,void 0),Q(this,Le,void 0),Q(this,ke,void 0);var t,n,s,r,a,o,l;z(this,V,{destination:(t=e.destination)!=null?t:i.destination,detune:0,volume:(n=e.volume)!=null?n:100,velocity:(s=e.velocity)!=null?s:100,buffers:(r=e.buffers)!=null?r:{},volumeToGain:(a=e.volumeToGain)!=null?a:st,noteToSample:(o=e.noteToSample)!=null?o:h=>[h.note.toString(),0]}),this.buffers={},z(this,ve,Qs());const c=(l=e.storage)!=null?l:Ws,f=typeof D(this,V).buffers=="function"?D(this,V).buffers:ir(D(this,V).buffers,c);z(this,Le,f(i,this.buffers)),z(this,ke,new $s(i,D(this,V))),this.output=D(this,ke)}loaded(){return ge(this,null,function*(){return yield D(this,Le),this})}start(i){var e,t,n;const s=typeof i=="object"?i:{note:i},[r,a]=D(this,V).noteToSample(s,this.buffers,D(this,V)),o=this.buffers[r];if(!o)return console.warn(`Sample not found: '${r}'`),()=>{};const l=s.onEnded;return er({buffer:o,destination:D(this,ke).input,time:s.time,duration:s.duration,decayTime:s.decayTime,lpfCutoffHz:s.lpfCutoffHz,detune:a+((e=s.detune)!=null?e:D(this,V).detune),gain:D(this,V).volumeToGain((t=s.velocity)!=null?t:D(this,V).velocity),stop:D(this,ve).subscribe,stopId:(n=s.stopId)!=null?n:s.note,onEnded:l?()=>l(i):void 0})}stop(i){const e=typeof i=="object"?i:{stopId:i};D(this,ve).trigger(e)}};V=new WeakMap;ve=new WeakMap;Le=new WeakMap;ke=new WeakMap;function ir(i,e){return(t,n)=>ge(this,null,function*(){yield Promise.all([Object.keys(i).map(s=>ge(this,null,function*(){const r=i[s];if(r instanceof AudioBuffer)n[s]=r;else if(typeof r=="string"){const a=yield qs(t,r,e);a&&(n[s]=a)}}))])})}var sr=class extends nr{constructor(i,e){var t,n,s;const r=e.instrument.startsWith("http")?e.instrument:ur(e.instrument,(t=e.kit)!=null?t:"MusyngKite");super(i,{destination:e.destination,detune:e.detune,volume:e.volume,velocity:e.velocity,decayTime:(n=e.decayTime)!=null?n:.5,lpfCutoffHz:e.lpfCutoffHz,buffers:rr(r),noteToSample:(l,c,f)=>{let h=An(l.note);return h===void 0?["",0]:Xs(h,c)}});const a=(s=e.extraGain)!=null?s:5,o=new GainNode(i,{gain:a});this.output.addInsert(o)}};function rr(i){return(e,t)=>ge(this,null,function*(){const n=yield(yield fetch(i)).text(),s=ar(n),r=Object.keys(s);yield Promise.all(r.map(a=>ge(this,null,function*(){const o=An(a);if(!o)return;const l=lr(or(s[a])),c=yield e.decodeAudioData(l);t[o]=c})))})}function ar(i){const e=i.indexOf("MIDI.Soundfont.");if(e<0)throw Error("Invalid MIDI.js Soundfont format");const t=i.indexOf("=",e)+2,n=i.lastIndexOf(",");return JSON.parse(i.slice(t,n)+"}")}function or(i){return i.slice(i.indexOf(",")+1)}function lr(i){const e=window.atob(i),t=e.length,n=new Uint8Array(t);for(let s=0;s<t;s++)n[s]=e.charCodeAt(s);return n.buffer}function ur(i,e){var t;const n=(t=Ks(["ogg","mp3"]))!=null?t:"mp3";return`https://gleitz.github.io/midi-js-soundfonts/${e}/${i}-${n}.js`}function Yt(i,e,t){const n=i.slice();return n[19]=e[t],n[20]=e,n[21]=t,n}function cr(i){let e=Ae(i[1])+"",t,n,s,r,a,o,l=Ae(i[0])+"",c,f,h,m;function g(u){i[10](u)}function _(u){i[11](u)}let w={step:.5};i[1]!==void 0&&(w.value=i[1]),i[0]!==void 0&&(w.max=i[0]),s=new ei({props:w}),We.push(()=>Je(s,"value",g)),We.push(()=>Je(s,"max",_)),s.$on("click",function(){zn(i[6](i[1]))&&i[6](i[1]).apply(this,arguments)});let v=i[3],b=[];for(let u=0;u<v.length;u+=1)b[u]=$t(Yt(i,v,u));const d=u=>N(b[u],1,1,()=>{b[u]=null});return{c(){t=te(e),n=B(),K(s.$$.fragment),o=B(),c=te(l),f=B();for(let u=0;u<b.length;u+=1)b[u].c();h=U()},l(u){t=ne(u,e),n=H(u),W(s.$$.fragment,u),o=H(u),c=ne(u,l),f=H(u);for(let y=0;y<b.length;y+=1)b[y].l(u);h=U()},m(u,y){T(u,t,y),T(u,n,y),J(s,u,y),T(u,o,y),T(u,c,y),T(u,f,y);for(let E=0;E<b.length;E+=1)b[E]&&b[E].m(u,y);T(u,h,y),m=!0},p(u,y){i=u,(!m||y&2)&&e!==(e=Ae(i[1])+"")&&me(t,e);const E={};if(!r&&y&2&&(r=!0,E.value=i[1],Xe(()=>r=!1)),!a&&y&1&&(a=!0,E.max=i[0],Xe(()=>a=!1)),s.$set(E),(!m||y&1)&&l!==(l=Ae(i[0])+"")&&me(c,l),y&136){v=i[3];let p;for(p=0;p<v.length;p+=1){const P=Yt(i,v,p);b[p]?(b[p].p(P,y),I(b[p],1)):(b[p]=$t(P),b[p].c(),I(b[p],1),b[p].m(h.parentNode,h))}for($(),p=v.length;p<b.length;p+=1)d(p);ee()}},i(u){if(!m){I(s.$$.fragment,u);for(let y=0;y<v.length;y+=1)I(b[y]);m=!0}},o(u){N(s.$$.fragment,u),b=b.filter(Boolean);for(let y=0;y<b.length;y+=1)N(b[y]);m=!1},d(u){u&&k(t),u&&k(n),X(s,u),u&&k(o),u&&k(c),u&&k(f),He(b,u),u&&k(h)}}}function fr(i){let e,t;return e=new ln({}),{c(){K(e.$$.fragment)},l(n){W(e.$$.fragment,n)},m(n,s){J(e,n,s),t=!0},p:pe,i(n){t||(I(e.$$.fragment,n),t=!0)},o(n){N(e.$$.fragment,n),t=!1},d(n){X(e,n)}}}function $t(i){let e,t,n,s=i[19].name+"",r,a,o,l;function c(h){i[12](h,i[19])}let f={name:i[19].instrumentTrack+"-"+i[19].name};return i[19].playing!==void 0&&(f.checked=i[19].playing),a=new oi({props:f}),We.push(()=>Je(a,"checked",c)),a.$on("change",i[7]),{c(){e=M("br"),t=B(),n=M("span"),r=te(s),K(a.$$.fragment)},l(h){e=x(h,"BR",{}),t=H(h),n=x(h,"SPAN",{});var m=O(n);r=ne(m,s),m.forEach(k),W(a.$$.fragment,h)},m(h,m){T(h,e,m),T(h,t,m),T(h,n,m),F(n,r),J(a,h,m),l=!0},p(h,m){i=h,(!l||m&8)&&s!==(s=i[19].name+"")&&me(r,s);const g={};m&8&&(g.name=i[19].instrumentTrack+"-"+i[19].name),!o&&m&8&&(o=!0,g.checked=i[19].playing,Xe(()=>o=!1)),a.$set(g)},i(h){l||(I(a.$$.fragment,h),l=!0)},o(h){N(a.$$.fragment,h),l=!1},d(h){h&&k(e),h&&k(t),h&&k(n),X(a,h)}}}function dr(i){let e,t,n,s,r,a,o,l,c,f,h,m;t=new Wt({props:{icon:"material-symbols:play-pause"}}),r=new Wt({props:{icon:"material-symbols:stop"}});const g=[fr,cr],_=[];function w(v,b){return v[2]?1:0}return l=w(i),c=_[l]=g[l](i),{c(){e=M("button"),K(t.$$.fragment),n=B(),s=M("button"),K(r.$$.fragment),a=B(),o=M("span"),c.c(),this.h()},l(v){e=x(v,"BUTTON",{id:!0});var b=O(e);W(t.$$.fragment,b),b.forEach(k),n=H(v),s=x(v,"BUTTON",{id:!0});var d=O(s);W(r.$$.fragment,d),d.forEach(k),a=H(v),o=x(v,"SPAN",{});var u=O(o);c.l(u),u.forEach(k),this.h()},h(){S(e,"id","playMIDI"),S(s,"id","stopMIDI")},m(v,b){T(v,e,b),J(t,e,null),T(v,n,b),T(v,s,b),J(r,s,null),T(v,a,b),T(v,o,b),_[l].m(o,null),f=!0,h||(m=[R(e,"click",i[4]),R(s,"click",i[5])],h=!0)},p(v,[b]){let d=l;l=w(v),l===d?_[l].p(v,b):($(),N(_[d],1,1,()=>{_[d]=null}),ee(),c=_[l],c?c.p(v,b):(c=_[l]=g[l](v),c.c()),I(c,1),c.m(o,null))},i(v){f||(I(t.$$.fragment,v),I(r.$$.fragment,v),I(c),f=!0)},o(v){N(t.$$.fragment,v),N(r.$$.fragment,v),N(c),f=!1},d(v){v&&k(e),X(t),v&&k(n),v&&k(s),X(r),v&&k(a),v&&k(o),_[l].d(),h=!1,rt(m)}}}function Ae(i){let e=Math.floor(i/60),t=Math.floor(i-e*60);return e=e.toString().padStart(2,"0"),t=t.toString().padStart(2,"0"),`${e}:${t}`}function hr(i,e,t){let{midiFile:n=void 0}=e,{timeMap:s=void 0}=e;const r=ct();let a,o,l=[],c=0,f=0,h=!1,m=[];const g=function(){a.isPlaying()?(a.pause(),w()):a.play()},_=function(){w(),o.suspend(),a.stop(),t(1,f=0)},w=function(){for(let p=0;p<l.length;p++)l[p].stop()},v=function(p){o.resume();for(const L in m)m[L].playing||a.tracks[parseInt(L)+1].disable();let P=Math.round(p.tick/a.division/120*60*1e3);if(p.name=="Note on"&&p.velocity>0){try{r("noteOn",s[P].on)}catch(L){console.log(L),console.log(P),console.log(s)}l[p.track-2].start({note:p.noteName,velocity:p.velocity})}else if(p.name=="Note on"&&p.velocity==0){try{r("noteOff",s[P].off)}catch(L){console.log(L),console.log(P),console.log(s)}l[p.track-2].stop()}},b=async function(){a.isPlaying()?(w(),await a.stop(),await a.skipToSeconds(f),g()):a.skipToSeconds(f)},d=function(){const p=this.name.split("-");m[parseInt(p[0])].playing?a.tracks[parseInt(p[0])+1].enable():(l[parseInt(p[0])].stop(),a.tracks[parseInt(p[0])+1].disable())};ft(async()=>{a=new Rs.Player(L=>v(L)),a.loadDataUri(n),t(0,c=a.getSongTime()),o=new AudioContext;let p=a.getEvents();const P={Superius:"violin",Contratenor:"viola",PrimusTenor:"cello",SecundusTenor:"flute",Bassus:"contrabass"};for(let L=1;L<p.length;L++)if(p[L][0].name==="Sequence/Track Name"){let Z=await new sr(o,{instrument:P[p[L][0].string]}).loaded();l.push(Z),m.push({name:p[L][0].string,instrumentTrack:L-1,chosenInstrument:P[p[L][0].string],playing:!0})}console.log(m),setInterval(function(){a.isPlaying()&&t(1,f=c-a.getSongTimeRemaining())},1e3),t(2,h=!0)});function u(p){f=p,t(1,f)}function y(p){c=p,t(0,c)}function E(p,P){i.$$.not_equal(P.playing,p)&&(P.playing=p,t(3,m))}return i.$$set=p=>{"midiFile"in p&&t(8,n=p.midiFile),"timeMap"in p&&t(9,s=p.timeMap)},[c,f,h,m,g,_,b,d,n,s,u,y,E]}class mr extends se{constructor(e){super(),re(this,e,hr,dr,ae,{midiFile:8,timeMap:9})}}function en(i,e,t){const n=i.slice();return n[5]=e[t],n}function tn(i){let e,t=i[5]+"",n;return{c(){e=new Gn(!1),n=U(),this.h()},l(s){e=qn(s,!1),n=U(),this.h()},h(){e.a=n},m(s,r){e.m(t,s,r),T(s,n,r)},p(s,r){r&1&&t!==(t=s[5]+"")&&e.p(t)},d(s){s&&k(n),s&&e.d()}}}function pr(i){let e,t,n,s;e=new mr({props:{midiFile:i[1],timeMap:i[2]}}),e.$on("noteOn",i[3]),e.$on("noteOff",i[4]);let r=i[0],a=[];for(let o=0;o<r.length;o+=1)a[o]=tn(en(i,r,o));return{c(){K(e.$$.fragment),t=B(),n=M("div");for(let o=0;o<a.length;o+=1)a[o].c();this.h()},l(o){W(e.$$.fragment,o),t=H(o),n=x(o,"DIV",{id:!0});var l=O(n);for(let c=0;c<a.length;c+=1)a[c].l(l);l.forEach(k),this.h()},h(){S(n,"id","MEI-container")},m(o,l){J(e,o,l),T(o,t,l),T(o,n,l);for(let c=0;c<a.length;c+=1)a[c]&&a[c].m(n,null);s=!0},p(o,[l]){const c={};if(l&2&&(c.midiFile=o[1]),l&4&&(c.timeMap=o[2]),e.$set(c),l&1){r=o[0];let f;for(f=0;f<r.length;f+=1){const h=en(o,r,f);a[f]?a[f].p(h,l):(a[f]=tn(h),a[f].c(),a[f].m(n,null))}for(;f<a.length;f+=1)a[f].d(1);a.length=r.length}},i(o){s||(I(e.$$.fragment,o),s=!0)},o(o){N(e.$$.fragment,o),s=!1},d(o){X(e,o),o&&k(t),o&&k(n),He(a,o)}}}function gr(i,e,t){let{meiSvg:n=void 0}=e,{meiMidi:s=void 0}=e,{timeMap:r=void 0}=e;const a=function(l){for(let c in l.detail)document.getElementById(l.detail[c]).classList.add("note-playing")},o=function(l){for(let c in l.detail)document.getElementById(l.detail[c]).classList.remove("note-playing")};return i.$$set=l=>{"meiSvg"in l&&t(0,n=l.meiSvg),"meiMidi"in l&&t(1,s=l.meiMidi),"timeMap"in l&&t(2,r=l.timeMap)},[n,s,r,a,o]}class br extends se{constructor(e){super(),re(this,e,gr,pr,ae,{meiSvg:0,meiMidi:1,timeMap:2})}}function nn(i,e,t){const n=i.slice();return n[1]=e[t][0],n[2]=e[t][1],n}function sn(i){let e,t=i[1]+"",n,s,r,a;return r=new Kn({props:{content:i[2].content}}),{c(){e=M("h2"),n=te(t),s=B(),K(r.$$.fragment)},l(o){e=x(o,"H2",{});var l=O(e);n=ne(l,t),l.forEach(k),s=H(o),W(r.$$.fragment,o)},m(o,l){T(o,e,l),F(e,n),T(o,s,l),J(r,o,l),a=!0},p(o,l){(!a||l&1)&&t!==(t=o[1]+"")&&me(n,t);const c={};l&1&&(c.content=o[2].content),r.$set(c)},i(o){a||(I(r.$$.fragment,o),a=!0)},o(o){N(r.$$.fragment,o),a=!1},d(o){o&&k(e),o&&k(s),X(r,o)}}}function rn(i){let e,t,n=i[2].type==="md"&&sn(i);return{c(){n&&n.c(),e=U()},l(s){n&&n.l(s),e=U()},m(s,r){n&&n.m(s,r),T(s,e,r),t=!0},p(s,r){s[2].type==="md"?n?(n.p(s,r),r&1&&I(n,1)):(n=sn(s),n.c(),I(n,1),n.m(e.parentNode,e)):n&&($(),N(n,1,1,()=>{n=null}),ee())},i(s){t||(I(n),t=!0)},o(s){N(n),t=!1},d(s){n&&n.d(s),s&&k(e)}}}function yr(i){let e,t,n,s,r,a,o,l,c,f;s=new Pi({props:{audioPath:dt+"/content/music/media/virtualbarbershop.mp3"}});let h="mei"in i[0].view&&an(i);return{c(){e=M("h3"),t=te("Binaural recording test"),n=B(),K(s.$$.fragment),r=B(),a=M("h3"),o=te("MEI engraving and playback test"),l=B(),h&&h.c(),c=U()},l(m){e=x(m,"H3",{});var g=O(e);t=ne(g,"Binaural recording test"),g.forEach(k),n=H(m),W(s.$$.fragment,m),r=H(m),a=x(m,"H3",{});var _=O(a);o=ne(_,"MEI engraving and playback test"),_.forEach(k),l=H(m),h&&h.l(m),c=U()},m(m,g){T(m,e,g),F(e,t),T(m,n,g),J(s,m,g),T(m,r,g),T(m,a,g),F(a,o),T(m,l,g),h&&h.m(m,g),T(m,c,g),f=!0},p(m,g){"mei"in m[0].view?h?(h.p(m,g),g&1&&I(h,1)):(h=an(m),h.c(),I(h,1),h.m(c.parentNode,c)):h&&($(),N(h,1,1,()=>{h=null}),ee())},i(m){f||(I(s.$$.fragment,m),I(h),f=!0)},o(m){N(s.$$.fragment,m),N(h),f=!1},d(m){m&&k(e),m&&k(n),X(s,m),m&&k(r),m&&k(a),m&&k(l),h&&h.d(m),m&&k(c)}}}function vr(i){let e,t,n,s,r;return s=new Ei({props:{path:dt+"/content/literature/data/Coopers_hill_1655.xml"}}),{c(){e=M("h3"),t=te("Test"),n=B(),K(s.$$.fragment)},l(a){e=x(a,"H3",{});var o=O(e);t=ne(o,"Test"),o.forEach(k),n=H(a),W(s.$$.fragment,a)},m(a,o){T(a,e,o),F(e,t),T(a,n,o),J(s,a,o),r=!0},p:pe,i(a){r||(I(s.$$.fragment,a),r=!0)},o(a){N(s.$$.fragment,a),r=!1},d(a){a&&k(e),a&&k(n),X(s,a)}}}function an(i){let e,t;return e=new br({props:{meiSvg:i[0].view.mei.svg,meiMidi:i[0].view.mei.midi,timeMap:i[0].view.mei.timeMap}}),{c(){K(e.$$.fragment)},l(n){W(e.$$.fragment,n)},m(n,s){J(e,n,s),t=!0},p(n,s){const r={};s&1&&(r.meiSvg=n[0].view.mei.svg),s&1&&(r.meiMidi=n[0].view.mei.midi),s&1&&(r.timeMap=n[0].view.mei.timeMap),e.$set(r)},i(n){t||(I(e.$$.fragment,n),t=!0)},o(n){N(e.$$.fragment,n),t=!1},d(n){X(e,n)}}}function kr(i){let e,t,n,s,r=i[0].view.title+"",a,o,l,c,f,h,m,g=Object.entries(i[0].view.sections),_=[];for(let u=0;u<g.length;u+=1)_[u]=rn(nn(i,g,u));const w=u=>N(_[u],1,1,()=>{_[u]=null}),v=[vr,yr],b=[];function d(u,y){return u[0].view.slug==="literature"?0:u[0].view.slug==="music"?1:-1}return~(c=d(i))&&(f=b[c]=v[c](i)),{c(){e=M("h1"),t=te("View page"),n=B(),s=M("h1"),a=te(r),o=B();for(let u=0;u<_.length;u+=1)_[u].c();l=B(),f&&f.c(),h=U()},l(u){e=x(u,"H1",{});var y=O(e);t=ne(y,"View page"),y.forEach(k),n=H(u),s=x(u,"H1",{});var E=O(s);a=ne(E,r),E.forEach(k),o=H(u);for(let p=0;p<_.length;p+=1)_[p].l(u);l=H(u),f&&f.l(u),h=U()},m(u,y){T(u,e,y),F(e,t),T(u,n,y),T(u,s,y),F(s,a),T(u,o,y);for(let E=0;E<_.length;E+=1)_[E]&&_[E].m(u,y);T(u,l,y),~c&&b[c].m(u,y),T(u,h,y),m=!0},p(u,[y]){if((!m||y&1)&&r!==(r=u[0].view.title+"")&&me(a,r),y&1){g=Object.entries(u[0].view.sections);let p;for(p=0;p<g.length;p+=1){const P=nn(u,g,p);_[p]?(_[p].p(P,y),I(_[p],1)):(_[p]=rn(P),_[p].c(),I(_[p],1),_[p].m(l.parentNode,l))}for($(),p=g.length;p<_.length;p+=1)w(p);ee()}let E=c;c=d(u),c===E?~c&&b[c].p(u,y):(f&&($(),N(b[E],1,1,()=>{b[E]=null}),ee()),~c?(f=b[c],f?f.p(u,y):(f=b[c]=v[c](u),f.c()),I(f,1),f.m(h.parentNode,h)):f=null)},i(u){if(!m){for(let y=0;y<g.length;y+=1)I(_[y]);I(f),m=!0}},o(u){_=_.filter(Boolean);for(let y=0;y<_.length;y+=1)N(_[y]);N(f),m=!1},d(u){u&&k(e),u&&k(n),u&&k(s),u&&k(o),He(_,u),u&&k(l),~c&&b[c].d(u),u&&k(h)}}}function _r(i,e,t){let{data:n}=e;return i.$$set=s=>{"data"in s&&t(0,n=s.data)},[n]}class Er extends se{constructor(e){super(),re(this,e,_r,kr,ae,{data:0})}}export{Er as component};
